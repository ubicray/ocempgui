<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>OcempGUI Manual</title><meta name="generator" content="DocBook XSL Stylesheets V1.71.1"><meta name="description" content="A GUI library for Pygame"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="ocempgui-manual"></a>OcempGUI Manual</h1></div><div><div class="authorgroup"><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="author"><strong class="author"><span xmlns="" class="firstname">Marcus</span> <span xmlns="" class="surname">von Appen</span></strong><div xmlns="" class="affiliation"><div class="address"><p><code class="email">&lt;<a href="mailto:marcus@sysfault.org">marcus@sysfault.org</a>&gt;</code></p></div></div></div></div></div><div><p class="copyright">Copyright © 2005-2007 Marcus von Appen</p></div><div><div class="legalnotice"><a name="legal"></a><p>
        Redistribution and use in source (XML DocBook) and 'compiled'
        forms (SGML, HTML, PDF, PostScript, RTF and so forth) with or
        without modification, are permitted provided that the following
        conditions are met:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Redistributions of source code (XML DocBook) must retain
              the above copyright notice, this list of conditions and
              the following disclaimer as the first lines of this file
              unmodified.
            </p></li><li><p>
              Redistributions in compiled form (transformed to other
              DTDs, converted to PDF, PostScript, RTF and other formats)
              must reproduce the above copyright notice, this list of
              conditions and the following disclaimer in the
              documentation and/or other materials provided with the
              distribution.
            </p></li></ol></div><p>
      </p><p>
        <span><strong class="command">Important:</strong></span> THIS DOCUMENTATION IS PROVIDED BY
        THE OCEMPGUI PROJECT "AS IS" AND ANY EXPRESS OR IMPLIED
        WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
        WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
        PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE OCEMPGUI
        PROJECT BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
        EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
        TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
        DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
        ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
        LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
        IN ANY WAY OUT OF THE USE OF THIS DOCUMENTATION, EVEN IF ADVISED
        OF THE POSSIBILITY OF SUCH DAMAGE.
      </p></div></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>A GUI library for Pygame</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#preface">Preface</a></span></dt><dt><span class="sect1"><a href="#introduction">Introduction</a></span></dt><dt><span class="sect1"><a href="#installation">Installing OcempGUI</a></span></dt><dd><dl><dt><span class="sect2"><a href="#dependencies">Dependencies</a></span></dt><dt><span class="sect2"><a href="#binary_packages">Binary packages</a></span></dt><dt><span class="sect2"><a href="#building_from_source">Building from source</a></span></dt><dt><span class="sect2"><a href="#using_cvs">Using CVS</a></span></dt></dl></dd><dt><span class="sect1"><a href="#usage">Integration in projects</a></span></dt><dd><dl><dt><span class="sect2"><a href="#modules">Modules</a></span></dt></dl></dd><dt><span class="sect1"><a href="#implementing_accessibility">Implementing accessibility</a></span></dt><dd><dl><dt><span class="sect2"><a href="#a11y_papi">Accessibility for third-party applications</a></span></dt><dd><dl><dt><span class="sect3"><a href="#making_python_objects_accessible">Making python objects accessible</a></span></dt></dl></dd><dt><span class="sect2"><a href="#a11y_iindexable">Keyboard navigation - IIndexable</a></span></dt><dt><span class="sect2"><a href="#a11y_magnifier">Unhide the screen - the Magnifier</a></span></dt></dl></dd><dt><span class="sect1"><a href="#twod_drawing">2D drawing</a></span></dt><dd><dl><dt><span class="sect2"><a href="#geometric_objects">Geometric objects</a></span></dt><dt><span class="sect2"><a href="#image_manipulation">Image manipulation</a></span></dt><dt><span class="sect2"><a href="#text_rendering">Text rendering</a></span></dt><dt><span class="sect2"><a href="#complex_objects">Complex objects</a></span></dt></dl></dd><dt><span class="sect1"><a href="#observer_systems">Tracking object states - the observer pattern</a></span></dt><dt><span class="sect1"><a href="#event_driven_systems">Building event driven systems</a></span></dt><dd><dl><dt><span class="sect2"><a href="#how_the_event_management_works">How the event management works</a></span></dt><dt><span class="sect2"><a href="#enabling_objects_to_receive_events">Enabling objects to receive events</a></span></dt><dt><span class="sect2"><a href="#setting_up_the_event_management">Setting up the event management</a></span></dt><dt><span class="sect2"><a href="#sending_events">Sending events</a></span></dt><dt><span class="sect2"><a href="#complete_event_management_example">Complete event management example</a></span></dt></dl></dd><dt><span class="sect1"><a href="#baseobject_types">Making objects event capable - the better way</a></span></dt><dd><dl><dt><span class="sect2"><a href="#how_the_baseobject_works">How the <code class="classname">BaseObject</code> works</a></span></dt><dt><span class="sect2"><a href="#creating_event_capable_objects">Creating event capable objects</a></span></dt><dt><span class="sect2"><a href="#events_on_demand">
        Events on demand: the <code class="classname">ActionListener</code>
      </a></span></dt></dl></dd><dt><span class="sect1"><a href="#gui_applications">Creating GUI applications</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gui_getting_started">Getting started</a></span></dt><dt><span class="sect2"><a href="#hello_world_with_ocempgui">Hello World with OcempGUI</a></span></dt><dt><span class="sect2"><a href="#gui_events_and_signals">Events and Signals</a></span></dt></dl></dd><dt><span class="sect1"><a href="#widget_overview">Widget overview</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gui_general_settings">General settings</a></span></dt></dl></dd><dt><span class="sect1"><a href="#widgets_basewidget">Common widget operations - the BaseWidget</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gui_positioning_and_sizing">Positioning and sizing</a></span></dt><dt><span class="sect2"><a href="#gui_keyboard_support">Keyboard support</a></span></dt><dt><span class="sect2"><a href="#gui_other_features">Other features</a></span></dt></dl></dd><dt><span class="sect1"><a href="#labels">Labels</a></span></dt><dd><dl><dt><span class="sect2"><a href="#widgets_label">Label</a></span></dt><dt><span class="sect2"><a href="#widgets_imagelabel">ImageLabel</a></span></dt></dl></dd><dt><span class="sect1"><a href="#buttons">Buttons</a></span></dt><dd><dl><dt><span class="sect2"><a href="#widgets_button">Button</a></span></dt><dt><span class="sect2"><a href="#widgets_imagebutton">ImageButton</a></span></dt><dt><span class="sect2"><a href="#widgets_togglebutton">ToggleButton</a></span></dt><dt><span class="sect2"><a href="#widgets_checkbutton">CheckButton</a></span></dt><dt><span class="sect2"><a href="#widgets_radiobutton">RadioButton</a></span></dt></dl></dd><dt><span class="sect1"><a href="#entry_boxes">Entry boxes</a></span></dt><dd><dl><dt><span class="sect2"><a href="#widgets_editable">Editable</a></span></dt><dt><span class="sect2"><a href="#widgets_entry">Entry</a></span></dt></dl></dd><dt><span class="sect1"><a href="#range_widgets">Range widgets</a></span></dt><dd><dl><dt><span class="sect2"><a href="#widgets_range">Range</a></span></dt><dt><span class="sect2"><a href="#widgets_scale">Scale</a></span></dt><dt><span class="sect2"><a href="#widgets_scrollbar">ScrollBar</a></span></dt></dl></dd><dt><span class="sect1"><a href="#container_widgets">Container widgets</a></span></dt><dd><dl><dt><span class="sect2"><a href="#widgets_bin">Bin</a></span></dt><dt><span class="sect2"><a href="#widgets_container">Container</a></span></dt><dt><span class="sect2"><a href="#widgets_box">Box</a></span></dt><dt><span class="sect2"><a href="#widgets_frame">Frames</a></span></dt><dt><span class="sect2"><a href="#widgets_table">Table</a></span></dt><dt><span class="sect2"><a href="#widgets_scrolledwindow">ScrolledWindow</a></span></dt><dt><span class="sect2"><a href="#widgets_scrolledlist">ScrolledList</a></span></dt><dt><span class="sect2"><a href="#widgets_filelist">FileList</a></span></dt></dl></dd><dt><span class="sect1"><a href="#windows_and_dialogs">Windows and Dialogs</a></span></dt><dd><dl><dt><span class="sect2"><a href="#widgets_window">Window</a></span></dt><dt><span class="sect2"><a href="#widgets_dialogwindow">DialogWindow</a></span></dt><dt><span class="sect2"><a href="#widgets_genericdialog">GenericDialog</a></span></dt><dt><span class="sect2"><a href="#widgets_filedialog">FileDialog</a></span></dt></dl></dd><dt><span class="sect1"><a href="#misc_widgets">Miscellaneous Widgets</a></span></dt><dd><dl><dt><span class="sect2"><a href="#widgets_imagemap">ImageMap</a></span></dt><dt><span class="sect2"><a href="#widgets_progressbar">ProgressBar</a></span></dt><dt><span class="sect2"><a href="#widgets_diagram">Diagram</a></span></dt><dt><span class="sect2"><a href="#widgets_graph2d">Graph2D</a></span></dt><dt><span class="sect2"><a href="#widgets_statusbar">StatusBar</a></span></dt><dt><span class="sect2"><a href="#widgets_tooltipwindow">TooltipWindow</a></span></dt></dl></dd><dt><span class="sect1"><a href="#widget_components">Widget components</a></span></dt><dd><dl><dt><span class="sect2"><a href="#components_listitem">ListItem</a></span></dt><dt><span class="sect2"><a href="#components_textlistitem">TextListItem</a></span></dt><dt><span class="sect2"><a href="#components_filelistitem">FileListItem</a></span></dt><dt><span class="sect2"><a href="#components_listitemcollection">ListItemCollection</a></span></dt></dl></dd><dt><span class="sect1"><a href="#custom_widgets">Creating custom widgets</a></span></dt><dd><dl><dt><span class="sect2"><a href="#designing_the_basis">Designing the basis</a></span></dt><dt><span class="sect2"><a href="#implementing_the_widget_basics">Implementing the widget basics</a></span></dt><dt><span class="sect2"><a href="#implementing_the_event_handlers">Implementing the event handlers</a></span></dt></dl></dd><dt><span class="sect1"><a href="#advanced_custom_widgets">Advanced custom widgets</a></span></dt><dt><span class="sect1"><a href="#gui_style">Changing the widget appearance</a></span></dt><dd><dl><dt><span class="sect2"><a href="#how_widgets_are_drawn">How widgets are drawn</a></span></dt><dt><span class="sect2"><a href="#customizing_the_theme_files">Customizing the theme files</a></span></dt><dt><span class="sect2"><a href="#style_owndrawing">Using own drawing routines</a></span></dt><dt><span class="sect2"><a href="#style_instance">Changing the appearance of single instances</a></span></dt></dl></dd><dt><span class="sect1"><a href="#layer_index_system">The layer and indexing system</a></span></dt><dd><dl><dt><span class="sect2"><a href="#layer_system">Layers</a></span></dt><dt><span class="sect2"><a href="#index_system">Index system</a></span></dt></dl></dd><dt><span class="appendix"><a href="#widget_hierarchy">A. Widget hierarchy</a></span></dt><dt><span class="appendix"><a href="#changes_01x_02x">B. Changes between 0.1.x and 0.2.x</a></span></dt><dd><dl><dt><span class="sect1"><a href="#changes_a11y">Changes in ocempgui.access</a></span></dt><dt><span class="sect1"><a href="#changes_events">Changes in ocempgui.events</a></span></dt><dt><span class="sect1"><a href="#changes_widgets">Changes in ocempgui.widgets</a></span></dt></dl></dd><dt><span class="index"><a href="#example_index">Example Index</a></span></dt><dt><span class="glossary"><a href="#glossary">Glossary</a></span></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="preface"></a>Preface</h2></div></div></div><p>
      This manual gives an overview about the OcempGUI library and
      explains how to install, configure and use it. It is meant to be
      an introduction into the OcempGUI library. This manual is
      <span class="emphasis"><em>not</em></span> an <acronym xmlns="http://www.w3.org/TR/xhtml1/transitional" title="Application       Programming Interface"><span xmlns="" class="acronym">API</span></acronym> reference. Instead the most
      classes, methods and functions of the OcempGUI library will be
      briefly described and examples about how to use them will be
      provided.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The descriptions, mentioned classes, methods and functions as
          well as the examples may get out of date and thus using any
          portion or information of this manual could crash your
          application or behave in another unexpected way. Although the
          author tries to keep the manual in synchronization with
          changes in the library, this can happen from time to time.
        </p><p>
          If you experience such a misbehaviour or are unsure about a
          description, refer to the extensive inline documentations of
          the library. You can accomplish this easily using the
          <span class="application">pydoc</span> application, for example.
        </p></div><p>
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="introduction"></a>Introduction</h2></div></div></div><p>
      The first versions of OcempGUI were created in 2004, when the
      author of the package started the Ocean Empire project. Ocean
      Empire is a reimplementation of an old <span class="trademark">MS-DOS</span>&#8482;
      game named <span class="emphasis"><em>Ocean Trader</em></span>.
    </p><p>
      The author decided to use the <a href="http://www.pygame.org" target="_top">pygame library</a>, which is a python wrapper of
      the <a href="http://www.libsdl.org" target="_top"><acronym xmlns="http://www.w3.org/TR/xhtml1/transitional" title="Simple directmedia layer"><span xmlns="" class="acronym">SDL</span></acronym> library</a>
      and noted later, that no matching <acronym xmlns="http://www.w3.org/TR/xhtml1/transitional" title="Graphical       User Interface"><span xmlns="" class="acronym">GUI</span></acronym> like extensions exist for it. The
      first task was to implement such a <acronym xmlns="http://www.w3.org/TR/xhtml1/transitional" title="Graphical       User Interface"><span xmlns="" class="acronym">GUI</span></acronym> extension to have a suitable
      graphical environment for the game. The result of this attempt is
      OcempGUI.
    </p><p>
      OcempGUIs focus lies on a <acronym xmlns="http://www.w3.org/TR/xhtml1/transitional" title="Graphical User       Interface"><span xmlns="" class="acronym">GUI</span></acronym> toolkit implementation based on the
      Sprite concept of pygame and is completely implemented in <a href="http://www.python.org" target="_top">Python</a>. It can be
      easily integrated in projects and reduces the development time by
      providing an own event mangement system and a reliable collection
      of user interface elements, of which all components are easy to
      use, extensible and support styling for the look and feel.
    </p><p>
      Besides <acronym xmlns="http://www.w3.org/TR/xhtml1/transitional" title="Graphical User Interface"><span xmlns="" class="acronym">GUI</span></acronym>
      functionality OcempGUI offers modules for other needs such as
      accessibility and a fast event management system. Both parts do not
      need rely on pygame and thus can be used in any Python project.
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installation"></a>Installing OcempGUI</h2></div></div></div><p>
      This section describes the process to configure and install OcempGUI.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="dependencies"></a>Dependencies</h3></div></div></div><p>
        The following applications and libraries are needed before
        OcempGUI can be installed:
      </p><div class="itemizedlist"><ul type="disc"><li><p>Python, version 2.3 or higher</p></li><li><p>pygame, version 1.7.1 or higher</p></li><li><p>ATK, version 1.12.1 or higher (optional)</p></li></ul></div><p>
        Please refer to the documentation of the respective package about
        how to install it.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="binary_packages"></a>Binary packages</h3></div></div></div><p>
        OcempGUI is not provided as binary package by the author. However
        it might be that someone else set up such a package for your wanted
        operating system or distribution. Those packages are usually not
        supported by the author, what means that installation problems or
        similar issues, which do not target the library directly, should be
        escalated to the respective supplier of that package.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="building_from_source"></a>Building from source</h3></div></div></div><p>
        The unpacked package contains two possibilities of building and
        installing it. Both ways are mostly identical but the one or
        other user might tend to prefer a specific way. The first is the
        python way of installing software, the second follows the
        tradition of the unix environment and uses a Makefile (which
        actually simply starts the python way). While being in the top
        source directory, it is possible to type either
      </p><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">make install</pre></div><p>for the traditional unix way or</p><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">python setup.py install</pre></div><p>for the python way.</p><p>
        The package might have some special options, which are described
        in the <span class="emphasis"><em>README</em></span> file shipped with it.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="using_cvs"></a>Using CVS</h3></div></div></div><p>
        Using the latest development sources is possible via <acronym xmlns="http://www.w3.org/TR/xhtml1/transitional" title="Concurrent versions system"><span xmlns="" class="acronym">CVS</span></acronym>. More
        information about how to use the SourceForge repository can be
        found on <a href="http://sourceforge.net/cvs/?group_id=100329" target="_top">SourceForge</a>.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          It should be noted that using the development sources can
          cause higher risks to the environment than the usual releases
          can do. Thus it is highly recommended to read the <a href="http://lists.sourceforge.net/lists/listinfo/ocemp-devel" target="_top">ocemp-devel</a> mailing list on which actual
          development ist discussed.
        </p></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="usage"></a>Integration in projects</h2></div></div></div><p>
      The various components of OcempGUI can be used alone without the
      need to use another module of the package. If only a small event
      management system is needed, only the
      <code class="classname">ocempgui.events</code> module can be imported. If
      an event management exists and widgets are needed, only the
      <code class="classname">ocempgui.widgets</code> module needs to be
      imported and so on.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="modules"></a>Modules</h3></div></div></div><p>
        The following OcempGUI modules are currently available:
      </p><div class="variablelist"><dl><dt><span class="term"><code class="classname">ocempgui.access</code></span></dt><dd><p>
              Provides various accessibility tools and interfaces for
              python, so that people with disabilities can easily use
              and access python applications. Generic interfaces for
              objects are available, which enable them to provide
              information for access-related technologies like braille
              keyboards or speech synthesizers. The
              <code class="classname">ocempgui.widgets</code> widget classes
              will integrate the interfaces of this module in future
              versions.
            </p></dd><dt><span class="term"><code class="classname">ocempgui.draw</code></span></dt><dd><p>
              Provides various drawing primitives, on which the
              <code class="classname">ocempgui.widgets</code> module
              relies. Usually the methods of this module provide
              simplified wrappers for the pygame drawing functions as
              well as some more complex drawing object types.
            </p></dd><dt><span class="term"><code class="classname">ocempgui.events</code></span></dt><dd><p>
              A small and fast event management system. It comes with an
              <code class="classname">EventManager</code> class, which takes
              care of distributing events to connected objects through
              signal queues. The event management system can deal with
              any type of data, which you want to use as event.
            </p></dd><dt><span class="term"><code class="classname">ocempgui.object</code></span></dt><dd><p>
              Abstract object definitions, that allow you to rapidly
              create own classes, which are event capable through signal
              <span class="emphasis"><em>slots</em></span>. Function or method callbacks
              can be connected to or disconnected from the signals, the
              object listens to. The <code class="classname">BaseObject</code>
              class is ready to be used with the
              <code class="classname">ocempgui.events</code> module.
            </p></dd><dt><span class="term"><code class="classname">ocempgui.widgets</code></span></dt><dd><p>
              Various <acronym xmlns="http://www.w3.org/TR/xhtml1/transitional" title="Graphical User Interface"><span xmlns="" class="acronym">
              GUI</span></acronym> elements for the creation and integration of
              interactive user interfaces. This module contains most
              commonly used user interface elements as well as abstract
              core definitions and interfaces to rapidly create own user
              interface elements. It also provides an own rendering
              class, which allows you to instantly create your pygame
              application without the need of taking care about an event
              and update loop.
            </p></dd></dl></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="implementing_accessibility"></a>Implementing accessibility</h2></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="a11y_papi"></a>Accessibility for third-party applications</h3></div></div></div><p>
        The <code class="classname">ocempgui.access</code> module provides a
        wrapper around the ATK accessibility library and several classes
        to ease the development of accessible applications.  To serve
        different ability ranges, objects can be aware, the ATK
        developers use an C interface system, that has to be implemented
        for each toolkit. OcempGUI implements those interfaces using the
        <code class="classname">AtkObject</code> only and flags, that will
        enable or disable certain interfaces within that instance.
      </p><p>
        To use accessibility features in your code, you have to import
        the module using: <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">import
        ocempgui.access</pre></div> If you plan to integrate ATK
        support for third-parts accessibility solutions in your code,
        you should import the <acronym xmlns="http://www.w3.org/TR/xhtml1/transitional" title="Python accessibility         programming interface"><span xmlns="" class="acronym">papi</span></acronym> module in your code so you
        can use the ATK wrapper system.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">import ocempgui.access.papi</pre></div>
      </p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="making_python_objects_accessible"></a>Making python objects accessible</h4></div></div></div><p>
          To make python objects accessible and usable by
          accessibility-aware applications and hardware they should
          implement <code class="classname">IAccessible</code> interface
          class. It provides a single method interface,
          <code class="methodname">get_accessible()</code>, which has to return
          an <code class="classname">AtkObject</code> object for the specific
          python instances.
        </p><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class A11yObject (IAccessible):
    def __init__ (self):
        IAccessible.__init__ (self)
        ...
    def get_accessible (self):
        obj = AtkObject (...)
        ...
        return obj
        </pre></div><p>
          Dependant on the capabilities of the python object and the
          information it provides, it has to set up several attributes
          and/or implement various interfaces of the
          <code class="classname">AtkObject</code>, which will be returned.
        </p><p><span class="emphasis"><em>TODO: provide more details</em></span></p><div class="example"><a name="ex_a11y_papi"></a><div class="example-contents"><p>
            You can find the following example as a python script
            under <code class="filename">examples/a11y_test.py</code>.
          </p><a class="indexterm" name="id2537214"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># papi test example.
import ocempgui.access.papi as papi
import atexit

# Main object - somewhat similar to the GailTopLevel object.
application = papi.AtkObject ()
application.name = "Application object"
application.description = "Application description"
application.role = papi.ATK_ROLE_APPLICATION
application.parent = None

def get_application ():
    global application
    return application

# Register the interfaces and initialize the atk-bridge.
papi.set_atk_root (get_application)
atexit.register (papi.shutdown)
papi.init ()

class SimpleA11y (papi.AtkObject):
    def __init__ (self):
        ifaces = papi.ATK_IFACE_COMPONENT | papi.ATK_IFACE_ACTION
        papi.AtkObject.__init__ (self, ifaces)

        # Implement some interfaces of ATK_IFACE_ACTION and
        # ATK_IFACE_COMPONENT.
        self.action_get_n_actions = self.__get_n_actions
        self.action_get_description = self.__get_description
        self.action_get_name = self.__get_name
        self.component_get_extents = self.__get_pos
        self.ref_state_set = self.__ref_state_set

    def __get_pos (self, coords):
        return 10, 10, 99, 99

    def __ref_state_set (self):
        return papi.AtkStateSet ()
    
    def __get_n_actions (self):
        return 1

    def __get_description (self, i):
        return "Example action."

    def __get_name (self, i):
        return "Example action name"
    
# Window dummy as child of the toplevel application object.
window = SimpleA11y ()

# Retrieve the state set, so we can set it active.
set = window.ref_state_set ()
set.add_state (papi.ATK_STATE_ACTIVE)

# Set some necessary information for accessibility applications.
window.role  = papi.ATK_ROLE_WINDOW
window.name = "Window A11y Object"
window.description = "Window Description"

# Link it with the application object
window.parent = application

# Signal testing - window:create will cause accessibility applications
# to note, that a new window was created for the application.
window.emit ("window:create")

print "Keeping myself alive. Press CTRL-C to exit the application."
while True:
    # Iterate the main processing loop of the ATK wrapper internals,
    # so that external applications can interact with the objects.
    papi.iterate ()
</pre></div></div><p class="title"><b>Example 1. ocempgui.access.papi test example</b></p></div><br class="example-break"></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="a11y_iindexable"></a>Keyboard navigation - IIndexable</h3></div></div></div><p>
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="a11y_magnifier"></a>Unhide the screen - the Magnifier</h3></div></div></div><p>
        The <code class="classname">Magnifier</code> class of the
        <code class="classname">ocempgui.access</code> module is a screen
        magnification tool for pygame screens. It allows users to zoom
        portions of the current pygame screen, which are determined by
        the mouse cursor position. It allows different magnification
        factors and a variable sizing of the area to zoom.
      </p><p>
        The <code class="classname">Magnifier</code> can be integrated easily
        into any pygame mainloop and adjusted with minimal effort.  To
        create a new instance of it, you simply can invoke its
        constructor with no arguments.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
magnifier = Magnifier ()
        </pre></div>
        Alternatively you can also pass the initial area size to magnify
        and the zoom factor.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
# Use a magnification area of 100, 100 and a factor of 3.
magnifier = Magnifier (100, 100, 3)
        </pre></div>
      </p><p>
        The zoom factor can be adjusted using the
        <span class="property">factor</span> attribute and
        <code class="methodname">set_factor()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
magnifier.factor = 5.2
magnifier.set_factor (0.5)
        </pre></div>
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Values smaller than 1 will zoom out the affected area.</p></div><p>
      </p><p>
        The size of the area around the mouse cursor, which should be
        magnified, can be adjusted using the <span class="property">size</span>
        attribute and <code class="methodname">set_size()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
magnifier.size = 50, 50
magnifier.set_size (40, 70)
        </pre></div>
        The resulting magnification area will be the size multiplicated
        with the set factor and be centered at the current mouse
        position.
      </p><p>
        Integrating the <code class="classname">Magnifier</code> in a pygame
        application is done by just adding one or two lines of code.
        The most important line is to notify it about the available
        pygame events.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
while True:
    events = pygame.event.get ()
    magnifier.notify (*events)
    ...
        </pre></div>
        This will enable it to react and refresh the magnified area and
        its position correctly upon the occurance of
        <code class="constant">pygame.MOUSEMOTION</code> events. Any other event
        will cause it to update its area only.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            The update is done only once per
            <code class="methodname">notify()</code> invocation. If multiple
            <code class="constant">pygame.MOUSEMOTION</code> events are in the
            passed list, only the last on will be used for repositioning.
          </p></div><p>
        If the pygame display is manipulated directly and thus needs to
        contain its original surface information (without the magnified
        area), the <code class="methodname">restore()</code> method should be
        invoked before the manipulation occurs.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
while True:
    events = pygame.event.get ()

    magnifier.restore ()

    # Display manipulation
    ....
    
    magnifier.notify (*events)
    ...
        </pre></div>
        This ensures that the original display contents are restored
        (the <code class="classname">Magnifier</code> will be suspended) before
        any manipulation takes place. Afterwards the
        <code class="classname">Magnifier</code> will be enabled again by
        passing the current events to it.
      </p><p>
        The <code class="classname">Magnifier</code> allows you to setup your
        own zoom function for best results when zooming parts of your
        application screen. The <span class="property">zoom_func</span> attribute
        and <code class="methodname">set_zoom_func()</code> method allow you to
        provide an own zoom function, which has to return the zoomed
        surface. It receives additional arguments, which are explained
        in detail in the inline documentation of the
        <code class="classname">Magnifier</code> class.
      </p><p>
        Implementing the <code class="classname">Magnifier</code>'s default zoom
        function could be achieved using the following code.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
def own_zoom_func (screen, mousepos, resultsize, size, factor):
    offset = mousepos[0] - size[0] / 2, mousepos[1] - size[1] / 2
    # Create zoomable surface.
    surface = pygame.Surface ((size[0], size[1]))
    surface.blit (screen, (0, 0), (offset[0], offset[1], size[0], size[1]))
    # Zoom and blit.
    return pygame.transform.scale (surface, (resultsize[0], resultsize[1]))

# Assign the new zoom function.
magnifier.zoom_func = own_zoom_func
        </pre></div>
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="twod_drawing"></a>2D drawing</h2></div></div></div><p>
      The <code class="classname">ocempgui.draw</code> module contains several
      wrapper functions around various pygame drawing functions, which
      are used by the <code class="classname">ocempgui.widgets</code> module. It
      is divided in several submodules, of which each one contains
      various related functions such as creating rectangle surfaces,
      drawing strings or loading images. Although not any function
      defined within the <code class="classname">ocempgui.draw</code> module
      simplifies the usage of the pygame drawing functions, they can
      reduce the amount of code to write and several of them enable you
      to simplify specific operations.
    </p><p>
      To use the drawing routines in your own code, you can simply
      import the module using:
    </p><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">import ocempgui.draw</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="geometric_objects"></a>Geometric objects</h3></div></div></div><p>
        The <code class="classname">ocempgui.draw.Draw</code> submodule contains
        several functions for geometric objects. Although most of them
        are only wrappers around the respective pygame functions, some
        of them can be used to create more complex geometric
        objects. The following list gives an overview about the
        functions defined within this submodule.
      </p><div class="variablelist"><dl><dt><span class="term">
            <code class="methodname">
              draw_line (surface, color, a, b, width=1)
            </code>
          </span></dt><dd><p>
              Draws a line with the given <em class="parameter"><code>width</code></em>
              from <em class="parameter"><code>a</code></em> to <em class="parameter"><code>b</code></em>
              on the passed <em class="parameter"><code>surface</code></em>. This
              function simply wraps the
              <code class="methodname">pygame.draw.line()</code> function.
            </p><div class="example"><a name="ex_Draw.draw_line"></a><div class="example-contents"><p>
                You can find the following example as a python script
                under <code class="filename">examples/draw_line.py</code>.
              </p><a class="indexterm" name="id2537686"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Draw.draw_line () usage example.
import pygame, pygame.locals
from ocempgui.draw import Draw

# Initialize the drawing window.
pygame.init ()
screen = pygame.display.set_mode ((200, 200))
screen.fill ((250, 250, 250))
pygame.display.set_caption ('Draw.draw_line ()')

# Draw horizontal lines in different colors and sizes.
for i in range (10):
    val = i * 10
    Draw.draw_line (screen, (0 + val, 50 + val, 40 + 2 * val),
                    (5, val), (195, val), i)

# Draw vertical lines in different colors and sizes.
for i in range (10):
    val = i * 8
    Draw.draw_line (screen, (0 + 2 * val, 30 + val, 35 + 2 * val),
                    (5 + i * 10, 100), (5 + i * 10, 195), i)

# Draw a cross.
Draw.draw_line (screen, (0, 0, 0), (120, 100), (195, 195), 3)
Draw.draw_line (screen, (0, 0, 0), (195, 100), (120, 195), 3)

# Show anything.
pygame.display.flip ()

# Wait for input.
while not pygame.event.get ([pygame.locals.QUIT]):
    pass
</pre></div></div><p class="title"><b>Example 2. Draw.draw_line ()</b></p></div><br class="example-break"></dd><dt><span class="term">
            <code class="methodname">
              draw_rect (width, height,color=None)
            </code>
          </span></dt><dd><p>
              Creates a rectangle surface with a size of
              <em class="parameter"><code>width</code></em> and
              <em class="parameter"><code>height</code></em>, which can be manipulated
              and blitted on other surfaces. This function simply wraps
              the <code class="methodname">pygame.Surface</code> function and
              calls <code class="methodname">Surface.fill()</code> on demand.
            </p><div class="example"><a name="ex_Draw.draw_rect"></a><div class="example-contents"><p>
                You can find the following example as a python script
                under <code class="filename">examples/draw_rect.py</code>.
              </p><a class="indexterm" name="id2586832"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Draw.draw_rect () usage example.
import random
import pygame, pygame.locals
from ocempgui.draw import Draw

# Initialize the drawing window.
pygame.init ()
screen = pygame.display.set_mode ((200, 200))
screen.fill ((250, 250, 250))
pygame.display.set_caption ('Draw.draw_rect ()')

# Draw rectangles with various colors.
rect = Draw.draw_rect (55, 40, (255, 0, 0))
screen.blit (rect, (5, 5))

rect = Draw.draw_rect (55, 40, (0, 255, 0))
screen.blit (rect, (65, 5))

rect = Draw.draw_rect (55, 40, (0, 0, 255))
screen.blit (rect, (125, 5))

# Draw encapsulated rectangles.
for i in range (30):
    val = i + 3
    rnd = (random.randint (0, 5), random.randint (0, 5), random.randint (0, 5))
    color = (rnd[0] * i + 100,  rnd[1] * i + 100, rnd[2] * i + 100)
    rect = Draw.draw_rect (100 - 2 * val, 100 - 2 * val, color)
    screen.blit (rect, (5 + val, 50 + val))

# Show anything.
pygame.display.flip ()

# Wait for input.
while not pygame.event.get ([pygame.locals.QUIT]):
    pass
</pre></div></div><p class="title"><b>Example 3. Draw.draw_rect ()</b></p></div><br class="example-break"></dd><dt><span class="term">
            <code class="methodname">
              draw_triangle (surface, color, a, b, c, width=0)
            </code>
          </span></dt><dd><p>
              Draws a triangle using the vertices
              <em class="parameter"><code>a</code></em>, <em class="parameter"><code>b</code></em> and
              <em class="parameter"><code>c</code></em> on the passed
              <em class="parameter"><code>surface</code></em>. This function simply wraps
              the <code class="methodname">pygame.draw.polygon()</code> function.
            </p><div class="example"><a name="ex_Draw.draw_triangle"></a><div class="example-contents"><p>
                You can find the following example as a python script
                under <code class="filename">examples/draw_triangle.py</code>.
              </p><a class="indexterm" name="id2586899"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Draw.draw_triangle () usage example.
import pygame, pygame.locals
from ocempgui.draw import Draw

# Initialize the drawing window.
pygame.init ()
screen = pygame.display.set_mode ((200, 200))
screen.fill ((250, 250, 250))
pygame.display.set_caption ('Draw.draw_triangle ()')

# Draw three triangles.
Draw.draw_triangle (screen, (255, 0, 0), (20, 5), (5, 30), (35, 30), 0)
Draw.draw_triangle (screen, (0, 255, 0), (25, 5), (40, 30), (55, 5), 0)
Draw.draw_triangle (screen, (0, 0, 255), (60, 5), (45, 30), (75, 30), 0)

# Draw a 'tunnel effect' of triangles.
for i in range (30):
     val = i + 3
     color = (val * 4, val * 7, val * 5)
     Draw.draw_triangle (screen, color, (5 + 2 * val, 50 + val),
                         (195 - 2 * val, 50 + val), (100, 195 - 2 * val), 1)

# Show anything.
pygame.display.flip ()

# Wait for input.
while not pygame.event.get ([pygame.locals.QUIT]):
    pass
</pre></div></div><p class="title"><b>Example 4. Draw.draw_triangle ()</b></p></div><br class="example-break"></dd></dl></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="image_manipulation"></a>Image manipulation</h3></div></div></div><p>
        The <code class="classname">ocempgui.draw.Image</code> submodule
        contains image related functions, such as loading or saving
        image data.
      </p><div class="variablelist"><dl><dt><span class="term">
            <code class="methodname">
              load_image (filename, alpha=False, colorkey=None)
            </code>
          </span></dt><dd><p>
              Loads an image from the specified
              <em class="parameter"><code>filename</code></em> and automatically converts
              it to the current display pixel format. If
              <em class="parameter"><code>alpha</code></em> is set to True, the method
              will try enable alpha transparency by using the
              <code class="methodname">pygame.Surface.convert_alpha()</code>
              method. If the <em class="parameter"><code>colorkey</code></em> argument is
              set to a color value, the method tries to add color based
              transparency using the
              <code class="methodname">pygame.Surface.set_colorkey()</code>
              method. This function is just a wrapper around
              <code class="methodname">pygame.image.load()</code> and 
              additionally calls
              <code class="methodname">Surface.convert()</code>.
            </p><div class="example"><a name="ex_Image"></a><div class="example-contents"><p>
                You can find the following example as a python script
                under <code class="filename">examples/load_image.py</code>.
              </p><a class="indexterm" name="id2586987"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Image.load_image () usage example.
import pygame, pygame.locals
from ocempgui.draw import Image

# Initialize the drawing window.
pygame.init ()
screen = pygame.display.set_mode ((120, 100))
screen.fill ((250, 250, 250))
pygame.display.set_caption ('Image.load_image ()')

# Load an image and blit it on the screen.
image = Image.load_image ("./image.png")
screen.blit (image, (10, 10))

# Show anything.
pygame.display.flip ()

# Wait for input.
while not pygame.event.get ([pygame.locals.QUIT]):
    pass
</pre></div></div><p class="title"><b>Example 5. Image.load_image ()</b></p></div><br class="example-break"></dd></dl></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="text_rendering"></a>Text rendering</h3></div></div></div><p>
        The <code class="classname">ocempgui.draw.String</code> submodule
        contains functions, which allow the creation and manipulation of
        fonts and string surfaces. It includes a simple font caching
        system, which provides a fast availability of fonts, which were
        created earlier. Besides this feature, the string surface
        related functions are mostly wrappers around the respective
        pygame functions.
      </p><div class="variablelist"><dl><dt><span class="term">
            <code class="methodname">create_font (fontfile, size, style)</code>
          </span></dt><dd><p>
              Creates and returns a <code class="classname">pygame.Font</code>
              object from the given <em class="parameter"><code>fontfile</code></em>
              using the passed <em class="parameter"><code>size</code></em> and
              <em class="parameter"><code>style</code></em>. The font will be cached
              internally, so that a second invocation using the same
              <em class="parameter"><code>fontfile</code></em> and
              <em class="parameter"><code>size</code></em> will return the cached font.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                If you manipulate the returned
                <code class="classname">pygame.Font</code> directly, the
                manipulation will be applied to the cached font, too. To
                circumvent this behaviour, create a copy of the return
                value using the
                <code class="methodname">pygame.Font.copy()</code> method and
                manipulate the copy.
              </p></div><div class="example"><a name="ex_String.create_font"></a><div class="example-contents"><p>
                You can find the following example as a python script
                under <code class="filename">examples/create_font.py</code>.
              </p><a class="indexterm" name="id2587086"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># String.create_font () usage example.
import pygame
from ocempgui.draw import String

def check (font, name):
    bold = "not bold"
    if font.get_bold ():
        bold = "bold"
    print "%s at %s is %s" % (name, font, bold)

# Initialize the pygame engine.
pygame.init ()

# Create a font from the ttf located in the current directory.
font = String.create_font ("tuffy.ttf", 14)
check (font, "font")

# Now create a second font and manipulate it.
# NOTE: Due to the caching we are using the same font object as above!
font_mod = String.create_font ("tuffy.ttf", 14)
font_mod.set_bold (True)

# Output the bold state of both fonts.
check (font, "font")
check (font_mod, "font_mod")
</pre></div></div><p class="title"><b>Example 6. String.create_font ()</b></p></div><br class="example-break"></dd><dt><a name="create_system_font"></a><span class="term">
            <code class="methodname">create_system_font (fontname, size, style)</code>
          </span></dt><dd><p>
              Creates and returns a <code class="classname">pygame.Font</code>
              object from the given system font with the specified
              <em class="parameter"><code>fontname</code></em> and the given
              <em class="parameter"><code>size</code></em> and
              <em class="parameter"><code>style</code></em>. Like the
              <code class="methodname">create_font()</code> function, the font
              will be cached internally, so that a second invocation
              with the same parameters will return the cached font.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                If you manipulate the returned
                <code class="classname">pygame.Font</code> directly, the
                manipulation will be applied to the cached font, too. To
                circumvent this behaviour, create a copy of the return
                value using the
                <code class="methodname">pygame.Font.copy()</code> method and
                manipulate the copy.
              </p><p>
                The <code class="methodname">pygame.SysFont</code>
                documentation also notes this:
                </p><div class="blockquote"><table border="0" width="100%" cellspacing="0" cellpadding="0" class="blockquote" summary="Block quote"><tr><td width="10%" valign="top"> </td><td width="80%" valign="top"><p>
                    This will always return a valid Font object, and
                    will fallback on the builtin pygame font if the
                    given font is not found.
                  </p></td><td width="10%" valign="top"> </td></tr><tr><td width="10%" valign="top"> </td><td colspan="2" align="right" valign="top">--<span class="attribution">Pygame documentation</span></td></tr></table></div><p>
              </p></div><div class="example"><a name="ex_String.create_system_font"></a><div class="example-contents"><p>
                You can find the following example as a python script
                under <code class="filename">examples/create_system_font.py</code>.
              </p><a class="indexterm" name="id2587185"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># String.create_system_font () usage example.
import pygame
from ocempgui.draw import String

# Initialize the pygame engine.
pygame.init ()

# Create some fonts.
fonts = {}
names = ( "Arial", "Helvetica", "Sans", "Serif", "Times" )
for name in names:
    fonts[name] = String.create_system_font (name, 14)

# Output the fonts as well as their object address.
for name in fonts:
    print "Loaded: %s at %s" % (name, fonts[name])
</pre></div></div><p class="title"><b>Example 7. String.create_system_font ()</b></p></div><br class="example-break"></dd><dt><a name="draw_string"></a><span class="term">
            <code class="methodname">
              draw_string (text, font, size, antialias, color, style)
            </code>
          </span></dt><dd><p>
              Creates a transparent surface displaying the
              <em class="parameter"><code>text</code></em> in the given
              <em class="parameter"><code>color</code></em> with the specified
              <em class="parameter"><code>style</code></em> applied. If
              <em class="parameter"><code>antialias</code></em> evaluates to True, the
              text will be rendered using antialiasing (if possible).
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                The function first tries to resolve
                <em class="parameter"><code>font</code></em> as font file. If that fails,
                it looks for a system font name, which matches the
                <em class="parameter"><code>font</code></em> name and returns a Font
                object based on those information (or the fallback font
                of pygame, see also <a href="#create_system_font">
            <code class="methodname">create_system_font (fontname, size, style)</code>
          </a>.
              </p></div><div class="example"><a name="ex_String.draw_string"></a><div class="example-contents"><p>
                You can find the following example as a python script
                under <code class="filename">examples/draw_string.py</code>.
              </p><a class="indexterm" name="id2587268"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># String.draw_string () usage example.
import pygame, pygame.locals
from ocempgui.draw import String

# Initialize the drawing window.
pygame.init ()
screen = pygame.display.set_mode ((400, 100))
screen.fill ((250, 250, 250))
pygame.display.set_caption ('String.draw_string ()')

# Create a text using the ttf located in the current directory.
text = String.draw_string ("This is tuffy.ttf", "tuffy.ttf", 16, 1, (0, 0, 0))
screen.blit (text, (5, 5))

# Create a text using the 'Times' system font
text = String.draw_string ("This is Times", "Times", 16, 1, (255, 0, 0))
screen.blit (text, (5, 35))

# Create a text using the fallback python font by specifying a wrong
# font name (hopefully ;-).
text = String.draw_string ("This is the fallback", "invalid_font_name_here",
                           16, 1, (0, 0, 255))
screen.blit (text, (5, 60))

# Now the same again without antialiasing.
text = String.draw_string ("This is tuffy.ttf (no aa)", "tuffy.ttf",
                           16, 0, (0, 0, 0))
screen.blit (text, (200, 5))

text = String.draw_string ("This is Times (no aa)", "Times",
                           16, 0, (255, 0, 0))
screen.blit (text, (200, 35))

text = String.draw_string ("This is the fallback (no aa)",
                           "invalid_font_name_here", 16, 1, (0, 0, 255))
screen.blit (text, (200, 60))

# Show anything.
pygame.display.flip ()

# Wait for input.
while not pygame.event.get ([pygame.locals.QUIT]):
    pass
</pre></div></div><p class="title"><b>Example 8. String.draw_string ()</b></p></div><br class="example-break"></dd><dt><span class="term">
            <code class="methodname">
              draw_string_with_bg (text, font, size, antialias, color,
              bgcolor, style)
            </code>
          </span></dt><dd><p>
              This function is identical to the <a href="#draw_string">
            <code class="methodname">
              draw_string (text, font, size, antialias, color, style)
            </code>
          </a> function, except that it provides
              a background color via the <em class="parameter"><code>bgcolor</code></em>
              parameter.
            </p><div class="example"><a name="ex_String.draw_string_with_bg"></a><div class="example-contents"><p>
                You can find the following example as a python script
                under <code class="filename">examples/draw_string_with_bg.py</code>.
              </p><a class="indexterm" name="id2587392"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># String.draw_string_with_bg () usage example.
import pygame, pygame.locals
from ocempgui.draw import String

# Initialize the drawing window.
pygame.init ()
screen = pygame.display.set_mode ((100, 100))
screen.fill ((250, 250, 250))
pygame.display.set_caption ('String.draw_string_with_bg ()')

# Create texts using the 'Times' system font and different background
# colors.
text = String.draw_string_with_bg ("This is Times", "Times", 16, 1, (0, 0, 0),
                                   (200, 200, 200))
screen.blit (text, (5, 5))

text = String.draw_string_with_bg ("This is Times", "Times", 16, 1, (0, 0, 0),
                                   (0, 200, 0))
screen.blit (text, (5, 60))

# Show anything.
pygame.display.flip ()

# Wait for input.
while not pygame.event.get ([pygame.locals.QUIT]):
    pass
</pre></div></div><p class="title"><b>Example 9. String.draw_string_with_bg ()</b></p></div><br class="example-break"></dd></dl></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="complex_objects"></a>Complex objects</h3></div></div></div><p>
        The <code class="classname">ocempgui.draw.Complex</code> module contains
        more advanced drawing objects, that implement interesting
        features for 2D graphics.
      </p><p>
        The <code class="classname">FaderSurface</code> class enhances the
        <code class="classname">pygame.Surface</code> class by some additional
        attributes and methods to support fade-in/fade-out operations.
        You can adjust them to fit its behaviour to your needs, such as
        setting the current transparency value using the
        <span class="property">alpha</span> attribute
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
surface.alpha = 0 # Make it completely transparent
        </pre></div>
        or adjusting the step range for in- or decrements upon each
        update.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
surface.step = 5
        </pre></div>
      </p><div class="example"><a name="ex_complex_fadersurface"></a><div class="example-contents"><p>
          You can find the following example as a python script
          under <code class="filename">examples/fader_surface.py</code>.
        </p><a class="indexterm" name="id2587531"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Complex.FaderSurface usage example.
import pygame, pygame.locals
from ocempgui.draw import Complex, Image

# Initialize the drawing window.
pygame.init ()
screen = pygame.display.set_mode ((120, 100))
screen.fill ((180, 180, 180))
pygame.display.set_caption ('Complex.FaderSurface')

# Create a surface we can use to display.
image = Image.load_image ("./image.png")
r = image.get_rect ()

# Create a new FaderSurface with the same dimensions and an initial
# transparency of 1.
surface = Complex.FaderSurface (r.width, r.height, 1)

# Blit the original on the FaderSurface.
surface.blit (image, (0, 0))

# The default step value is -1, but we want to fade the image in.
surface.step = 1

# Loop until the FaderSurface reached the maximum or minimum alpha
# transparency value.
while surface.update ():

    # Clean up and blit the surface..
    screen.fill ((180, 180, 180))
    screen.blit (surface, (10, 10))
    pygame.display.flip ()

    # Check the bounds. We have to check the maximum values - 1, because
    # 255 and 0 cause the surface to return False and we would exit the
    # loop.
    if surface.alpha == 254 or surface.alpha == 1:
        surface.step = -surface.step

    pygame.time.delay (50 / 4)
    
    # Wait for input.
    if pygame.event.get ([pygame.locals.QUIT]):
        break
</pre></div></div><p class="title"><b>Example 10. FaderSurface example</b></p></div><br class="example-break"></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="observer_systems"></a>Tracking object states - the observer pattern</h2></div></div></div><p>
      OcempGUI provides a minimalistic observer pattern implementation
      in the <code class="classname">ocempgui.events</code> module, which
      enables objects to track changes ('observe') from others. Two
      classes, the <code class="classname">Subject</code> and
      <code class="classname">IObserver</code>, are used for this.
    </p><p>
      An object, which should expose changes is usually called a subject
      to which other objects, the observers, subscribe for notification
      about those changes. To create a subject, the class just needs to
      inherit from the <code class="classname">Subject</code> class, which
      provides a minimum set of methods and attributes to become
      observable.
      <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class MyObject (Subject):
    def __init__ (self):
        Subject.__init__ (self, "UniqueSubjectName")
    ...
      </pre></div>
      The constructor of the <code class="classname">Subject</code> receives a
      string argument, the name, which identifies the object instance
      for possible observers.
    </p><p>
      The object now features all attributes and methods to register
      observers and to notify them about state changes. State changes
      however have to be emitted manually, so that the object should
      invoke its <code class="methodname">notify()</code> method, whenever this
      is necessary.
      <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class MyObject (Subject):
    def __init__ (self):
        Subject.__init__ (self, "UniqueSubjectName")
        self._value = None
    
    def set_value (self, value):
        # Preserve old value.
        oldval = self._value

        # Set new value.
        self._value = value

        # Notify observers
        self.notify ('value', old, value)
    ...
      </pre></div>
      Whenever <code class="methodname">set_value()</code> is invoked now, any
      registered observer will be notified about
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The object, that changed its state
            (<span class="emphasis"><em>UniqueSubjectName</em></span>).
          </p></li><li><p>
            The name of the object part that changed (here the attribute
            <span class="emphasis"><em>value</em></span>).
          </p></li><li><p>The old and new value of the object part that changed.</p></li></ul></div><p>
    </p><p>
      An object that shall act as an observer should inherit from the
      <code class="classname">IObserver</code> class and implement its
      <code class="methodname">update()</code> method, which will receive the
      state change notification from the <code class="classname">Subject</code>.
      The signature of the method looks like the following:
      <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class ObserverObject (IObserver):
    ...
    def update (self, subject, prop, oldval, newval):
        ...
      </pre></div>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Your classes do not need to explicitly inherit from
          <code class="classname">IObserver</code>, but have to implement the
          <code class="methodname">update()</code> method with its correct
          signature.
        </p></div><p>
      The <em class="parameter"><code>subject</code></em> argument is the unique name of
      the <code class="classname">Subject</code> that just
      changed. <em class="parameter"><code>prop</code></em> identifies the detail that
      changed and <em class="parameter"><code>oldval</code></em> and
      <em class="parameter"><code>newval</code></em> contain the old and new value of the
      detail.
    </p><div class="example"><a name="ex_observer"></a><div class="example-contents"><p>
        The following example is a complete example based on the
        excerpts from above. You can find it as python script under
        <code class="filename">examples/observer.py</code>
      </p><a class="indexterm" name="id2536701"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Subject/Observer usage example.
from ocempgui.events import Subject, IObserver

# The subject that should notify observers about state changes.
class MyObject (Subject):
    def __init__ (self):
        Subject.__init__ (self, "MyObject")
        self._x = "Simple Attribute"
        self._y = 1234567890
        self._z = None

    def get_x (self):
        return self._x
    
    def set_x (self, value):
        # Preserve old value.
        old = self._x
        self._x = value
        # Notify about change.
        self.notify ("x", old, value)

    def get_y (self):
        return self._y

    def set_y (self, value):
        # Preserve old value.
        old = self._y
        self._y = value
        # Notify about change.
        self.notify ("y", old, value)

    def get_z (self):
        return self._z

    def set_z (self, value):
        # Preserve old value.
        old = self._z
        self._z = value
        # Notify about change.
        self.notify ("z", old, value)

    x = property (get_x, set_x)
    y = property (get_y, set_y)
    z = property (get_z, set_z)

class OwnObserver (IObserver):
    def __init__ (self):
        pass

    def update (self, subject, prop, oldval, newval):
        if subject == "MyObject": # A MyObject instance, check details.
            if prop == "x":
                # Its x value changed.
                print "The x value of a MyObject instance changed from " \
                      "%s to %s" % (str (oldval), str (newval))
            elif prop == "y":
                # Its y value changed.
                print "The y value of a MyObject instance changed from " \
                      "%s to %s" % (str (oldval), str (newval))
            else:
                # Another value changed.
                print "The %s value of a MyObject instance changed from" \
                      "%s to %s" % (str (prop), str (oldval), str (newval))

class AnotherObserver (IObserver):
    def __init__ (self):
        pass

    def update (self, subject, prop, oldval, newval):
        print "Detail %s of %s changed from %s to %s" % (str (prop), subject,
                                                         str (oldval),
                                                         str (newval))

subject = MyObject ()

# Add tow observers doing
observer1 = OwnObserver ()
observer2 = AnotherObserver ()

subject.add (observer1, observer2)

subject.x = "FooBarBaz"
subject.y = subject.x * 3
subject.z = 100
</pre></div></div><p class="title"><b>Example 11. Observer example</b></p></div><br class="example-break"></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="event_driven_systems"></a>Building event driven systems</h2></div></div></div><p>
      The <code class="classname">ocempgui.events</code> module provides a small
      and fast event management system. It is currently separated into
      three different classes, of which the most important is the
      <code class="classname">EventManager</code> class.  Besides the
      <code class="classname">EventManager</code>, an
      <code class="classname">Event</code> class for sending event data and an
      <code class="classname">EventCallback</code> class for connecting
      functions or methods to signals are available.
    </p><p>
      To create an own event driven application system or to enhance an
      existing application, only a few guidelines have to be respected
      and only a minimal set of changes be made on existing code. You
      will need to
    </p><div class="itemizedlist"><ul type="disc"><li><p>enable objects to receive events,</p></li><li><p>set up the event management system.</p></li></ul></div><p>
     To understand, what you are doing and to know the pitfalls of the
     event management system, you first have to know, how it works. The
     next subsection will give you a short explanation of it.
   </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="how_the_event_management_works"></a>How the event management works</h3></div></div></div><p>
        The event management system of OcempGUI uses a simple approach
        using signal <span class="emphasis"><em>slots</em></span>. This means, that
        objects will register themselves only for specific event types,
        of which they want to be notified. Any other event will not be
        sent to them.This reduces the overhead of events the objects
        have to deal with (either by dropping or processing them) and
        improves the performance and scalability of the event management
        system (especially with many objects).
      </p><div class="figure"><a name="figure_event_management"></a><div class="figure-contents"><div class="mediaobject"><img src="img/event_management.png" alt="Event management diagram."></div></div><p class="title"><b>Figure 1. Event management</b></p></div><br class="figure-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="enabling_objects_to_receive_events"></a>Enabling objects to receive events</h3></div></div></div><p>
        An object, which shall be event aware, should inherit from the
        <code class="classname">INotifyable</code> class and implement its
        <code class="methodname">notify()</code> method, which will receive
        events distributed by the <code class="classname">EventManager</code>.
        The signature of the method looks like the following:
      </p><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class OwnObject (INotifyable):
    ...
    def notify (self, event):
        ...
      </pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
	  Your classes do not need to explicitly inherit from
	  <code class="classname">INotifyable</code>, but have to implement the
	  <code class="methodname">notify()</code> method with its correct
	  signature.
	</p></div><p>
        The <em class="parameter"><code>event</code></em> argument of the method will be
        an <code class="classname">Event</code> object, which can be used to
        perform certain actions within the method body then:
      </p><div class="example"><a name="ex_event_object_notify"></a><div class="example-contents"><a class="indexterm" name="id2588133"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class OwnObject (INotifyable):
    ...
    def move (self, coords):
       # Moves the object to the desired coordinates (x, y).
       self.x = coords[0]
       self.y = coords[1]
       print "Moved to %d,%d" % (self.x, self.y)

    def notify (self, event):
        # Check the event signal and run a certain action with its data.
        if event.signal == "clicked":
           print "Something was clicked!"
        elif event.signal == "move":
           # Assuming that the event.data contains a coordinate tuple.
           self.move (event.data)
        </pre></div></div><p class="title"><b>Example 12. Enabling an object to receive events</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="setting_up_the_event_management"></a>Setting up the event management</h3></div></div></div><p>
        Setting up the main event management is nearly as easy as
        enhancing the objects. To add objects to the
        <code class="classname">EventManager</code>, the
        <code class="methodname">add_object()</code> method has to be
        invoked. It receives the object to add and a list of signal ids
        as arguments. The signal ids will cause the object to be
        registered in specific queues, to which events with matching
        signal ids then will be sent.
      </p><p>
        Objects can be removed from the
        <code class="classname">EventManager</code> using the
        <code class="methodname">remove_object()</code> method. The method
        allows you to either remove the object from specific
        <span class="emphasis"><em>slots</em></span> or from all
        <span class="emphasis"><em>slots</em></span>, it is registered for, at once.
      </p><div class="example"><a name="ex_event_add_object"></a><div class="example-contents"><p>
          We use the <code class="classname">OwnObject</code> class of the
          previous example and will (un)register it for the signals
          <span class="emphasis"><em>"move"</em></span> and <span class="emphasis"><em>"clicked"</em></span>.
        </p><a class="indexterm" name="id2588205"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
# Create an EventManager and OwnObject instance.
manager = EventManager ()
myobj = OwnObject ()

# Add the object to the EventManager.
manager.add_object (myobj, "move", "clicked")

# Remove the object from the 'clicked' slot.
manager.remove_object (myobj, "clicked")

# Remove the object from _all_ slots it still listens on.
manager.remove_object (myobj)
        </pre></div></div><p class="title"><b>Example 13. 
          Adding and removing an object to the
          <code class="classname">EventManager</code>
        </b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="sending_events"></a>Sending events</h3></div></div></div><p>
        Now let us proceed to the most important: sending events. To
        send events to the objects of the
        <code class="classname">EventManager</code>, you can use the
        <code class="methodname">emit()</code> method. It receives two
        arguments, which will become the signal and data of a
        <code class="classname">Event</code> object. The
        <code class="classname">Event</code> will be created by the
        <code class="classname">EventManager</code> and then sent to the
        matching objects. So all you have to do is to pass the
        <code class="methodname">emit()</code> method the correct information
        for the event.
      </p><p>
        Both arguments the <code class="methodname">emit()</code> receives,
        have no limitations of type, length or whatsoever. It is up to
        you to to send correct information through the event management
        system and to check for correct information on the object side.
      </p><div class="example"><a name="ex_event_emit"></a><div class="example-contents"><a class="indexterm" name="id2588270"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
# Send events to the registered objects via the emit() method.
manager.emit ("clicked", None)
manager.emit ("move", (10, 10))
        </pre></div></div><p class="title"><b>Example 14. 
          Sending events through the <code class="classname">EventManager</code>
        </b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="complete_event_management_example"></a>Complete event management example</h3></div></div></div><div class="example"><a name="ex_event_complete"></a><div class="example-contents"><p>
          The following example is a complete example based on the
          excerpts from above. You can find it as python script under
          <code class="filename">examples/eventmanager.py</code>
        </p><a class="indexterm" name="id2588309"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># EventManager usage example.
from ocempgui.events import EventManager, INotifyable

# Create a new event capable object. This can be acquired by adding a
# 'notify ()' method to the object, which receives a single argument.
class OwnObject (INotifyable):
    def __init__ (self):
        self.x = 0
        self.y = 0
    
    def move (self, coords):
       # Moves the object to the desired coordinates (x, y).
       self.x = coords[0]
       self.y = coords[1]
       print "Moved to %d,%d" % (self.x, self.y)

    def notify (self, event):
        # Check the event signal and run a certain action with its data.
        if event.signal == "clicked":
           print "Something was clicked!"
        elif event.signal == "move":
           # Assuming that the event.data contains a coordinate tuple.
           self.move (event.data)

# Create an EventManager and OwnObject instance.
manager = EventManager ()
myobj = OwnObject ()

# Add the object to the EventManager.
manager.add_object (myobj, "move", "clicked")

# Send events to the registered objects via the emit() method.
manager.emit ("clicked", None)
manager.emit ("move", (10, 10))

# Remove the object from the 'clicked' slot.
manager.remove_object (myobj, "clicked")

# Send the 'clicked' event once more.
manager.emit ("clicked", None)

# Remove the object from _all_ slots it still listens on.
manager.remove_object (myobj)

# Send the 'move' event again.
manager.emit ("move", (40, 40))
</pre></div></div><p class="title"><b>Example 15. Complete event management example</b></p></div><br class="example-break"></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="baseobject_types"></a>Making objects event capable - the better way</h2></div></div></div><p>
      The previous section gave you a rough overview about how to use
      the OcempGUI event system with your own objects. As you might
      have seen, using only the <code class="methodname">notify()</code>
      method and lengthy if-else conditions might not always be the
      best idea. Also, overriding the
      <code class="methodname">notify()</code> method whenever the
      functionality of an object should change is not the best,
      especially, if it should be runtime dependant.
    </p><p>
      You might consider using the <code class="classname">BaseObject</code>
      from the <code class="classname">ocempgui.object</code> module
      instead. It offers ready to use signal slots and methods to bind
      callbacks at runtime, improving its and your flexibility without
      big effort.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="how_the_baseobject_works"></a>How the <code class="classname">BaseObject</code> works</h3></div></div></div><p>
        The <code class="classname">BaseObject</code> is event driven, which
        means, that it acts and reacts upon events it receives and
        that it can raise events. Hereby you have to distinguish
        between <span class="emphasis"><em>Signals</em></span> and
        <span class="emphasis"><em>Events</em></span>. <span class="emphasis"><em>Signals</em></span> are
        certain identifiers, a <code class="classname">BaseObject</code> can
        listen to, while <span class="emphasis"><em>Events</em></span> are a combination
        of a <span class="emphasis"><em>Signal</em></span> and additional data.
      </p><p>
        What does that mean in practice? As you already know from
        <a href="#event_driven_systems" title="Building event driven systems">the section called &#8220;Building event driven systems&#8221;</a>, objects will register
        themselves at an event manager with a specific signal, they
        listen to. Events in turn carry a specific signal id and
        additional data. A <code class="classname">BaseObject</code> will
        register itself at an event manager with its signals. If
        events are passed to the event manager, it will distribute
        them to the object, if needed. The object in turn will react
        according to its programming instructions.
      </p><p>
        To allow your object to react according to the application
        needs on certain events easily, the
        <code class="classname">BaseObject</code> supports the connection of
        <span class="emphasis"><em>callbacks</em></span> to signals you can define for
        it. A <span class="emphasis"><em>callback</em></span> is a method or function,
        which should be invoked, when the object receives a certain
        event.
      </p><div class="figure"><a name="figure_signal_handling_baseobject"></a><div class="figure-contents"><div class="mediaobject"><img src="img/signal_baseobject.png" alt="Signal handling of the BaseObject class."></div></div><p class="title"><b>Figure 2. 
          Signal handling of the <code class="classname">BaseObject</code> class
        </b></p></div><br class="figure-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="creating_event_capable_objects"></a>Creating event capable objects</h3></div></div></div><p>
        The first thing you should do is to let your existing object or
        the newly created one inherit from the
        <code class="classname">BaseObject</code> class. Afterwards you can
        unleash its full power by adding just a minimal set of code.
      </p><div class="example"><a name="ex_object_inherit"></a><div class="example-contents"><a class="indexterm" name="id2588605"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
from ocempgui.object import BaseObject

class OwnObject (BaseObject):
    def __init__ (self):
        BaseObject.__init__ (self)
    
    ...
        </pre></div></div><p class="title"><b>Example 16. 
          Inheriting from the <code class="classname">BaseObject</code> class
        </b></p></div><br class="example-break"><p>
        That is not all of course. You also have to set up the signals
        the object has to listen to and create callbacks. Let us
        create a small ping-pong example, where two objects react upon
        a 'ping' and 'pong' signal.
      </p><p>
        The <code class="classname">BaseObject</code> has a
        <span class="property">_signals</span> attribute, which basically is a
        dictionary with the signal ids it listens to as keys and list
        for the callbacks as values. To allow your object to listen to
        the 'ping' or 'pong' signal, you have to add those to this
        dictionary.
      </p><div class="example"><a name="ex_object_signals"></a><div class="example-contents"><a class="indexterm" name="id2588643"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
from ocempgui.object import BaseObject

class OwnObject (BaseObject):
    def __init__ (self):
        BaseObject.__init__ (self)
        self._signals["ping"] = []
        self._signals["pong"] = []
    ...
        </pre></div></div><p class="title"><b>Example 17. Adding a signal to the object</b></p></div><br class="example-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The list as value is mandatory to allow callbacks to be
          connected to those signals. If you are going to supply other
          types as value, keep in mind, that it is unlikely that
          connecting or disconnecting callbacks will work as supposed.
        </p></div><p>
        Now we just need to make the <code class="methodname">notify()</code>
        aware of those signal types and let it invoke the appropriate
        callbacks, which will be connected to those signals.
      </p><div class="example"><a name="ex_object_notify"></a><div class="example-contents"><a class="indexterm" name="id2588677"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class OwnObject (BaseObject):
    ...
    def notify (self, event):
        if event.signal == "ping":
            self.run_signal_handlers ("ping")
        elif event.signal == "pong":
            self.run_signal_handlers ("pong")
        </pre></div></div><p class="title"><b>Example 18. Setting up the notify() method</b></p></div><br class="example-break"><p>
        As you see, the <code class="methodname">run_signal_handlers()</code>
        takes care of invoking the connected callbacks. Now you have
        anything set up to allow the object to listen to specific
        events, to connect callbacks to it and let it invoke them,
        when it receives the specific signal.
      </p><p>
        To connect methods or functions as callbacks to a specific
        signal, the <code class="methodname">connect_signal()</code> method of
        the <code class="classname">BaseObject</code> can be used. It allows
        additional data to be passed to the callback by specifiying the
        data right after the signal and callback. If the callbacks is
        not needed anymore, it can be disconnected using the
        <code class="methodname">disconnect_signal() </code> method.
      </p><div class="example"><a name="ex_object_callbacks"></a><div class="example-contents"><a class="indexterm" name="id2588716"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class OwnObject (BaseObject):
    ...

my_obj = OwnObject ()
ev_callback1 = my_obj.connect_signal ("ping", ping_callback, data)
ev_callback2 = my_obj.connect_signal ("pong", pong_callback, data1, data2)
...

my_obj.disconnect_signal (ev_callback1)
my_obj.disconnect_signal (ev_callback2)
        </pre></div></div><p class="title"><b>Example 19. Connecting and disconnecting callbacks.</b></p></div><br class="example-break"><p>
        Now it just needs to be connected to an event manager. In
        contrast to the earlier section, you do not need to register
        any signal of your <code class="classname">BaseObject</code> inheritor
        manually. When you connect it to an event manager, it will
        automatically do that for you.
      </p><div class="example"><a name="ex_object_eventmanager"></a><div class="example-contents"><a class="indexterm" name="id2588881"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class OwnObject (BaseObject):
    ...


manager = EventManager
my_obj = OwnObject ()

# Any signal of the object will be registered automatically.
my_obj.manager = manager
        </pre></div></div><p class="title"><b>Example 20. Connecting the object to an event manager.</b></p></div><br class="example-break"><p>
        The last important thing to know about the
        <code class="classname">BaseObject</code> is its ability to emit
        events. If the object is connected to an event manager, you
        can let it send events through the manager with the object its
        <code class="methodname">emit()</code> method. The syntax is the same
        as if you would emit events on the
        <code class="classname">EventManager</code> directly.
      </p><p>
        Now let us look at the example we just went through (the
        following one is slightly modified only). You can find the
        example as python script under
        <code class="filename">examples/baseobject.py</code>
      </p><div class="example"><a name="ex_object_baseobject"></a><div class="example-contents"><a class="indexterm" name="id2588922"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># BaseObject usage example.
from ocempgui.object import BaseObject
from ocempgui.events import EventManager

# Callbacks, which should be invoked for the object.
def ping_callback (obj, additional_data):
    print "The object is: %s" % obj.name
    print "Passed data is: %s" % additional_data

def pong_callback ():
    print "Another callback with no arguments."

# Object implementation, which can listen to specific events.
class OwnObject (BaseObject):
    def __init__ (self, name):
        BaseObject.__init__ (self)
        self.name = name
        # The object should be able to listen to 'ping' and 'pong'
        # events.
        self._signals["ping"] = []
        self._signals["pong"] = []

    def notify (self, event):
        # This simple notify method will not be used in this
        # example. Instead, the signals are invoked directly.
        if event.signal == "ping":
            self.run_signal_handlers ("ping")
        elif event.signal == "pong":
            self.run_signal_handlers ("pong")

manager = EventManager ()

# Create an object and connect callbacks to its both events.
my_obj = OwnObject ("First object")
ev1 = my_obj.connect_signal ("ping", ping_callback, my_obj, "data")
ev2 = my_obj.connect_signal ("pong", pong_callback)

# Connect it to the event manager
my_obj.manager = manager

# Invoke the connected signals handlers for a specific event.
manager.emit ("ping", None)
manager.emit ("pong", None)

# After disconnecting a callback, it will not be invoked anymore.
my_obj.disconnect_signal (ev1)
my_obj.disconnect_signal (ev2)
manager.emit ("ping", None)
manager.emit ("pong", None)
</pre></div></div><p class="title"><b>Example 21. Ping-Pong with a BaseObject</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="events_on_demand"></a>
        Events on demand: the <code class="classname">ActionListener</code>
      </h3></div></div></div><p>
        The <code class="classname">ocempgui.object</code> module includes
        another event capable object class, the
        <code class="classname">ActionListener</code>, which inherits from the
        <code class="classname">BaseObject</code> class, but allows you to
        create and delete signals and listening queues as you need
        them without the necessity to subclass.
      </p><p>
        The <code class="classname">ActionListener</code> creates the signal
        id and a callback queue, when you connect a callback to it and
        registers itself for this signal automatically at its event
        manager. This can be extremeley useful, if a more flexible
        event capable object type is needed, which does not need to do
        any sanity checks on the event data. Instead it will send the
        event data to the callback as well, which then can work with it.
      </p><p>
        Once more let us create a ping-ping example using the
        <code class="classname">ActionListener</code> class instead of a
        <code class="classname">BaseObject</code> now.
      </p><div class="example"><a name="ex_object_actionlistener"></a><div class="example-contents"><p>
          You can find the example as python script under
          <code class="filename">examples/actionlistener.py</code>
        </p><a class="indexterm" name="id2588994"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># ActionListener usage example.
import sys
from ocempgui.events import EventManager
from ocempgui.object import ActionListener

count = 0

def emit_pong (event, manager):
    print "emit_pong received: [%s] - emitting pong..." % event
    manager.emit ("pong", "pong_event")

def emit_ping (event, manager):
    global count
    if count &gt; 10:
        sys.exit ()
    count += 1
    print "emit_ping received: [%s] - emitting ping..." % event
    manager.emit ("ping", "ping_event")

# Create an event manager and two ping-pong listeners.
manager = EventManager ()

listener1 = ActionListener ()
listener1.connect_signal ("ping", emit_pong, manager)
listener1.manager = manager

listener2 = ActionListener ()
listener2.connect_signal ("pong", emit_ping, manager)
listener2.manager = manager

# start ping-pong actions
print "Starting Ping-Pong"
manager.emit ("ping", "ping_event")
</pre></div></div><p class="title"><b>Example 22. Ping-Pong with the ActionListener</b></p></div><br class="example-break"><p>
        Looking at the first interesting line, line eight,
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
def emit_pong (event, manager):
    print "emit_pong received: [%s] - emitting pong..." % event
    manager.emit ("pong", "pong_event")
        </pre></div>
        you will notice, that the signature of the function slightly has
        changed. Instead of receiving the additional data of a
        callback connection, it gets the event data of the event here.
        As second object it receives an <code class="classname">EventManager</code>
        object, on which it emits a pong event with additional data then.
      </p><p>
        Line twelve and following does the same, but breaks, if it was
        invoked more than ten times.
      </p><p>
        The next lines of interest are line twenty-three to twenty-nine,
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
listener1 = ActionListener ()
listener1.connect_signal ("ping", emit_pong, manager)
listener1.manager = manager
        </pre></div>
        in which two <code class="classname">ActionLister</code> objects will
        be created and signal slots and callbacks for the 'ping' and
        'pong' events will be set up. In line twenty-five and
        twenty-nine the objects will be registered at the event
        manager created earlier in the code.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Although this class is very mighty, you should not use it as
          base for own event capable classes. When the feature set and
          code amount of your own classes grow, it easily can happen,
          that you oversee events or that you do not understand which
          signals it should deal with anymore.
        </p><p>
          It is however a good and valuable class type to work as proxy
          or to delegate events to different functions or methods in a
          context sensitive manner.
        </p></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="gui_applications"></a>Creating GUI applications</h2></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="gui_getting_started"></a>Getting started</h3></div></div></div><p>
        The first thing an application using OcempGUI should do is to
        initialize the renderering system. The
        <code class="classname">Renderer</code> class from the
        <code class="classname">ocempgui.widgets</code> package contains all
        necessary parts to take care of this. It includes
      </p><div class="itemizedlist"><ul type="disc"><li><p>the event mangement</p></li><li><p>a sprite based render engine</p></li><li><p>methods to create the pygame window</p></li></ul></div><p>
        The <code class="classname">Renderer</code> can be set up with only
        three lines of code.
      </p><div class="example"><a name="ex_gui_renderer"></a><div class="example-contents"><a class="indexterm" name="id2589100"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
from ocempgui.widgets import *
re = Renderer ()
re.create_screen (200, 200) # Creates the pygame window
        </pre></div></div><p class="title"><b>Example 23. Setting up the Renderer</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="hello_world_with_ocempgui"></a>Hello World with OcempGUI</h3></div></div></div><p>
        Now that the <code class="classname">Renderer</code> is set up, you
        can start to place widgets on the pygame window by adding them
        using the <code class="methodname">Renderer.add_widget()</code>
        method. Let us do this by building a simple (and well-known)
        application with a <code class="classname">Button</code> widget on it,
        that displays 'Hello World'.
      </p><div class="example"><a name="ex_gui_hello_world"></a><div class="example-contents"><p>
          You can find the example as python script under
          <code class="filename">examples/hello_world.py</code>
        </p><a class="indexterm" name="id2589150"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Hello World example.
from ocempgui.widgets import *

# Initialize the drawing window.
re = Renderer ()
re.create_screen (100, 50)
re.title = "Hello World"
re.color = (250, 250, 250)

button = Button ("Hello World")
button.topleft = (10, 10)
re.add_widget (button)

# Start the main rendering loop.
re.start ()
</pre></div></div><p class="title"><b>Example 24. Hello World with OcempGUI</b></p></div><br class="example-break"><p>
        The second line
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
from ocempgui.widgets import*
        </pre></div>
        is the usual directive to import anything from the
        <code class="classname">ocempgui.widgets</code> module you will need
        to build an application. It is also possible to use a fine
        grained selection of classes and submodules to import, but
        mostly the above code will serve well.
      </p><p>
        The fifth and sixth lines
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
re = Renderer ()
re.create_screen (100, 50)
        </pre></div>
        create a new <code class="classname">Renderer</code> object, which
        takes care of updating the screen and the event management and
        create a pygame window with a 100x50 size.
      </p><p>
        The seventh and eight line
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
re.title = "Hello World"
re.color = (250, 250, 250)
        </pre></div>
        set the the title caption of the pygame window and the
        background color (here as RGB value) for the window. Those are
        not necessary code, but at least the title will help window
        managers to display the pygame window correctly within their
        window lists, etc.
      </p><p>
        In line ten
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">button = Button ("Hello World")</pre></div>
        the <code class="classname">Button</code> widget is created. The
        constructor can receive an additional argument with the text,
        the <code class="classname">Button</code> should display.
      </p><p>
        The next line will place the <code class="classname">Button</code> at
        a specific position.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">button.topleft = (10, 10)</pre></div>
        The topleft attribute always refers to the topleft corner of the
	widget and can be used to place widgets at the desired coordinates on
        the pygame window.
      </p><p>
        Line twelve
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">re.add_widget (button)</pre></div>
        adds the button to the Renderer, which will enable the button
        to be displayed, receive events and send events.
      </p><p>
        The last line will start the main processing loop of the
        <code class="classname">Renderer</code>.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">re.start ()</pre></div>
        When the program reaches this line of code, the processing is
        passed to the <code class="classname">Renderer</code>, which will wait
        for events, draw and update the widgets and so on.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="gui_events_and_signals"></a>Events and Signals</h3></div></div></div><p>
        Every widget of OcempGUI inherits from the
        <code class="classname">ocempgui.object.BaseObject</code> class and
        its event handling makes heavy usage of the
        <code class="classname">BaseObject</code> features.
      </p><p>
        To cause a <code class="classname">Button</code> to print a message
        upon a mouse click, you would connect a message printing
        function to the click signal of the
        <code class="classname">Button</code>. In turn, if this callback is
        not needed anymore in the later program flow, you would
        disconnect the function from the
        <code class="classname">Button</code>'s signal.
      </p><p>
        This theoretical model is used in many different toolkits and
        OcempGUI stays with it. We will enhance our 'Hello world'
        example application from the previous chapter with a callback
        now, wich prints a message each time the
        <code class="classname">Button</code> is clicked.
      </p><div class="example"><a name="ex_gui_hello_world_signals"></a><div class="example-contents"><p>
          You can find the example as python script under
          <code class="filename">examples/hello_world_signals.py</code>
        </p><a class="indexterm" name="id2589365"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Hello World example.
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def print_message  ():
    print "The button was clicked!"

# Initialize the drawing window.
re = Renderer ()
re.create_screen (100, 50)
re.title = "Hello World"
re.color = (250, 250, 250)

button = Button ("Hello World")
button.topleft = (10, 10)
button.connect_signal (SIG_CLICKED, print_message)
re.add_widget (button)

# Start the main rendering loop.
re.start ()
</pre></div></div><p class="title"><b>Example 25. Hello World with callbacks</b></p></div><br class="example-break"><p>
        The first change you note is the new import directive in line three.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
from ocempgui.widgets.Constants import *
        </pre></div>
        This will import the set of common constants used within the
        <code class="classname">ocempgui.widgets</code> module. The availabe
        signal identifiers used by the various widgets of OcempGUI
        area prefixed with <span class="emphasis"><em>SIG_</em></span>.
      </p><p>
        Line five and six contain the function, which will be used as
        the callback for the button. It is indifferent, if the
        callback is a class or object method or a function. Both cases
        will work in the same way.
      </p><p>
        The next notably change was done in line 16
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
button.connect_signal (SIG_CLICKED, print_message)
        </pre></div>
        This tells the <code class="classname">Button</code> to invoke the
        <code class="methodname">print_message</code> function each time it
        is clicked. You also could send additional data to the
        callback as you already know from <a href="#baseobject_types" title="Making objects event capable - the better way">the section called &#8220;Making objects event capable - the better way&#8221;</a>. Anything written about
        the signal handling of the <code class="classname">BaseObject</code>
        class applies to the widgets, too.
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="widget_overview"></a>Widget overview</h2></div></div></div><p>
      The following sections cover the possibilities and capabilities of
      the different widgets, the <code class="classname">ocempgui.widgets</code>
      module offers. The sections will not cover any method and
      attribute of the widgets in detail, but just the most important
      ones. It is strongly recommended, that you read through the doc
      strings of the widgets, too, to get a complete overview about
      them.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="gui_general_settings"></a>General settings</h3></div></div></div><p>
        The <code class="classname">ocempgui.widgets</code> module contains some
        globally accessed settings, that influence its complete
        behaviour. Those can be found in the
        <code class="classname">ocempgui.widgets.base</code> part and contain
        the <code class="classname">Style</code>, which is currently in use, the
        timer rate for double-clicks and a debugging flag.  You can
        adjust those settings easily by simply binding them to new
        values.
      </p><p>
        Before you go ahead and change
        <span class="property">base.GlobalStyle</span>, you should read <a href="#gui_style" title="Changing the widget appearance">the section called &#8220;Changing the widget appearance&#8221;</a>. 
      </p><p>
        The <span class="property">base.debug</span> setting is for additional
        debugging output and should not be set to True usually (unless
        you are using a development version).
      </p><p>
        The last one, <span class="property">base.DoubleClickRate</span> should
        be set using the
        <code class="methodname">base.set_doubleclick_rate()</code> method only
        and denotes the maximum time to elaps between two click
        operations to identify them as a double-click.
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="widgets_basewidget"></a>Common widget operations - the BaseWidget</h2></div></div></div><p>
      The <code class="classname">BaseWidget</code> is the most basic class of
      all widgets and contains common attributes and methods, each
      widget of the <code class="classname">ocempui.widgets</code> module has to
      include. Every widget inherits from it, so that any description
      and explanation in this section also to the widgets, which are
      explained later on.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="gui_positioning_and_sizing"></a>Positioning and sizing</h3></div></div></div><p>
        A widget can be set to a specific position on the main screen
        using the <span class="property">topleft</span> attribute.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
widget.topleft = 10, 15
        </pre></div>
        Using the above code, the topleft corner of the widget will bo
        positioned at the x-coordinate 10 and the y-coordinate 15 of the
        main screen, of which 0, 0 denotes the topleft corner.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            This will not work as supposed using widgets, that are bound
            to a <code class="classname">Container</code> or
            <code class="classname">Bin</code> widget, which will be explained
            in one of the following sections.
          </p></div><p>
        If you read the current <span class="property">topleft</span> value of a
        widget, keep in mind, that it will return a tuple containing the
        both, x and y, coordinates.
      </p><p>
        Every widget supports a minimum size, that will be respected by
        the default drawing methods.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
widget.minsize = 80, 20
        </pre></div>
        The minimum size is the guaranteed width and height, the widget
        should occupy on the screen. It can grow beyond that minimum
        size, if this is needed to display all of its contents according
        to its drawing method, but will never be smaller than this
        value.
      </p><p>
        The currently used width and height, which can differ from its
        <span class="property">minsize</span> can be retrieved using the
        <span class="property">width</span> and <span class="property">height</span>
        attributes or as tuple using the <span class="property">size</span>.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
if (widget.width == widget.minsize[0]) and (widget.height == widget.minsize[1]):
    print "Widget does not exceed its minimum size."
        </pre></div>
      </p><p>
        The counterpart to the <span class="property">minsize</span> attribute is
        <span class="property">maxsize</span>. A widget will never grow beyond
        the values of it, if set.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
	  The <code class="classname">BaseWidget</code> class exports all
	  <code class="classname">pygame.Rect</code> attributes, so you are not
	  limited to the <span class="property">topleft</span> only, but can also
	  use the <code class="classname">pygame.Rect</code> attributes you are
	  used to. See the <a href="http://www.pygame.org/docs/ref/rect.html" target="_top">pygame.Rect</a> documentation for more
	  details.
	</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="gui_keyboard_support"></a>Keyboard support</h3></div></div></div><p>
        To allow an easy and logical keyboard navigation, widgets have
        an <span class="property">index</span> attribute, which influences the
        navigation order using the keyboard.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
widget.index = 3
        </pre></div>
        A lower index will cause the widget to receive the input focus
        earlier. It is highly recommended, that you set this value in
        your own code to provide the user a better keyboard
        accessibility.
      </p><p>
        The input focus mentioned above denotes a state of the widget,
        in which the user can interact with it using the keyboard only.
        A <code class="classname">Button</code> widget will react upon pressing
        the space bar with a click while an <code class="classname">Entry</code>
        widget will let the user type text. You can set the input focus
        of a widget manually with the <span class="property">focus</span> attribute.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
widget.focus = True
        </pre></div>
        This however will not work with any widget (e.g. layout
        containers such as the <code class="classname">Table</code>). Dependant
        on the widget the <span class="property">set_focus()</span> method of it
        will return either True or False, which indicates, that the
        input focus could be sucessfully set for that widget or not.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
frame = VFrame ()
focusok = frame.set_focus (True)
if not focusok:
    print "Focus could not be set."
        </pre></div>
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="gui_other_features"></a>Other features</h3></div></div></div><p>
        Widgets can be disabled from user interaction and receiving
        events, if you set their <span class="property">sensitive</span>
        attribute to False.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
widget.sensitive = False
        </pre></div>
        They will be set in a different state then to indicate, that the
        user cannot interact with them anymore. Of course you can reset
        the sensitivity at any time.
      </p><p>
        The renderering system of the
        <code class="classname">ocempgui.widgets</code> module can use different
        layers, on which widgets are drawn. This is especially useful
        and often necessary to place widgets above others (e.g. to place
        a <code class="classname">Window</code> widget above another one).
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
widget.depth = 3
        </pre></div>
        The above code causes the widget to be drawn above all widgets,
        which have a <span class="property">depth</span> value smaller than
        three, but under any widget, that has a higher depth. You can
        find an example demonstrating this in <a href="#widgets_window" title="Window">the section called &#8220;Window&#8221;</a>. The layer feature is described in
        detail in <a href="#layer_index_system" title="The layer and indexing system">the section called &#8220;The layer and indexing system&#8221;</a>.
      </p><p>
        Widgets support transparency using the alpha color channel. To
        set it for a widget use the <span class="property">opacity</span>
        attribute of it. The <span class="property">opacity</span> attribute
        accepts values betwee <span class="emphasis"><em>0 (fully transparent)</em></span>
        and <span class="emphasis"><em>255 (not transparent, default)</em></span>.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
widget.opacity = 100
        </pre></div>
      </p><p>
        To change the appearance of a single widget instance, the
        <code class="methodname">create_style()</code> method and
        <span class="property">style</span> attribute of a widget can be used.
        While <code class="methodname">create_style()</code> will generate an
        instance specific style dictionary for the widget,
        <span class="property">style</span> can be used to have quick access to
        it, once it is created.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
# Create an instance specific style dictionary for the widget and return a
# reference to it.
style = widget.create_style()
...

# Access the created style dictionary of the widget.
widget.style[...] = ...
        </pre></div>
        To avoid unnecessary overhead, the <span class="property">style</span>
        attribute of a widget will not be set to anything by default. It
        will be filled with something useful on th first invocation of
        <code class="methodname">create_style()</code>.
      </p><p>
        Changing instance specific styles is explained in detail in
        <a href="#style_instance" title="Changing the appearance of single instances">the section called &#8220;Changing the appearance of single instances&#8221;</a>.
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="labels"></a>Labels</h2></div></div></div><p>
      Labels are non-interactive decorative user interface elements,
      which provide certain information to the user.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_label"></a>Label</h3></div></div></div><p>
        The <code class="classname">Label</code> class can display a short amount
        of text and allows you to control interaction with other widgets
        using keyboard mnemonics.
      </p><p>
        To create a <code class="classname">Label</code>, you typically will use
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
my_label = Label (text)
        </pre></div>
        The sole argument is the text to display.
      </p><p>
        To set the text after creation, use the <span class="property">text</span>
        attribute or <code class="methodname">set_text()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
label.text = "New Text"
label.set_text ("New Text")
        </pre></div>
      </p><p>
        It is possible to have multiline text by setting the
        <span class="property">multiline</span> attribute to True:
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
label.multiline = True
label.set_multiline (True)
        </pre></div>
        Multiple text lines can be created by the newline character ('\n')
      </p><p>
        Labels support keyboard accelerators, so called mnemonics, which
        can activate other widgets. The '#' will cause the directly
        following to work as mnemonic character. If you want to cause
        the <code class="classname">Label</code> to display a normal '#', use
        '##' in the text.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
label.text = '#Mnemonic'
label.set_text ('A simple hash: ##')
        </pre></div>
      </p><p>
        If a mnemonic is set up, you usually have to set the widget,
        which should be activated by the mnemonic as well.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
label.widget = another_widget
        </pre></div>
      </p><p>
        Below you will find an example to illustrate most of the
        abilities of the <code class="classname">Label</code> widget class. You
        do not need to care about other widgets like the
        <code class="classname">Frame</code> class for now as those are
        explained later on.
      </p><div class="example"><a name="ex_gui_label"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/label.py</code>.
        </p><a class="indexterm" name="id2589948"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Label examples.
import os
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def _create_vframe (text):
    frame = VFrame (Label (text))
    frame.spacing = 5
    frame.align = ALIGN_LEFT
    return frame
    
def create_label_view ():
    states = ("STATE_NORMAL", "STATE_ENTERED", "STATE_ACTIVE",
              "STATE_INSENSITIVE")

    table = Table (2, 3)
    table.spacing = 5
    table.set_row_align (0, ALIGN_TOP)
    table.set_row_align (1, ALIGN_TOP)

    # Frame with the states.
    frm_states = _create_vframe ("States")
    for i, s in enumerate (states):
        lbl = Label (s)
        if STATE_TYPES[i] == STATE_INSENSITIVE:
            lbl.sensitive = False
        else:
            lbl.state = STATE_TYPES[i]
        frm_states.add_child (lbl)
    table.add_child (0, 0, frm_states)

    # Frame with different padding.
    frm_padding = _create_vframe ("Padding")
    for i in xrange (5):
        lbl = Label ("Padding: %dpx" % (i * 2))
        lbl.padding = i * 2
        frm_padding.add_child (lbl)
    table.add_child (0, 1, frm_padding)

    # Frame with mnemonic support.
    frm_mnemonics = _create_vframe ("Mnemonics")
    strings = ("#Simple Mnemonic", "A ## is displayed using '####'",
               "M#ultiple M#nemonics #have no #effect")
    for s in strings:
        lbl = Label (s)
        frm_mnemonics.add_child (lbl)
    table.add_child (0, 2, frm_mnemonics)

    # Frame with multiline labels.
    frm_multiline = _create_vframe ("Multiline labels")
    frm_multiline.align = ALIGN_NONE
    strings = ("Single line", "First lines\nSecond line",
               "First line\nSecond line\nThird Line",
               "Two lines with a\n#mnemonic")
    for s in strings:
        lbl = Label (s)
        lbl.multiline = True
        frm_multiline.add_child (lbl)
    table.add_child (1, 0, frm_multiline)
    return table

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (500, 350)
    re.title = "Label examples"
    re.color = (234, 228, 223)
    re.add_widget (create_label_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 26. Label example</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_imagelabel"></a>ImageLabel</h3></div></div></div><p>
        The <code class="classname">ImageLabel</code> is a decorative widget
        holding an image and not much functionality besides that. It
        does not support mnemonics nor text and is mainly used to
        display images in a GUI, whenever they should fit smoothly into
        the layout.
      </p><p>
        To create an <code class="classname">ImageLabel</code>, you have pass
        either the name of a file to load (including the full path to
        it) or a <code class="classname">pygame.Surface</code> object to
        display.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
imagelabel = ImageLabel ("path/to/an/image.png")
imagelabel = ImageLabel (pygame_surface)
        </pre></div>
        Of course the image can be changed at any time using the
        <span class="property">picture</span> attribute or
        <code class="methodname">set_picture()</code> method.
      </p><p>
        In contrast to the <code class="classname">Label</code> class, the
        <code class="classname">ImageLabel</code> supports different border
        styles to adjust its look and feel without the need to override
        its drawing methods.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
imagelabel.border = BORDER_NONE
imagelabel.set_border (BORDER_NONE)
        </pre></div>
      </p><p>
        Below you will find an example to illustrate most of the
        abilities of the <code class="classname">ImageLabel</code> widget
        class. You do not need to care about other widgets like the
        <code class="classname">Frame</code> class for now as those are
        explained later on.
      </p><div class="example"><a name="ex_gui_imagelabel"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/imagelabel.py</code>.
        </p><a class="indexterm" name="id2590108"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># ImageLabel examples.
import os
from ocempgui.draw import Image
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def _create_vframe (text):
    frame = VFrame (Label (text))
    frame.spacing = 5
    frame.align = ALIGN_LEFT
    return frame
    
def create_imagelabel_view ():
    image = Image.load_image ("./image.png")
    table = Table (1, 3)
    table.spacing = 5
    table.set_row_align (0, ALIGN_TOP)

    # Frame with the states.
    frm_states = _create_vframe ("States")
    for i, s in enumerate (STATE_TYPES):
        lbl = ImageLabel (image)
        if s == STATE_INSENSITIVE:
            lbl.sensitive = False
        else:
            lbl.state = s
        frm_states.add_child (lbl)
    table.add_child (0, 0, frm_states)

    # Frame with different padding.
    frm_padding = _create_vframe ("Padding")
    for i in xrange (5):
        lbl = ImageLabel (image)
        lbl.border = BORDER_FLAT
        lbl.padding = i * 2
        frm_padding.add_child (lbl)
    table.add_child (0, 1, frm_padding)

    # Borders.
    frm_borders = _create_vframe ("Borders")
    for border in BORDER_TYPES:
        lbl = ImageLabel (image)
        lbl.border = border
        frm_borders.add_child (lbl)
    table.add_child (0, 2, frm_borders)
    return table

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (500, 350)
    re.title = "ImageLabel examples"
    re.color = (234, 228, 223)
    re.add_widget (create_imagelabel_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 27. ImageLabel example</b></p></div><br class="example-break"></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="buttons"></a>Buttons</h2></div></div></div><p>
      Buttons are interactive user interface elements, which usually
      react upon mouse events such as clicks or similar events.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_button"></a>Button</h3></div></div></div><p>
        You already learned about the <code class="classname">Button</code> widget
        in an earlier section, so let us look at some interesting details
        of it now.
      </p><p>
        The <code class="classname">Button</code> widget is a interactive
        widget, which reacts upon mouse input such as clicks. Basically
        it is a container (which will be explained detailled later on),
        which holds a <code class="classname">Label</code> widget to display its
        text.
      </p><p>
        To create a <code class="classname">Button</code>, you usually will type
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
button = Button (text)
        </pre></div>
      </p><p>
        The usage of mnemonics for the Button is easy to achieve by
        simply supplying a mnemonic text as described in <a href="#widgets_label" title="Label">the section called &#8220;Label&#8221;</a>. You can set the text directly through
        the <span class="property">text</span> attribute or
        <code class="methodname">set_text()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
button.text = "#Mnemonic"
button.set_text ("#Mnemonic")
        </pre></div>
        It is not needed to explicitly set the <span class="property">widget</span>
        attribute of the <code class="classname">Button</code> its
        <code class="classname">Label</code> as this already has been done on
        creation of the <code class="classname">Button</code>.
      </p><p>
        The <code class="classname">Button</code> supports different border
        styles to adjust its look and feel without the need to override
        its drawing methods.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
button.border = BORDER_NONE
button.set_border (BORDER_NONE)
        </pre></div>
      </p><p>
        The <code class="classname">Button</code> widget has some default
        signals, it listens to. Those are
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              SIG_MOUSEDOWN - Invoked, when a mouse button is pressed
              down on the Button.
            </p></li><li><p>
              SIG_MOUSEUP - Invoked, when a mouse button is released on
              the Button.
            </p></li><li><p>
              SIG_MOUSEMOVE - Invoked, when the mouse moves over the
              Button area.
            </p></li><li><p>
              SIG_CLICKED - Invoked, when the <span class="emphasis"><em>left</em></span>
              mouse button is pressed <span class="emphasis"><em>and</em></span> released
              over the Button.
            </p></li></ul></div><p>
      </p><p>
        Below you will find an example to illustrate most of the
        abilities of the <code class="classname">Button</code> widget class. You
        do not need to care about other widgets like the
        <code class="classname">Frame</code> class for now as those are
        explained later on.
      </p><div class="example"><a name="ex_gui_button"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/button.py</code>.
        </p><a class="indexterm" name="id2590353"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Button examples.
import os
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def _create_vframe (text):
    frame = VFrame (Label (text))
    frame.spacing = 5
    frame.align = ALIGN_LEFT
    return frame

def create_button_view ():
    states = ("STATE_NORMAL", "STATE_ENTERED", "STATE_ACTIVE",
              "STATE_INSENSITIVE")

    table = Table (2, 3)
    table.spacing = 5
    table.set_row_align (0, ALIGN_TOP)
    table.set_row_align (1, ALIGN_TOP)

    # Frame with the states.
    frm_states = _create_vframe ("States")
    for i, s in enumerate (states):
        btn = Button (s)
        if STATE_TYPES[i] == STATE_INSENSITIVE:
            btn.sensitive = False
        else:
            btn.state = STATE_TYPES[i]
        frm_states.add_child (btn)
    table.add_child (0, 0, frm_states)

    # Frame with different padding.
    frm_padding = _create_vframe ("Padding")
    for i in xrange (5):
        btn = Button ("Padding: %dpx" % (i * 2))
        btn.padding = i * 2
        frm_padding.add_child (btn)
    table.add_child (0, 1, frm_padding)

    # Mnemonics.
    frm_mnemonic = _create_vframe ("Mnemonics")
    btn = Button ("#Simple Mnemonic")
    btn2 = Button ("#Activate using &lt;ALT&gt;&lt;Underlined Key&gt;")
    frm_mnemonic.add_child (btn, btn2)
    table.add_child (0, 2, frm_mnemonic)

    # Borders.
    frm_borders = _create_vframe ("Borders")
    btn_raised = Button ("Raised border")
    btn_sunken = Button ("Sunken border")
    btn_sunken.border = BORDER_SUNKEN
    btn_flat = Button ("Flat border")
    btn_flat.border = BORDER_FLAT
    btn_none = Button ("No border")
    btn_none.border = BORDER_NONE
    btn_etchedin = Button ("Etched in")
    btn_etchedin.border = BORDER_ETCHED_IN
    btn_etchedout = Button ("Etched out")
    btn_etchedout.border = BORDER_ETCHED_OUT
    frm_borders.add_child (btn_raised, btn_sunken, btn_flat, btn_none,
                           btn_etchedin, btn_etchedout)
    table.add_child (1, 0, frm_borders)

    # Multiline labeled buttons
    frm_multiline = _create_vframe ("Multiline labels")
    strings = ("Single lined Button", "Two lines on\na Button",
               "Two lines with a\n#mnemonic")
    for s in strings:
        button = Button (s)
        button.child.multiline = True
        frm_multiline.add_child (button)
    table.add_child (1, 1, frm_multiline)

    # Empty buttons with different minimum sizes
    frm_empty = _create_vframe ("Empty Buttons")
    for i in xrange (5):
        button = Button ()
        button.minsize = (20 * i, 10 * i)
        frm_empty.add_child (button)
    table.add_child (1, 2, frm_empty)
    
    return table
    
if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (550, 470)
    re.title = "Button examples"
    re.color = (234, 228, 223)
    re.add_widget (create_button_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 28. Button example</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_imagebutton"></a>ImageButton</h3></div></div></div><p>
        The <code class="classname">ImageButton</code> is basically a subclass
        of the <code class="classname">Button</code>, but enhances it by the
        ability to load and display image data. It supports any image
        data format, that can be handled by the underlying pygame
        library.  Due to its inheritance, everything said about the
        <code class="classname">Button</code> widget applies to the
        <code class="classname">ImageButton</code> as well.
      </p><p>
        The creation of an <code class="classname">ImageButton</code> is
        slightly different to the <code class="classname">Button</code>. Instead
        of passing the text to display, you can pass either the name of
        a file to load (including the full path to it) or a
        <code class="classname">pygame.Surface</code> object to display, just
        like the <code class="classname">ImageLabel</code> class.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
button = ImageButton ("path/to/an/image.png")
button = ImageButton (pygame_surface)
        </pre></div>
        Of course it is possible to supply text through the
        <span class="property">text</span> attribute, too, which then will be
        displayed right besides the image.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
button.text = "Additional text"
        </pre></div>
      </p><p>
        Below you will find an example to illustrate most of the
        abilities of the <code class="classname">ImageButton</code> widget
        class. You do not need to care about other widgets like the
        <code class="classname">Frame</code> class for now as those are
        explained later on.
      </p><div class="example"><a name="ex_gui_imagebutton"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/imagebutton.py</code>.
        </p><a class="indexterm" name="id2590448"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># ImageButton examples.
import pygame, os
from ocempgui.draw import Image
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def _create_vframe (text):
    frame = VFrame (Label (text))
    frame.spacing = 5
    frame.align = ALIGN_LEFT
    return frame

def create_button_view ():
    states = ("STATE_NORMAL", "STATE_ENTERED", "STATE_ACTIVE",
              "STATE_INSENSITIVE")

    image = Image.load_image ("./image.png")
    table = Table (2, 2)
    table.spacing = 5
    table.set_row_align (0, ALIGN_TOP)
    table.set_row_align (1, ALIGN_TOP)
    
    # Frame with the states.
    frm_states = _create_vframe ("States")
    for i, s in enumerate (states):
        btn = ImageButton (image)
        if STATE_TYPES[i] == STATE_INSENSITIVE:
            btn.sensitive = False
        else:
            btn.state = STATE_TYPES[i]
        btn.text = s
        frm_states.add_child (btn)
    table.add_child (0, 0, frm_states)

    # Frame with different padding.
    frm_padding = _create_vframe ("Padding")
    for i in xrange (4):
        btn = ImageButton (image)
        btn.padding = i * 2
        frm_padding.add_child (btn)
    table.add_child (0, 1, frm_padding)

    # Mnemonics.
    frm_mnemonic = _create_vframe ("Mnemonics")
    btn = ImageButton (image)
    btn.text = "#Simple Mnemonic"
    btn2 = ImageButton (image)
    btn2.text = "#Activate using &lt;ALT&gt;&lt;Underlined Key&gt;"
    frm_mnemonic.add_child (btn, btn2)
    table.add_child (1, 0, frm_mnemonic)

    # Multiline labeled ImageButton
    frm_multiline = _create_vframe ("Multiline label")
    button = ImageButton (image)
    button.text = "Multiple lines\nwith a #mnemonic"
    button.child.multiline = True
    frm_multiline.add_child (button)
    table.add_child (1, 1, frm_multiline)

    return table

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (570, 400)
    re.title = "ImageButton examples"
    re.color = (234, 228, 223)
    re.add_widget (create_button_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 29. ImageButton example</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_togglebutton"></a>ToggleButton</h3></div></div></div><p>
        Inherited from the <code class="classname">Button</code> the
        <code class="classname">ToggleButton</code> widget does not differ from
        it except that it is always in one state, either active or
        inactive, which are alternated by a click. By default it is
        displayed in a depressed state on a click and pops up after
        clicking it again.
      </p><p>
        To create a <code class="classname">ToggleButton</code>, you can do the
        same as with the <code class="classname">Button</code> class.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
button = ToggleButton (text)
        </pre></div>
      </p><p>
        You can retrieve the current state as boolean value of the
        <code class="classname">ToggleButton</code> through its
        <span class="property">active</span> attribute and set its state
        programmatically via this attribute or the
        <code class="methodname">set_active()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
if button.active:
    print "The ToggleButton is currently active!"
button.set_active (False)
        </pre></div>
        This also applies to the <code class="classname">CheckButton</code> and
        <code class="classname">RadioButton</code> classes in the next sections.
      </p><p>
        To track changes of this state, the
        <code class="classname">ToggleButton</code> supplies a SIG_TOGGLED
        signal, which will be raised, if the state is changed via a
        mouse input or the accelerator action of a
        <code class="classname">Label</code>. 
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
def state_changed (togglebutton):
    state = "active"
    if not togglebutton.active:
       state = "inactive"
    out = "The state of the ToggleButton has been set to %s" % state

button = ToggleButton ("A ToggleButton")
button.connect_signal (SIG_TOGGLED, state_changed, button)
        </pre></div>
        The signal will not be raised, if the state is set
        programmatically.
      </p><p>
        Below you will find an example to illustrate most of the
        abilities of the <code class="classname">ToggleButton</code> widget
        class. You do not need to care about other widgets like the
        <code class="classname">Frame</code> class for now as those are
        explained later on.
      </p><div class="example"><a name="ex_gui_togglebutton"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/togglebutton.py</code>.
        </p><a class="indexterm" name="id2590560"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># ToggleButton examples.
import os
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def _create_vframe (text):
    frame = VFrame (Label (text))
    frame.spacing = 5
    frame.align = ALIGN_LEFT
    return frame

def create_button_view ():
    states = ("STATE_NORMAL", "STATE_ENTERED", "STATE_ACTIVE",
              "STATE_INSENSITIVE")

    table = Table (2, 3)
    table.spacing = 5
    table.set_row_align (0, ALIGN_TOP)
    table.set_row_align (1, ALIGN_TOP)

    # Frame with the states.
    frm_states = _create_vframe ("States")
    for i, s in enumerate (states):
        btn = ToggleButton (s)
        if STATE_TYPES[i] == STATE_INSENSITIVE:
            btn.sensitive = False
        else:
            btn.state = STATE_TYPES[i]
        frm_states.add_child (btn)
    table.add_child (0, 0, frm_states)

    # Frame with different padding.
    frm_padding = _create_vframe ("Padding")
    for i in xrange (5):
        btn = ToggleButton ("Padding: %dpx" % (i * 2))
        btn.padding = i * 2
        frm_padding.add_child (btn)
    table.add_child (0, 1, frm_padding)

    # Mnemonics.
    frm_mnemonic = _create_vframe ("Mnemonics")
    btn = ToggleButton ("#Simple Mnemonic")
    btn2 = ToggleButton ("#Activate using &lt;ALT&gt;&lt;Underlined Key&gt;")
    frm_mnemonic.add_child (btn, btn2)
    table.add_child (0, 2, frm_mnemonic)

    # Multiline labeled buttons
    frm_multiline = _create_vframe ("Multiline labels")
    strings = ("Single lined ToggleButton", "Two lines on\na ToggleButton",
               "Two lines with a\n#mnemonic")
    for s in strings:
        button = ToggleButton (s)
        button.child.multiline = True
        frm_multiline.add_child (button)
    table.add_child (1, 0, frm_multiline)

    # Empty buttons with different minimum sizes
    frm_empty = _create_vframe ("Empty Buttons")
    for i in xrange (5):
        button = ToggleButton ()
        button.minsize = (20 * i, 10 * i)
        frm_empty.add_child (button)
    table.add_child (1, 2, frm_empty)

    return table

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (530, 400)
    re.title = "ToggleButton examples"
    re.color = (234, 228, 223)
    re.add_widget (create_button_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 30. ToggleButton example</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_checkbutton"></a>CheckButton</h3></div></div></div><p>
        The <code class="classname">CheckButton</code>, which inherits from the
        <code class="classname">ToggleButton</code>, does not bring in any new
        features. Instead it just uses a different look to display its
        set state. The state of the <code class="classname">CheckButton</code>
        is indicated by a small (usually 10x10 px) square, which is
        either checked or unchecked.
      </p><p>
        To create a <code class="classname">CheckButton</code> widget, you
        usually will do the same as with the
        <code class="classname">ToggleButton</code>.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
button = CheckButton (text)
        </pre></div>
      </p><p>
        Below you will find an example to illustrate most of the
        abilities of the <code class="classname">CheckButton</code> widget
        class. You do not need to care about other widgets like the
        <code class="classname">Frame</code> class for now as those are
        explained later on.
      </p><div class="example"><a name="ex_gui_checkbutton"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/checkbutton.py</code>.
        </p><a class="indexterm" name="id2590704"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># CheckButton examples.
import os
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def _create_vframe (text):
    frame = VFrame (Label (text))
    frame.spacing = 5
    frame.align = ALIGN_LEFT
    return frame

def create_button_view ():
    states = ("STATE_NORMAL", "STATE_ENTERED", "STATE_ACTIVE",
              "STATE_INSENSITIVE")

    table = Table (2, 3)
    table.spacing = 5
    table.set_row_align (0, ALIGN_TOP)
    table.set_row_align (1, ALIGN_TOP)

    # Frame with the states.
    frm_states = _create_vframe ("States")
    for i, s in enumerate (states):
        btn = CheckButton (s)
        if STATE_TYPES[i] == STATE_INSENSITIVE:
            btn.sensitive = False
        else:
            btn.state = STATE_TYPES[i]
        frm_states.add_child (btn)
    table.add_child (0, 0, frm_states)

    # Frame with different padding.
    frm_padding = _create_vframe ("Padding")
    frm_padding.spacing = 5
    frm_padding.align = ALIGN_LEFT
    for i in xrange (5):
        btn = CheckButton ("Padding: %dpx" % (i * 2))
        btn.padding = i * 2
        frm_padding.add_child (btn)
    table.add_child (0, 1, frm_padding)

    # Mnemonics.
    frm_mnemonic = _create_vframe ("Mnemonics")
    btn = CheckButton ("#Simple Mnemonic")
    btn2 = CheckButton ("#Activate using &lt;ALT&gt;&lt;Underlined Key&gt;")
    frm_mnemonic.add_child (btn, btn2)
    table.add_child (0, 2, frm_mnemonic)

    # Multiline labeled buttons
    frm_multiline = _create_vframe ("Multiline labels")
    strings = ("Single lined CheckButton", "Two lines on\na CheckButton",
               "Two lines with a\n#mnemonic")
    for s in strings:
        button = CheckButton (s)
        button.child.multiline = True
        frm_multiline.add_child (button)
    table.add_child (1, 0, frm_multiline)

    # Empty buttons with different minimum sizes
    frm_empty = _create_vframe ("Empty Buttons")
    for i in xrange (5):
        button = CheckButton ()
        button.minsize = (20 * i, 10 * i)
        frm_empty.add_child (button)
    table.add_child (1, 2, frm_empty)

    return table

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (550, 380)
    re.title = "CheckButton examples"
    re.color = (234, 228, 223)
    re.add_widget (create_button_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 31. CheckButton example</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_radiobutton"></a>RadioButton</h3></div></div></div><p>
        <code class="classname">RadioButton</code> widgets are similar to the
        <code class="classname">CheckButton</code> widgets, except that they can
        grouped, so that only one button of a group can be activated at
        a time. This is especially helpful, if you need to have the user
        to choose between a small amount of options.
      </p><p>
        The creation of a <code class="classname">RadioButton</code> is done using
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
button = RadioButton (text, group)
        </pre></div>
        The additional <em class="parameter"><code>group</code></em> argument can contain
        another <code class="classname">RadioButton</code> object, with which
        the newly created one should be grouped together.
      </p><p>
        Alternatively to the <em class="parameter"><code>group</code></em> argument of
        the constructor, a <code class="classname">RadioButton</code> can be
        assigned to a group after its creation with the
        <span class="property">group</span> attribute or
        <code class="methodname">set_group()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
button.group = other_radio_button
button.set_goup (other_radio_button)
        </pre></div>
        It is also possible to go the other way around and to add or
        remove <code class="classname">RadioButton</code> widgets from a group
        with the <code class="methodname">add_button()</code> or
        <code class="methodname">remove_button()</code> methods of the group.
      </p><p>
        Given those possibilities a group of four choices can be created
        like the following example.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
group = RadioButton ("Choice 1")
button1 = RadioButton ("Choice 2", group)

button2 = RadioButton ("Choice 3")
button2.group = group

button3 = RadioButton ("Choice 4")
group.add_button (button3)
        </pre></div>
      </p><p>
        In contrast to its parent classes, activating a
        <code class="classname">RadioButton</code> causes the other buttons in
        its group to loose their active state.
      </p><p>
        Below you will find an example to illustrate most of the
        abilities of the <code class="classname">RadioButton</code> widget
        class. You do not need to care about other widgets like the
        <code class="classname">Frame</code> class for now as those are
        explained later on.
      </p><div class="example"><a name="ex_gui_radiobutton"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/radiobutton.py</code>.
        </p><a class="indexterm" name="id2590827"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># RadioButton examples.
import os
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def _create_vframe (text):
    frame = VFrame (Label (text))
    frame.spacing = 5
    frame.align = ALIGN_LEFT
    return frame

def create_button_view ():
    states = ("STATE_NORMAL", "STATE_ENTERED", "STATE_ACTIVE",
              "STATE_INSENSITIVE")

    table = Table (2, 3)
    table.spacing = 5
    table.set_row_align (0, ALIGN_TOP)
    table.set_row_align (1, ALIGN_TOP)

    # Frame with the states.
    frm_states = _create_vframe ("States")
    group = None
    for i, s in enumerate (states):
        btn = RadioButton (s, group)
        if i == 0:
            group = btn
        if STATE_TYPES[i] == STATE_INSENSITIVE:
            btn.sensitive = False
        else:
            btn.state = STATE_TYPES[i]
        frm_states.add_child (btn)
    table.add_child (0, 0, frm_states)

    # Frame with different padding.
    frm_padding = _create_vframe ("Padding")
    group = None
    for i in xrange (5):
        btn = RadioButton ("Padding: %dpx" % (i * 2), group)
        if i == 0:
            group = btn
        btn.padding = i * 2
        frm_padding.add_child (btn)
    table.add_child (0, 1, frm_padding)

    # Mnemonics.
    frm_mnemonic = _create_vframe ("Mnemonics")
    btn = RadioButton ("#Simple Mnemonic")
    btn2 = RadioButton ("#Activate using &lt;ALT&gt;&lt;Underlined Key&gt;", btn)
    frm_mnemonic.add_child (btn, btn2)
    table.add_child (0, 2, frm_mnemonic)

    # Multiline labeled buttons
    frm_multiline = _create_vframe ("Multiline labels")
    strings = ("Single lined RadioButton", "Two lines on\na RadioButton",
               "Two lines with a\n#mnemonic")
    group = None
    for i, s in enumerate (strings):
        btn = RadioButton (s, group)
        if i == 0:
            group = btn
        btn.child.multiline = True
        frm_multiline.add_child (btn)
    table.add_child (1, 0, frm_multiline)

    # Empty buttons with different minimum sizes
    group = None
    frm_empty = _create_vframe ("Empty Buttons")
    for i in xrange (5):
        button = RadioButton (None, group)
        button.minsize = (20 * i, 10 * i)
        if i == 0:
            group = button
        frm_empty.add_child (button)
    table.add_child (1, 2, frm_empty)

    return table

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (550, 380)
    re.title = "RadioButton examples"
    re.color = (234, 228, 223)
    re.add_widget (create_button_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 32. RadioButton example</b></p></div><br class="example-break"></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="entry_boxes"></a>Entry boxes</h2></div></div></div><p>
      Entry boxes support the input of text or numerical values via the
      keyboard or similar input devices. They usually support the most
      common editing operations such as character input, deletion, etc.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_editable"></a>Editable</h3></div></div></div><p>
        The <code class="classname">Editable</code> class is an abstract base
        class, which takes care of dealing with keyboard events and text
        caret positioning. It is used as backend for the
        <code class="classname">Entry</code> widget class, which will be
        explained in the next section.
      </p><p>
        You usually will not create an <code class="classname">Editable</code>
        object directly, but rather use it as parent for your own
        classes.
      </p><p>
        It can store and operate on (unicode) text through its
        <span class="property">text</span> attribute. The text usually will be
        set via this attribute or the
        <code class="methodname">set_text()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
editable.text = "Text"
editable.set_text ("Text")
        </pre></div>
      </p><p>
        It also supports a virtual text caret position, which will be
        used by its internals to determine the position for editing
        operations. The <span class="property">caret</span> attribute and
        <code class="methodname">set_caret()</code> allow you to adjust the
        caret position.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
editable.caret = 7
editable.set_caret (7)
        </pre></div>
      </p><p>
        Given both the <span class="property">text</span> and
        <span class="property">caret</span> attribute, the internals of the
        <code class="classname">Editable</code> will modify the text of it upon
        receiving keyboard events, if it has the input focus. Given an
        <code class="classname">Editable</code>, which contains the text
        <span class="emphasis"><em>"This is a Test."</em></span> and its caret is set to
        4, the processing of a pressed key ("D") causes:
        </p><div class="orderedlist"><ol type="1"><li><p>Check, whether text editing is allowed.</p></li><li><p>
              If it is, insert a "D" at the fourth position in the text.
            </p></li><li><p>
              The text of it now is <span class="emphasis"><em>"ThisD is a
              Test"</em></span>
            </p></li></ol></div><p>
      </p><p>
        The previous list mentioned a check, whether the text of an
        <code class="classname">Editable</code> can be modified. To allow or
        disallow editing the hold text, you can adjust the value of the
        <span class="property">editable</span> attribute.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
editable.editable = True
editable.set_editable (True)
        </pre></div>
        This however only prevents editing operations, which are
        received as events and <span class="emphasis"><em>not</em></span> setting the text
        directly through the <span class="property">text</span> attribute or
        <code class="methodname">set_text()</code> method.
      </p><p>
        The <code class="classname">Editable</code> listens by default to the
        following signals:
        </p><div class="itemizedlist"><ul type="disc"><li><p>SIG_KEYDOWN - Invoked, when a key gets pressed.</p></li><li><p>
              SIG_INPUT - Invoked, when the input is validated or
              aborted using RETURN or ESC.
            </p></li></ul></div><p>
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_entry"></a>Entry</h3></div></div></div><p>
        The <code class="classname">Entry</code> widget is a single line text
        input box, that inherits from the <code class="classname">Editable</code>
        class. It fully supports the <code class="classname">Editable</code>
        features and enhances it by mouse event sensitivity.
      </p><p>
        To create a <code class="classname">Entry</code> widget, you usually
        will type
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
entry = Entry (text)
        </pre></div>
      </p><p>
        <code class="classname">Entry</code> widgets support a password-like
        mode, in which any typed character will be displayed as an
        asterisk ('*').
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
entry.password = True
        </pre></div>
        This however does not enahcens security as the typed characters
        are stored as plain text. Only the display differs.
      </p><p>
        To allow a better look for some special fonts, the
        <code class="classname">Entry</code> can place an additional amount of
        pixels between its border and the text input area via the
        <span class="property">padding</span> attribute or
        <code class="methodname">set_padding()</code> method. 
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
entry.padding = 5
entry.set_padding (10)
        </pre></div>
        The gained space will be filled with the background color of the
        <code class="classname">Entry</code> by default.
      </p><p>
        The <code class="classname">Entry</code> supports the SIG_MOUSEDOWN
        signal to get the input focus upon a <span class="emphasis"><em>left</em></span>
        mouse button press.
      </p><p>
        Below you will find an example to illustrate most of the
        abilities of the <code class="classname">Entry</code> widget class. You
        do not need to care about other widgets like the
        <code class="classname">Frame</code> class for now as those are
        explained later on.
      </p><div class="example"><a name="ex_gui_entry"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/entry.py</code>.
        </p><a class="indexterm" name="id2591112"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Entry examples.
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def _toggle_password (button, entry):
    entry.password = button.active

def create_entry_view ():
    states = ("STATE_NORMAL", "STATE_ENTERED", "STATE_ACTIVE",
              "STATE_INSENSITIVE")

    table = Table (2, 3)
    table.spacing = 5
    table.set_row_align (0, ALIGN_TOP)

    # Frame with the states.
    frm_states = VFrame (Label ("States"))
    frm_states.spacing = 5
    frm_states.align = ALIGN_LEFT
    for i in xrange (len (states)):
        entry = Entry (states[i])
        if STATE_TYPES[i] == STATE_INSENSITIVE:
            entry.sensitive = False
        else:
            entry.state = STATE_TYPES[i]
        frm_states.add_child (entry)
    table.add_child (0, 0, frm_states)

    # Frame with different padding.
    frm_padding = VFrame (Label ("Padding"))
    frm_padding.spacing = 5
    frm_padding.align = ALIGN_LEFT
    for i in xrange (5):
        entry = Entry ("Padding: %dpx" % (i * 2))
        entry.padding = i * 2
        frm_padding.add_child (entry)
    table.add_child (0, 1, frm_padding)

    # Password Mode
    frm_password = VFrame (Label ("Password support"))
    frm_padding.spacing = 5
    entry = Entry ("A password")
    button = ToggleButton ("Password mode")
    button.connect_signal (SIG_TOGGLED, _toggle_password, button, entry)
    frm_password.add_child (entry, button)
    table.add_child (0, 2, frm_password)

    return table

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (400, 400)
    re.title = "Entry examples"
    re.color = (234, 228, 223)
    re.add_widget (create_entry_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 33. Entry example</b></p></div><br class="example-break"></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="range_widgets"></a>Range widgets</h2></div></div></div><p>
      Range widgets denote any widget class, that is based on the
      abstract <code class="classname">Range</code> widget class. Those widgets
      usually support setting a value within a defined value range, such
      as scaling widgets or scrollbars.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_range"></a>Range</h3></div></div></div><p>
        The <code class="classname">Range</code> widget class is an abstract
        class, which enables inheriting classes to set and use value
        ranges. It can make use of float values, thus providing a high
        and for most cases exact resolution of values and it supports
        setting minimum and maximum values as well as stepwise
        increments.
      </p><p>
        You usually will not create a <code class="classname">Range</code>
        object directly, but inherit from it in your own widget classes.
        The constructor of a <code class="classname">Range</code>
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
range = Range (minimum, maximum, step)
        </pre></div>
        needs some arguments, which define the minimum range value, the
        maximum range value and the step range to use for increments or
        decrements of the <code class="classname">Range</code>.
      </p><p>
        The <span class="property">minimum</span> attribute defines the lower
        limit of the value range it serves, while the
        <span class="property">maximum</span> attribute defines the upper limit
        of it. Both can be set either via the attribute or the
        <code class="methodname">set_minimum()</code> or
        <code class="methodname">set_maximum()</code> methods.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
if range.minimum &lt; 0:
    range.set_minimum (0)
if range.maximum &gt; 100:
    range.set_maximum (100)
        </pre></div>
      </p><p>
        The <span class="property">step</span> attribute of the
        <code class="classname">Range</code> is useful to increment or decrement
        the value of it in a constant manner. By default it is set to
        1.0. 
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
range.step = 10.0
range.set_step (-3.2)
        </pre></div>
        It is possible to set the <span class="property">step</span> attribute to
        a negative value. Although this is confusing in most cases (the
        in- and decrements will be swapped), it can be useful for the
        application logic in some (rare) situations.
      </p><p>
        The value of the <code class="classname">Range</code> can be read and
        set via the <span class="property">value</span> attribute and
        <code class="methodname">set_value()</code> method. It can not grow
        beyond the upper or lower limit of the
        <code class="classname">Range</code>. Assigning a value not within those
        limitations will let it raise an exception.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
range.value = 4.59
range.set_value (4.59)
        </pre></div>
      </p><p>
        For an efficient usage of the <code class="classname">Range</code>
        within loops, etc. the <code class="methodname">increase()</code> and
        <code class="methodname">decrease()</code> are supplied by it.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
range.increase ()
range.decrease ()
        </pre></div>
        Those will in- or decrease the value of the range by the set
        <span class="property">step</span> value, but respect its upper and lower
        limit. Using those both methods will let you avoid additional
        exception handling code or limit checks.
      </p><p>
        The <code class="classname">Range</code> raises a SIG_VALCHANGED event,
        whenever its <span class="property">value</span> changed. This means a
        real value change, reassignments of the same value are ignored.
        The following example code shows this behaviour.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
def val_changed (range):
   print "The value changed to: %d" % range.value

range.connect_signal (SIG_VALCHANGED, val_changed, range)
if range.value != 10.0:
    range.value = 10.0 # Signal handler is invoked.
range.value = 10.0     # Nothing happens.
        </pre></div>
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_scale"></a>Scale</h3></div></div></div><p>
        Scale widgets separate in an abstract
        <code class="classname">Scale</code> base class, which mainly contains
        internal code needed by its both subclasses, the
        <code class="classname">VScale</code> and <code class="classname">HScale</code>
        widget. A <code class="classname">Scale</code>, inherited from the
        <code class="classname">Range</code>, is a widget that lets you pick a
        value from a range using a vertical
        (<code class="classname">VScale</code>) or horizontal
        (<code class="classname">HScale</code>) slider. Those both widgets only
        differ in their appearance.
      </p><p>
        To create a <code class="classname">HScale</code> or
        <code class="classname">VScale</code> widget, you typically will use the
        same constructor syntax as for the <code class="classname">Range</code>
        widget.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
hscale = HScale (minimum, maximum, step)
vscale = VScale (minimum, maximum, step)
        </pre></div>
        As well as for the <code class="classname">Range</code>, the
        <em class="parameter"><code>minimum</code></em> and
        <em class="parameter"><code>maximum</code></em> arguments set the upper an lower
        limit of the value range, while the <em class="parameter"><code>step</code></em>
        argument sets the step range and defaults to 1.0.
      </p><p>
        The most important attributes and methods are already explained
        in <a href="#widgets_range" title="Range">the section called &#8220;Range&#8221;</a>, so they will not be
        explained here again.
      </p><p>
        The <code class="classname">Scale</code> widgets listen to the three
        available mouse events,
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              SIG_MOUSEDOWN - Invoked, when a mouse button is pressed
              down on the <code class="classname">Scale</code>.
            </p></li><li><p>
              SIG_MOUSEUP - Invoked, when a mouse button is released on
              the <code class="classname">Scale</code>.
            </p></li><li><p>
              SIG_MOUSEMOVE - Invoked, when the mouse moves over the
              <code class="classname">Scale</code>.
            </p></li></ul></div><p>
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_scrollbar"></a>ScrollBar</h3></div></div></div><p>
        Similar to the <code class="classname">Scale</code> widget, the
        <code class="classname">ScrollBar</code> lets you pick a value from a
        range, but additionally contains two buttons at its ends, which
        allow the user to increment or decrement the value stepwise.
        The <code class="classname">ScrollBar</code> is usually not used as
        standalone widget, but instead serves as control in more complex
        widgets, which need scrolling abilities.
      </p><p>
        In contrast to the <code class="classname">Scale</code>, the
        <code class="classname">ScrollBar</code> uses a slider with a variable
        size, which depends on the length of the
        <code class="classname">ScrollBar</code> and the
        <span class="property">maximum</span> value of it. The slider however has
        a defined minimum size, so that it will not shrink to an
        unusable size by default.
      </p><p>
        The procedure to create a <code class="classname">ScrollBar</code> is
        similar to the <code class="classname">Scale</code> and
        <code class="classname">Range</code>.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
hscrollbar = HScrollBar (minimum, maximum, step)
vscrollbar = VScrollBar (minimum, maximum, step)
        </pre></div>
      </p><p>
        The most important attributes and methods are already explained
        in <a href="#widgets_scale" title="Scale">the section called &#8220;Scale&#8221;</a> and <a href="#widgets_range" title="Range">the section called &#8220;Range&#8221;</a>, so they will not be explained here
        again.
      </p><p>
        The <code class="classname">Scrollbar</code> widgets listen to the three
        available mouse events,
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              SIG_MOUSEDOWN - Invoked, when a mouse button is pressed
              down on the <code class="classname">ScrollBar</code>.
            </p></li><li><p>
              SIG_MOUSEUP - Invoked, when a mouse button is released on
              the <code class="classname">ScrollBar</code>.
            </p></li><li><p>
              SIG_MOUSEMOVE - Invoked, when the mouse moves over the
              <code class="classname">ScrollBar</code>.
            </p></li></ul></div><p>
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="container_widgets"></a>Container widgets</h2></div></div></div><p>
      Container widgets are able to hold other widgets and take care of
      drawing them on their own surface. They are mostly used for layout
      purposes or complex widgets, which consist of several other
      widgets or which need to add additional functionality to different
      widget types (like the <code class="classname">ScrolledWindow</code>
      widget). They allow to bind one or more widgets as child(ren) to
      themselves and take over the role as parent widget.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_bin"></a>Bin</h3></div></div></div><p>
        The abstract <code class="classname">Bin</code> class is a container,
        that is able to hold exactly one child. It allows to bind und
        unbind a child widget and supports setting an additional padding
        between its surface borders and the child surface.
      </p><p>
        You usually will not create a <code class="classname">Bin</code>
        object directly, but inherit from it in your own widget classes.
      </p><p>
        The child of a <code class="classname">Bin</code> can be set with the
        <span class="property">child</span> attribute or
        <code class="methodname">set_child()</code> method. It is not necessary
        to register the child at an event manager after binding it to
        the <code class="classname">Bin</code> as this will set the event
        manager of the child to its own one.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
label = Label ("Label for a bin")
bin.set_child (label)
# No need to set an event manager explicitly for the label.
bin.manager = eventmanager
        </pre></div>
        This however will <span class="emphasis"><em>not</em></span> be done, if the child
        is already bound to an event manager.
      </p><p>
        For layout purposes the <code class="classname">Bin</code> can make use
        of additional pixels to place between its outer surface edges
        and the child surface. This pixel amount can be modified and
        used using the <span class="property">padding</span> attribute of the
        <code class="classname">Bin</code>. Various inheritors within the
        widgets module of OcempGUI make heavy use of this attribute to
        adjust the look of themselves. The following example
        demonstrates this.
      </p><div class="example"><a name="ex_gui_bin_padding"></a><div class="example-contents"><a class="indexterm" name="id2591648"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
from ocempgui.widgets import Button, Renderer
renderer = Renderer ()
renderer.create_screen (200, 120)
button_5px = Button ("Button with 5px padding")
button_5px.topleft = 5, 5
button_5px.padding = 5

button_10px = Button ("Button with 10px padding")
button_10px.topleft = 5, 60
button_10px.padding = 10

renderer.add_widget (button_5px, button_10px)
renderer.start ()
        </pre></div></div><p class="title"><b>Example 34. Bin.padding example</b></p></div><br class="example-break"><p>
        The following example provides a complete
        <code class="classname">Bin</code> implementation which can rotate the
        visible of its child (and only the surface).
      </p><div class="example"><a name="ex_gui_pivotbin"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/bin.py</code>.
        </p><a class="indexterm" name="id2591684"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Bin examples.
import pygame
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

class PivotBin (Bin):
    """PivotBin (widget) -&gt; OwnBin

    A Bin implementation example class.

    This class does not support real rotations of widgets. Instead it
    simply rotates their image surface and displays it. Any other
    behaviour and information of the widget stay the same. Thus event
    capable widgets will not work correctly.
    """
    def __init__ (self):
        Bin.__init__ (self)
        self._orientation = ORIENTATION_HORIZONTAL

    def set_orientation (self, orientation=ORIENTATION_HORIZONTAL):
        """P.set_orientation (...) -&gt; None

        Sets the orientation of the attached child.
        """
        if orientation not in ORIENTATION_TYPES:
            raise ValueError("orientation must be a value of ORIENATION_TYPES")
        self._orientation = orientation
        self.dirty = True

    def draw_bg (self):
        width, height = self.padding, self.padding
        cls = self.__class__

        if self.child:
            width += self.child.width
            height += self.child.height
            if self.orientation == ORIENTATION_VERTICAL:
                # Swap width and height on demand
                width, height = height, width

        # Guarantee the set minimum and maximum sizes.
        width, height = self.check_sizes (width, height)
        surface = base.GlobalStyle.engine.draw_rect (width, height, self.state,
                                                     cls, self.style)
        return surface
    
    def draw (self):
        """Draws the PivotBin and its child according to the set orientation."""
        Bin.draw (self)
        if self.child:
            rect = self.image.get_rect ()
            self.child.center = rect.center
            if self.orientation == ORIENTATION_VERTICAL:
                # Rotate the child image on demand.
                image = pygame.transform.rotate (self.child.image, 90)
                rotate_rect = image.get_rect ()
                rotate_rect.center = rect.center
                self.image.blit (image, rotate_rect)
            else:
                self.image.blit (self.child.image, self.child.rect)

    orientation = property (lambda self: self._orientation,
                            lambda self, var: self.set_orientation (var),
                            doc = "The orientation of the child.")

def rotate_bin (bin, button):
    # Set the Bin orientation and replace the button.
    if bin.orientation == ORIENTATION_HORIZONTAL:
        bin.orientation = ORIENTATION_VERTICAL
    else:
        bin.orientation = ORIENTATION_HORIZONTAL
    button.topleft = bin.left, bin.bottom + 10

if __name__ == "__main__":
    bin = PivotBin ()
    bin.topleft = 10, 10
    bin.child = Label ("Simple label in PivotBin")

    button = Button ("Switch orientation")
    button.topleft = bin.left, bin.bottom
    button.connect_signal (SIG_CLICKED, rotate_bin, bin, button)
    
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (300, 300)
    re.title = "Bin implementation example"
    re.color = (234, 228, 223)
    re.add_widget (bin, button)

    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 35. Bin example</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_container"></a>Container</h3></div></div></div><p>
        The abstract <code class="classname">Container</code> widget class is
        similar to the <code class="classname">Bin</code> class, except that it
        can hold more than one widget.
      </p><p>
        As well as with the <code class="classname">Bin</code>, you usually will
        not create a <code class="classname">Container</code> object directly,
        but inherit from it in your own class.
      </p><p>
        The children can be added using
        <code class="methodname">add_child()</code>, which allows to add
        multiple children at once, or
        the <code class="methodname">insert_child()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
# Add a single child.
container.add_child (label1)

# Add multiple children at once.
container.add_child (label1, button1, label2, entry1)

# Insert a child at a specific position
container.insert_child (1, entry2)
        </pre></div>
        Dependant on the <code class="classname">Container</code>
        implementation, <code class="methodname">insert_child()</code> can
        cause the inserted child to appear at a specific position.
      </p><p>
      The removal of children can be done with one widget at a time only
      using the <code class="classname">remove_child()</code> method of the
      <code class="classname">Container</code>.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
# Only one child can be removed at a time.
container.remove_child (button1)
        </pre></div>
      </p><p>
        You also can set the children directly using the
        <span class="property">children</span> attribute. The
        <code class="classname">Container</code> will remove all its children
        first and then add the new list of widgets. Simply setting the
        <span class="property">children</span> to None will remove all the
        widgets of the <code class="classname">Container</code>.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
# Set a list of widgets as children of a container.
container.children = [label1, button1, entry1]

# Remove all children of the container.
container.children = None
        </pre></div>
      </p><p>
        Besides the <span class="property">padding</span> attribute, which was
        already explained in <a href="#widgets_bin" title="Bin">the section called &#8220;Bin&#8221;</a> the
        <code class="classname">Container</code> has a
        <span class="property">spacing</span> attribute, which indicates the
        pixel amount to place between its children.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
container.spacing = 10
        </pre></div>
        The <code class="classname">Frame</code> examples in the later section
        will show you possible concrete results.
      </p><p>
        <span class="emphasis"><em>TODO: provide implementation examples</em></span>
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_box"></a>Box</h3></div></div></div><p>
        The <code class="classname">Box</code> widgets are
        <code class="classname">Container</code>s which allow an absolute
        placement of their attached children. This enables you to let
        widgets overlap or place them next o each other according to
        your needs while keeping them relative to other widgets without
        extensive position calculations. You could e.g. place a
        <code class="classname">Box</code> into a <code class="classname">Frame</code>
        so that the contents of the <code class="classname">Box</code> are
        aligned relative to other widgets of the
        <code class="classname">Frame</code> while being positioned exactly as
        you need.
      </p><p>
        To create a <code class="classname">Box</code> you have to call its
        constructor with the size it should occupy.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
box = Box (100, 100)
        </pre></div>
        Now widgets can be added to it using the typical
        <code class="classname">Container</code> methods. The topleft
        coordinates of the attached widgets are used to position them
        within the Box. Thus a <code class="classname">Button</code> with the
        <span class="property">topleft</span> value of 10, 10 will be placed 10
        pixels from the topleft corner of the <code class="classname">Box</code>.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
box = Box (100, 100)
button = Button ("A Button")
button.topleft = 10, 10
box.add_child (button)
        </pre></div>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The <code class="classname">Box</code> widget class does not make use
          of the <span class="property">padding</span> and
          <span class="property">spacing</span> attributes of its
          <code class="classname">Container</code> parent class. It also does
          not resize itself, when a widget leaves its visible area or
          occupies more space than the <code class="classname">Box</code>.
        </p></div><p>
        Below you will find an example to illustrate most of the
        abilities of the <code class="classname">Box</code> widget
        classes. You do not need to care about other widgets like the
        <code class="classname">VFrame</code> class for now as those are
        explained later on.
      </p><div class="example"><a name="ex_gui_box"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/box.py</code>.
        </p><a class="indexterm" name="id2592001"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Box examples.
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *
    
def create_box_view ():
    frame = VFrame (Label ("Box example"))
    frame.topleft = 10, 10

    # The Box with 200x200 pixels in size.
    box = Box (200, 200)

    # Widgets to place into it.
    label = ImageLabel ("image.png")
    label.topleft = 10, 10

    button = Button ("A Button")
    button.topleft = 30, 30

    frame1 = VFrame (Label ("A VFrame"))
    frame1.add_child (Label ("Label in the VFrame"))
    frame1.topleft = 60, 80

    chk = CheckButton ("A CheckButton")
    chk.topleft = 130, 110

    box.children = label, button, frame1, chk
    frame.add_child (box)

    return frame

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (300, 300)
    re.title = "Box examples"
    re.color = (234, 228, 223)
    re.show_layer_info = True
    re.add_widget (create_box_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 36. Box example</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_frame"></a>Frames</h3></div></div></div><p>
        <code class="classname">Frame</code> widgets are
        <code class="classname">Container</code>s, that support drawing a
        decorative border and title widget around their children. The
        basic <code class="classname">Frame</code> class is an abstract class,
        which defines the common attributes and methods for its
        inheritors, while the <code class="classname">HFrame</code> and
        <code class="classname">VFrame</code> widgets are concrete
        implementations, that place their children horizontally or
        vertically. Both subclasses only differ in the placing behaviour
        of their widgets and the basic aligning possibilities, so that,
        if not stated otherwise, the following examples always apply to
        both widget types, although the <code class="classname">HFrame</code> is
        used.
      </p><p>
        The creation of a <code class="classname">HFrame</code> is done using
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
frame = HFrame ()
frame = HFrame (widget)
        </pre></div>
        The difference between both is, that the first constructor does
        not set up a title widget for the
        <code class="classname">Frame</code>. The title widget can be any valid
        <code class="classname">BaseWidget</code> subclass and typically be
        placed at the topleft corner of the
        <code class="classname">Frame</code>. If no title widget is supplied, a
        complete border will be drawn around the
        <code class="classname">Frame</code>, while a set title widget will
        discontinue that border at the topleft corner.  You can change
        or set the title widget at any later time. A few possibilities
        should be shown here.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
frame = HFrame (Label ("A title label"))
frame.widget = Button ("Button as frame title")
frame.set_widget (VFrame (Label ("Frame in a frame")))
        </pre></div>
      </p><p>
        To adjust the look of the <code class="classname">Frame</code>, it is
        possible to change its border style using the
        <span class="property">border</span> attribute
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
frame.border = BORDER_NONE
frame.set_border (BORDER_SUNKEN)
        </pre></div>
        and to change the alignment of its packed children using the
        <span class="property">align</span> attribute.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
frame.align = ALIGN_TOP
frame.align = ALIGN_LEFT
        </pre></div>
        Here a diversion between the <code class="classname">HFrame</code> and
        <code class="classname">VFrame</code> has to be made, because each one
        only supports a subset of the alignment possibilities. The
        <code class="classname">HFrame</code> widget natively supports aligning
        its children at the top or bottom only
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
hframe.align = ALIGN_TOP
hframe.set_align (ALIGN_BOTTOM)
        </pre></div>
        while the <code class="classname">VFrame</code> supports only the left
        and right alignment.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
vframe.align = ALIGN_LEFT
vframe.set_align (ALIGN_RIGHT)
        </pre></div>
        Both use no alignment (ALIGN_NONE) by default, which causes
        their children to be centered relatively to each other.
      </p><p>
        Below you will find an example to illustrate most of the
        abilities of the <code class="classname">Frame</code> widget
        classes. You do not need to care about other widgets like the
        <code class="classname">Table</code> class for now as those are
        explained later on.
      </p><div class="example"><a name="ex_gui_frame"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/frame.py</code>.
        </p><a class="indexterm" name="id2592149"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Frame examples.
import os
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def create_frame_view ():
    table = Table (2, 3)
    table.topleft = 5, 5
    table.spacing = 5
    
    # Create and display two 'standard' frames.
    hframe = HFrame (Label ("Horizontal Frame"))
    table.add_child (0, 0, hframe)

    lbl = Label ("Vertical Frame" + os.linesep + "with 5 px spacing")
    lbl.multiline = True
    vframe = VFrame (lbl)
    vframe.spacing = 5
    table.add_child (0, 1, vframe)
    
    for i in xrange(3):
        btn = Button ("Button %d" % i)
        hframe.add_child (btn)
        btn2 = Button ("Button %d" % i)
        vframe.add_child (btn2)

    # Create framed frames.
    framed1 = VFrame (Label ("VFrame"))
    framed2 = HFrame ()
    framed3 = VFrame (Label ("VFrame as HFrame.widget"))
    framed3.add_child (Label ("Child of a VFrame"))
    framed2.widget = framed3
    framed2.add_child (Button ("Button 1"), Button ("Button 2"))
    button = Button ("Simple Button")
    framed1.add_child (framed2, button)
    table.add_child (1, 0, framed1)

    # Create a Frame with alignment.
    frame_align = VFrame (Label ("VFrame with right alignment"))
    frame_align.align = ALIGN_RIGHT
    label1 = Label ("Label")
    label2 = Label ("Even longer label")
    button = CheckButton ("A CheckButton")
    frame_align.add_child (label1, label2, button)
    table.add_child (1, 1, frame_align)

    # Add insensitive frames.
    hframe = HFrame (Label ("Insensitive HFrame"))
    hframe.sensitive = False
    table.add_child (0, 2, hframe)
    
    vframe = VFrame (Label ("Insensitive VFrame"))
    vframe.sensitive = False
    table.add_child (1, 2, vframe)
    
    for i in xrange(3):
        btn = Button ("Button %d" % i)
        hframe.add_child (btn)
        btn2 = Button ("Button %d" % i)
        vframe.add_child (btn2)
   
    return table

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (600, 300)
    re.title = "Frame examples"
    re.color = (234, 228, 223)
    re.add_widget (create_frame_view ())

    # Start the main rendering loop.
    re.start ()

</pre></div></div><p class="title"><b>Example 37. Frame example</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_table"></a>Table</h3></div></div></div><p>
        <code class="classname">Table</code> widgets, which inherit from the
        <code class="classname">Container</code> class, allow a table-like
        placement of their children in rows and columns. The children
        can be placed in the table cells and each cell supports an
        individual alignment.
      </p><p>
        The <code class="classname">Table</code> constructor expects the row and
        column dimensions to set up for the table, so that
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
table = Table (2, 2)
table2 = Table (3, 5)
        </pre></div>
        would create two tables. The first would be a quadratic one with
        two rows, of which each serves two columns, which allows to
        place four children in it, the second sets up three rows with 5
        columns in each of it allowing to hold up to fifteen children.
      </p><p>
        Adding children is different from the usual
        <code class="classname">Container</code> methods. The
        <code class="classname">Table</code> needs the additional information,
        in which cell to place the child. Thus instead of using
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
table.add_child (child_widget1, child_widget2) # This does not work!
        </pre></div>
        you have to add children by identifying the row and column to
        place them into.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
table.add_child (row, column, child_widget1)
table.add_child (row1, column1, child_widget2)
        </pre></div>
        Removing children from the <code class="classname">Table</code> in
        contrast works in the same way you already learned about in
        <a href="#widgets_container" title="Container">the section called &#8220;Container&#8221;</a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Assigning the <span class="property">children</span> attribute of the
          <code class="classname">Table</code> with a list of widgets adds the
          children row for row to it.
        </p></div><p>
        As said above, each cell of the <code class="classname">Table</code>
        supports using an own alignment, which can be set with the
        <code class="methodname">set_align()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
table.set_align (0, 1, ALIGN_TOP)
table.set_align (1, 1, ALIGN_LEFT)
        </pre></div>
        Different alignments can be combined, although not any case
        makes sense and some alignment combinations conflict with each
        other. Thus the table uses a different aligning priority, which
        is explained in detail in the <code class="classname">Table</code>
        documentation.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
# Aligning the child at the topleft.
table.set_align (0, 1, ALIGN_TOP | ALIGN_LEFT)

# Conflicting alignments, thus using the higher priority of ALIGN_TOP.
table.set_align (0, 1, ALIGN_TOP | ALIGN_BOTTOM)

# Again a conflict. ALIGN_NONE has the lowest priority, thus it will be
# left aligned.
table.set_align (0, 1, ALIGN_LEFT | ALIGN_NONE)
        </pre></div>
        Two additional methods allow you to align a complete column or
        row using a specific alignment value.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
table.set_row_align (row, alignment)
table.set_column_align (column, alignment)
        </pre></div>
      </p><p>
        Below you will find an example to illustrate most of the
        abilities of the <code class="classname">Table</code> widget class.
      </p><div class="example"><a name="ex_gui_table"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/table.py</code>.
        </p><a class="indexterm" name="id2592486"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Table examples.
from ocempgui.widgets import Renderer, Table, Label, Button
from ocempgui.widgets.Constants import *

def create_table_view ():
    # Crate and display a Table.
    table = Table (9, 2)
    table.spacing = 5
    table.topleft = 5, 5

    label = Label ("Nonaligned wide Label")
    table.add_child (0, 0, label)
    table.add_child (0, 1, Button ("Simple Button"))

    label = Label ("Top align")
    table.add_child (1, 0, label)
    table.set_align (1, 0, ALIGN_TOP)
    table.add_child (1, 1, Button ("Simple Button"))

    label = Label ("Bottom align")
    table.add_child (2, 0, label)
    table.set_align (2, 0, ALIGN_BOTTOM)
    table.add_child (2, 1, Button ("Simple Button"))
    
    label = Label ("Left align")
    table.add_child (3, 0, label)
    table.set_align (3, 0, ALIGN_LEFT)
    table.add_child (3, 1, Button ("Simple Button"))
    
    label = Label ("Right align")
    table.add_child (4, 0, label)
    table.set_align (4, 0, ALIGN_RIGHT)
    table.add_child (4, 1, Button ("Simple Button"))

    label = Label ("Topleft align")
    table.add_child (5, 0, label)
    table.set_align (5, 0, ALIGN_TOP | ALIGN_LEFT)
    table.add_child (5, 1, Button ("Simple Button"))

    label = Label ("Topright align")
    table.add_child (6, 0, label)
    table.set_align (6, 0, ALIGN_TOP | ALIGN_RIGHT)
    table.add_child (6, 1, Button ("Simple Button"))

    label = Label ("Bottomleft align")
    table.add_child (7, 0, label)
    table.set_align (7, 0, ALIGN_BOTTOM |ALIGN_LEFT)
    table.add_child (7, 1, Button ("Simple Button"))

    label = Label ("Bottomright align")
    table.add_child (8, 0, label)
    table.set_align (8, 0, ALIGN_BOTTOM |ALIGN_RIGHT)
    table.add_child (8, 1, Button ("Simple Button"))

    return table

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (250, 350)
    re.title = "Table examples"
    re.color = (234, 228, 223)
    re.add_widget (create_table_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 38. Table example</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_scrolledwindow"></a>ScrolledWindow</h3></div></div></div><p>
        <code class="classname">ScrolledWindow</code> widgets are
        <code class="classname">Bin</code> widgets that add scrolling abilities
        to their attached child. This is extremely useful for
        situations, in which the widget to scroll should not exceed a
        specific size, but has to display all of its data. Putting such
        a widget in a <code class="classname">ScrolledWindow</code> allows you
        to respect this specific size, while the widget can grow as it
        wants.
      </p><p>
        You create a <code class="classname">ScrolledWindow</code> using
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
window = ScrolledWindow (width, height)
        </pre></div>
        where <em class="parameter"><code>width</code></em> and
        <em class="parameter"><code>height</code></em> denote values for the
        <span class="property">size</span> attribute of the
        <code class="classname">ScrolledWindow</code>. The newly created
        <code class="classname">ScrolledWindow</code> will not exceed this size
        by default.
      </p><p>
        The widget, which needs to be scrolled is packed into the
        <code class="classname">ScrolledWindow</code> the usual
        <code class="classname">Bin</code> way.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
window.child = widget_to_scroll
        </pre></div>
      </p><p>
        To allow a flexibly scrolling behaviour, you can adjust the
        <span class="property">scrolling</span> attribute to make the
        <code class="classname">ScrolledWindow</code> automatic scrolling,
        always scrolling or never scrolling.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
window.scrolling = SCROLL_ALWAYS
window.scrolling = SCROLL_NEVER
window.scrolling = SCROLL_AUTO
        </pre></div>
        This setting influences the visibility of the both
        <code class="classname">ScrollBar</code> controls attached to the window
        and is described in details in the
        <code class="methodname">set_scrolling()</code> method documentation.
      </p><p>
        You also can influence the scrollbars of the
        <code class="classname">ScrolledWindow</code> programmatically.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
window.vscrollbar.value = 0
window.hscrollbar.value = window.vscrollbar.maximum
       </pre></div>
       The above code would cause the
       <code class="classname">ScrolledWindow</code> to scroll to the topright
       of its attached child.
      </p><p>
        The <code class="classname">ScrolledWindow</code> widget natively
        listens to two signals to support better navigation
        possibilities. Those are
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              SIG_MOUSEDOWN - Invoked, when a mouse button is pressed
              down on the ScrolledWindow.
            </p></li><li><p>SIG_KEYDOWN - Invoked, when a key gets pressed.</p></li></ul></div><p>
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_scrolledlist"></a>ScrolledList</h3></div></div></div><p>
        The <code class="classname">ScrolledList</code> widget class can be used
        to display and manage collections in a list-style look and
        feel. Technically it is a <code class="classname">ScrolledWindow</code>,
        which holdes a <code class="classname">ListViewPort</code> that takes
        care of displaying the list contents.
      </p><p>
        As the <code class="classname">ScrolledWindow</code> the
        <code class="classname">ScrolledList</code> supports different scrolling
        types and anything else, while the keyboard and mouse behaviour
        differ slightly to match the needs of list browsing.
      </p><p>
        To create a <code class="classname">ScrolledList</code> you have to
        supply the sizing dimensions and an optional collection, which
        makes up the contents.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
scrolledlist = ScrolledList (width, height, collection=None)
        </pre></div>
        If the collection is not specified, a basic
        <code class="classname">ListItemCollection</code> (explained later)
        object is automatically bound to it. The
        <code class="classname">ScrolledList</code> however only accepts
        collections, which inherit from the
        <code class="classname">ListItemCollection</code>.
      </p><p>
        Items can be added and removed dynamically to the list using the
        <span class="property">items</span> property.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
for no in xrange (10):
    scrolledlist.items.append (TextListItem ("Item no. %d" % no))

# Last one was too much.
scrolledlist.items.remove (scrolledlist.items[-1])
        </pre></div>
        The bound <code class="classname">ListItemCollection</code> wraps a list
        and fully supports all important operations of, including
        slicing, indexed item access and sorting. More details about the
        <code class="classname">ListItemCollection</code> can be found in <a href="#components_listitemcollection" title="ListItemCollection">the section called &#8220;ListItemCollection&#8221;</a>.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_filelist"></a>FileList</h3></div></div></div><p>
        The <code class="classname">FileList</code> widget is useful to display
        filesystem contents in a list-style manner. It supports the
        distinction between different filetypes through the
        <code class="classname">FileListItem</code> item type and allows you to
        browse filesystem contents.
      </p><p>
        As the <code class="classname">ScrolledList</code>, from which the
        <code class="classname">FileList</code> inherits, you need to pass the
        size dimensions it should occupy and optionally the initial
        starting directory to list the contents of.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
filelist = FileList (200, 400, "/usr/home")
        </pre></div>
        If the initial directory remains unset, the
        <code class="classname">FileList</code> will list the contents of the
        current directory as set in <code class="methodname">os.curdir</code>.
      </p><p>
        It allows to list directories programmatically through the
        <span class="property">directory</span> attribute and
        <code class="methodname">set_directory()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
filelist.directory = "C:\"
filelist.set_directory ("/tmp")
        </pre></div>
        If the user however has not the correct access rights for a
        specific directory, the <code class="classname">FileList</code> will not
        list it, but instead provide an acoustic signal using
        <code class="code">print "\a"</code>.
      </p><p>
        The <code class="classname">FileList</code> additionally supports the
        SIG_DOUBLECLICKED signal to allow changing directories
        interactively. Of course own methods can be bound to it.
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="windows_and_dialogs"></a>Windows and Dialogs</h2></div></div></div><p>
      The windows of <code class="classname">ocempgui.widgets</code> are
      containers, that have an own caption bar, can be moved within the
      main pygame window and allow the user to collapse them to their
      caption bar. They can be drawn on top of other widgets by
      adjusting their <span class="property">depth</span> attribute as already
      explained in <a href="#widgets_basewidget" title="Common widget operations - the BaseWidget">the section called &#8220;Common widget operations - the BaseWidget&#8221;</a>.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_window"></a>Window</h3></div></div></div><p>
        The base for all the different window types is the
        <code class="classname">Window</code> class. It is a
        <code class="classname">Bin</code> container with the additional
        ability to collapse itself to its caption bar.
      </p><p>
        To create a <code class="classname">Window</code> you can simply call
        its constructor and provide an optional title text, that will be
        used as caption.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
window = Window ("My new window")
        </pre></div>
      </p><p>
        The title can be retrieved or set at any later time with the
        <span class="property">title</span> attribute.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
window.title = "A new title!"
        </pre></div>
      </p><p>
        As already mentioned above, the <code class="classname">Window</code>
        allows the user to minimize it (and of course restore it), which
        is also possible in your own code.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
if not window.minimized:
    window.minimize (True)
        </pre></div>
        By overriding the <code class="methodname">minimize()</code> method you
        can prevent the user from doing so, if you do not want it for a
        certain window.
      </p><p>
        You can align the child of the window using the
        <span class="property">align</span> attribute. Different alignments can
        be combined, although not any case makes sense and some
        alignment combinations conflict with each other.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
# Align the child at the top.
window.align = ALIGN_TOP

# Align the child at the bottom left.
window.align = ALIGN_BOTTOM | ALIGN_LEFT

# Invalid alignment, ALIGN_BOTTOM has a higher priority, thus
# the child will be aligned at the bottom.
window.align = ALIGN_TOP | ALIGN_BOTTOM
        </pre></div>
        Thus the <code class="classname">Window</code> uses an aligning
        priority, which is explained in detail in the
        <code class="classname">Window</code> documentation.
      </p><p>
        The <code class="classname">Window </code> widget by default listens to
        the following signals:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              SIG_MOUSEDOWN - Invoked, when a mouse button is pressed
              down on the Window.
            </p></li><li><p>
              SIG_MOUSEUP - Invoked, when a mouse button is released on
              the Window.
            </p></li><li><p>
              SIG_MOUSEMOVE - Invoked, when the mouse moves over the
              Window area.
            </p></li></ul></div><p>
      </p><p>
        Below you will find an example of the
        <code class="classname">Window</code> widget class. You do not need to
        care about the <code class="classname">DialogWindow</code> class for now
        as this is explained in the next section.
      </p><div class="example"><a name="ex_gui_window"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/window.py</code>.
        </p><a class="indexterm" name="id2592992"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Window examples.
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def _destroy_dialog (window):
    window.child.text = "#Close"
    
def create_window_view ():
    # Create and display a simple window.
    window = Window ("Simple window")
    window.child = Button ("#Not clickable")
    window.child.connect_signal (SIG_CLICKED, window.destroy)
    window.topleft = 5, 5
    window.depth = 1
    
    # Create dialog window.
    dialog = DialogWindow ("Modal dialog window")
    dialog.child = Button ("#Close first to use other widgets")
    dialog.child.connect_signal (SIG_CLICKED, _destroy_dialog, window)
    dialog.child.connect_signal (SIG_CLICKED, dialog.destroy)
    dialog.topleft = 100, 5
    dialog.depth = 2
    
    return window, dialog

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (400, 200)
    re.title = "Window examples"
    re.color = (234, 228, 223)
    re.show_layer_info = True
    re.add_widget (*create_window_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 39. Window example</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_dialogwindow"></a>DialogWindow</h3></div></div></div><p>
        The <code class="classname">DialogWindow</code> is a modal
        <code class="classname">Window</code> widget, that grabs all events that
        are sent through the event manager it is attached to. The user
        will not be able to interact with other event capable elements
        until the <code class="classname">DialogWindow</code> is
        destroyed. Widgets, that are attached to it of course will still
        be notified.
      </p><p>
        The <code class="classname">DialogWindow</code> does not offer any new
        features besides those it incorporates from its parent
        class(es). To create a new <code class="classname">DialogWindow</code>
        you use the same constructor syntax as for the
        <code class="classname">Window</code>.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
window = DialogWindow ("A new DialogWindow")
        </pre></div>
      </p><p>
        You can find an example of the
        <code class="classname">DialogWindow</code> in <a href="#ex_gui_window" title="Example 39. Window example">Example 39, &#8220;Window example&#8221;</a>.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_genericdialog"></a>GenericDialog</h3></div></div></div><p>
        It is often needed to know about how the user interacted with a
        certain dialog. Creating various <code class="classname">Buttons</code>
        with different callbacks or one callback, in which the buttons
        are distinguished is of course possible, but finding a safe
        distinction mode is a more complex task. You might argue, that
        you could check the text of the <code class="classname">Button</code>,
        but that only will work, if you do not want to offer localized
        version of you program.
      </p><p>
        To circumvent this and other issues the
        <code class="classname">GenericDialog</code> widget class was created.
        It allows you to associate different states with the buttons you
        want to place on it.
      </p><p>
        To create a <code class="classname">GenericDialog</code> you have to
        pass two lists to its constructor, one containing the
        <code class="classname">Button</code> widgets you want to display and one
        with the result states to associate with.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
list1 = [Button ("OK"), Button("Cancel")]
list2 = [DLGRESULT_OK, DLGRESULT_CANCEL]
dialog = GenericDialog ("Title", list1, list2)
        </pre></div>
        The order of the elements in both list is of value as this will
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              influence the order of the buttons from left to right,
            </p></li><li><p>influence the results of the buttons.</p></li></ul></div><p>
        This means, that the first <code class="classname">Button</code> in the
        list will be displayed at the leftmost of all other
        <code class="classname">Buttons</code>, while it will be associated with
        the first item of the result list.
      </p><p>
        To allow a more flexible button and result behaviour (as needed
        in wizard dialogs for example), you can place new buttons and
        results at runtime on the dialog.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
newlist1 = [Button ("Close"), Button ("Help")]
newlist2 = [DLGRESULT_CLOSE, DLGRESULT_USER]
dialog.set_buttons (newlist1, newlist2)
        </pre></div>
      </p><p>
        Now all you have to do is to connect your
        <code class="classname">GenericDialog</code> with a callback for the
        SIG_DIALOGRESPONSE signal, it listens to.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
def my_callback (result, dlg):
    if result == DLGRESULT_CLOSE:
        dlg.destroy ()
    elif result == DLGRESULT_USER:
        ...

dialog,connect_signal (SIG_DIALOGRESPONSE, my_callback, dialog)
        </pre></div>
        As you can see in the above example, this kind of dialog will
        not destroy itself, but instead has to be destroyed
        programmatically.
      </p><p>
        To place your own widgets and contents in the dialog, you can
        use the <span class="property">content</span> attribute, which is a
        <code class="classname">VFrame</code>.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
label1 = Label ("Label 1")
entry = Entry ("Hello world")
dialog.content.add_child (label1, entry)
...
        </pre></div>
        All said about the <code class="classname">Frame</code> widget type
        applies to this one, too.
      </p><p>
        Below you will find an example of the
        <code class="classname">GenericDialog</code> widget class.
      </p><div class="example"><a name="ex_gui_genericdialog"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/genericdialog.py</code>.
        </p><a class="indexterm" name="id2593180"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># GenericDialog examples.
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def _close (result, dialog, label):
    if result == DLGRESULT_OK:
        label.text = "You pressed OK!"
    elif result == DLGRESULT_CANCEL:
        label.text = "You pressed Cancel!"
    elif result == DLGRESULT_CLOSE:
        dialog.destroy ()

def create_dialog_view ():
    buttons = [Button ("#OK"), Button ("#Cancel"), Button ("Clo#se")]
    results = [DLGRESULT_OK, DLGRESULT_CANCEL, DLGRESULT_CLOSE]
    dialog = GenericDialog ("Generic dialog", buttons, results)
    lbl = Label ("Press the buttons to see the action.")
    dialog.content.add_child (lbl)
    dialog.connect_signal (SIG_DIALOGRESPONSE, _close, dialog, lbl)
    dialog.topleft = 30, 30
    dialog.depth = 1
    return dialog

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (300, 300)
    re.title = "GenericDialog examples"
    re.color = (234, 228, 223)
    re.add_widget (create_dialog_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 40. GenericDialog example</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_filedialog"></a>FileDialog</h3></div></div></div><p>
        The <code class="classname">FileDialog</code> widget allows the user to
        choose files and directories from a
        <code class="classname">FileList</code> and can return those easily by a
        corresponding method. It also includes an
        <code class="classname">Entry</code> widget at the top, which keeps
        track of the current location and lets the user change the
        directory path quickly.
      </p><p>
        To create a <code class="classname">FileDialog</code> you have would
        type something like
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
dialog = FileDialog ("Select a file...", [Button ("OK")], [DLGRESULT_OK])
        </pre></div>
        The first argument provides the title of the dialog, while the
        next two ones take the buttons and results for the dialog as
        already explained in <a href="#widgets_genericdialog" title="GenericDialog">the section called &#8220;GenericDialog&#8221;</a>. There is also an optional
        last argument, which can set the initial directory to list as
        explained in <a href="#widgets_filelist" title="FileList">the section called &#8220;FileList&#8221;</a>.
      </p><p>
        The selected file and directory entries can be received easily
        using the <code class="methodname">get_filenames()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
selection = dialog.get_filenames()
        </pre></div>
        The selection entries will contain the
        <span class="emphasis"><em>absolute</em></span> path to those filenames.
      </p><p>
        Below you will find an example of the
        <code class="classname">FileDialog</code> widget class.
      </p><div class="example"><a name="ex_gui_filedialog"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/filedialog.py</code>.
        </p><a class="indexterm" name="id2593340"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># FileDialog examples.
import os
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def _set_files (result, dialog, entry):
    string = ""
    if result == DLGRESULT_OK:
        string = "".join(["\"%s\" " % f for f in dialog.get_filenames ()])
    else:
        string = "Nothing selected"
    dialog.destroy ()
    entry.text = string
    
def _open_filedialog (renderer, entry):
    buttons = [Button ("#OK"), Button ("#Cancel")]
    buttons[0].minsize = 80, buttons[0].minsize[1]
    buttons[1].minsize = 80, buttons[1].minsize[1]
    results = [DLGRESULT_OK, DLGRESULT_CANCEL]

    dialog = FileDialog ("Select your file(s)", buttons, results)
    dialog.depth = 1 # Make it the top window.
    dialog.topleft = 100, 20
    dialog.filelist.selectionmode = SELECTION_MULTIPLE
    dialog.connect_signal (SIG_DIALOGRESPONSE, _set_files, dialog, entry)
    renderer.add_widget (dialog)

def create_file_view (renderer):
    table = Table (1, 2)
    
    hframe = HFrame (Label ("FileList"))
    hframe.add_child (FileList (200, 200))
    table.add_child (0, 0, hframe)
    
    hframe2 = HFrame (Label ("FileDialog"))
    label = Label ("Selection:")
    entry = Entry ()
    entry.minsize = 200, entry.minsize[1]
    button = Button ("#Browse")
    button.connect_signal (SIG_CLICKED, _open_filedialog, renderer, entry)
    hframe2.add_child (label, entry, button)
    table.add_child (0, 1, hframe2)
    
    table.set_row_align (0, ALIGN_TOP)
    return table

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (550, 300)
    re.title = "FileDialog examples"
    re.color = (234, 228, 223)
    re.add_widget (create_file_view (re))
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 41. FileDialog example</b></p></div><br class="example-break"></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="misc_widgets"></a>Miscellaneous Widgets</h2></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_imagemap"></a>ImageMap</h3></div></div></div><p>
        The <code class="classname">ImageMap</code> is a widget, that can
        display any type of image, pygame can handle, and supports
        different mouse events.
      </p><p>
        In contrast to the <code class="classname">ImageButton</code> it does
        not react visually upon those events, but can store the last
        event, that occured as well as providing the relative position
        coordinates of the event.
      </p><p>
        To create an <code class="classname">ImageMap</code>, you have to
        provide an image surface or filename similar to the
        <code class="classname">ImageButton</code> constructor.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
imagemap = ImageMap ("path/to/an/image.png")
imagemap = ImageMap (pygame_surface)
        </pre></div>
        Of course the image can be changed at any time using the
        <span class="property">picture</span> attribute or
        <code class="methodname">set_picture()</code> method.
      </p><p>
        Below you will find an example of the
        <code class="classname">ImageMap</code> widget class.
      </p><div class="example"><a name="ex_gui_imagemap"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/imagemap.py</code>.
        </p><a class="indexterm" name="id2593428"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># ImageMap examples.
import os
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def _get_type (eventtype):
    if eventtype == SIG_MOUSEDOWN:
        return "SIG_MOUSEDOWN"
    elif eventtype == SIG_MOUSEUP:
        return "SIG_MOUSEUP"
    elif eventtype == SIG_MOUSEMOVE:
        return "SIG_MOUSEMOVE"
    else:
        return "Unknown signal"

def _got_mouseevent (event, imagemap, labels):
    labels[0].text = "Signal: %s" % _get_type (imagemap.last_event.signal)
    if imagemap.last_event.signal != SIG_MOUSEMOVE:
        labels[1].text = "Button: %d" % imagemap.last_event.data.button
    else:
        labels[1].text = "Button: None"
    labels[2].text = "Event pos: %s" % str (imagemap.last_event.data.pos)
    labels[3].text = "Rel. pos: %s" % str (imagemap.relative_position)

def _create_vframe (text):
    frame = VFrame (Label (text))
    frame.spacing = 5
    frame.align = ALIGN_LEFT
    return frame

def create_imagemap_view ():
    frm_map = _create_vframe ("ImageMap")

    imagemap = ImageMap ("image.png")
    
    lbl_desc = Label ("Move the mouse over the ImageMap and" + os.linesep +
                      "press the mouse buttons to interact with it.")
    lbl_desc.multiline = True
    
    lbl_results = [Label ("Signal:"), Label ("Button:"), Label ("Event pos:"),
                   Label ("Rel. pos:")]
    for label in lbl_results:
        label.create_style()["fgcolor"][STATE_NORMAL] = (255, 0, 0)
    imagemap.connect_signal (SIG_MOUSEDOWN, _got_mouseevent, imagemap,
                             lbl_results)
    imagemap.connect_signal (SIG_MOUSEMOVE, _got_mouseevent, imagemap,
                             lbl_results)
    imagemap.connect_signal (SIG_MOUSEUP, _got_mouseevent, imagemap,
                             lbl_results)

    frm_map.add_child (imagemap, lbl_desc, *lbl_results)
    return frm_map

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (250, 220)
    re.title = "ImageMap examples"
    re.color = (234, 228, 223)
    re.add_widget (create_imagemap_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 42. ImageMap example</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_progressbar"></a>ProgressBar</h3></div></div></div><p>
        The <code class="classname">ProgressBar</code> is a non-interactive
        widget class, that uses a horizontal bar to display operation
        efforts. Its value range reaches from 0.0 to 100.0.
      </p><p>
        To create a <code class="classname">ProgressBar</code> widget, you
        simply invoke its constructor with no arguments.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
bar = ProgressBar ()
        </pre></div>
      </p><p>
        Similar to the <code class="classname">Range</code> widget class, the
        <code class="classname">ProgressBar</code> supports the
        <span class="property">step</span> and
        <code class="methodname">set_step()</code> methods to set the step
        range for continouos increments/decrements
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
bar.step = 1.4
bar.set_step (10)

# Increment/decrement the bar value by the currently set step range.
while process_runs:
    bar.increment ()           # or bar.decrement ()
    ...
        </pre></div>
        as well as setting its current value directly using the
        <span class="property">value</span> attribute.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
bar.value = 50.0
        </pre></div>
      </p><p>
        You can optionally display a short amount of text centered on it,
        which can be set with the <span class="property">text</span> attribute or
        <code class="methodname">set_text()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
bar.text = "Processing data..."
bar.set_text ("Please wait...")
        </pre></div>
      </p><div class="example"><a name="ex_gui_progressbar"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/progressbar.py</code>.
        </p><a class="indexterm" name="id2593597"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># ProgressBar examples.
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def _update_bar (bar, button):
    if bar.value == 0:
        while bar.value &lt; 100:
            bar.increase ()
        button.text = "Clean the progressbar"
    else:
        while bar.value &gt; 0:
            bar.decrease ()
        button.text = "Fill the progressbar"

def _update_text (bar):
    bar.text = "%.2f" % bar.value + "%"

def _create_vframe (text):
    frame = VFrame (Label (text))
    frame.spacing = 5
    frame.align = ALIGN_LEFT
    return frame

def create_progressbar_view ():
    table = Table (1, 3)
    table.spacing = 5
    
    # Create and display a simple ProgressBar.
    frame = _create_vframe ("ProgressBar")
    progress = ProgressBar ()
    progress.step = 0.5

    # Create a button to start filling.
    btn = Button ("#Fill the ProgressBar")
    btn.connect_signal ("clicked", _update_bar, progress, btn)
    frame.add_child (progress, btn)
    table.add_child (0, 0, frame)

    # ProgressBar with text.
    frame = _create_vframe ("Progressbar with text")
    progress = ProgressBar ()
    progress.text = "0.00%"
    progress.step = 0.5
    progress.connect_signal (SIG_VALCHANGED, _update_text, progress)
                             
    # Create a button to start filling.
    btn = Button ("Fill the ProgressBar")
    btn.connect_signal ("clicked", _update_bar, progress, btn)
    frame.add_child (progress, btn)
    table.add_child (0, 1, frame)

    # Insensitive progressbar.
    frame = _create_vframe ("Insensitive Progressbar")
    progress = ProgressBar ()
    progress.value = 50.0
    progress.text = "50.00%"
    progress.sensitive = False
    frame.add_child (progress)
    table.add_child (0, 2, frame)
    
    return table

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (450, 150)
    re.title = "ProgressBar examples"
    re.color = (234, 228, 223)
    re.add_widget (create_progressbar_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 43. ProgressBar example</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_diagram"></a>Diagram</h3></div></div></div><p>
        The <code class="classname">Diagram</code> class is an abstract base
        class for Diagram like widgets such as the
        <code class="classname">Graph2D</code>. It provides interfaces to create
        statistical diagrams easily, be it graphs, bar and pie charts or
        whatever else.
      </p><p>
        You usually will not create an <code class="classname">Diagram</code>
        object directly, but rather use it as parent for your own
        classes.
      </p><p>
        TODO
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_graph2d"></a>Graph2D</h3></div></div></div><p>
        The <code class="classname">Graph2D</code> class allows you to plot
        two-diemensional graphs using a cartesian coordinate plane.
        You can choose the names of the axes, scale units and units to
        display and set up the evaluation function for plotting the graph
        freely.
      </p><p>
        To create a <code class="classname">Graph2D</code> widget, you simply invoke
        its constructor with the minimum size to occupy by the widget.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
graph = Graph2D (400, 400)
        </pre></div>
      </p><p>
        The default names of the axes are "x" and "y". They can be changed
        using the <span class="property">axes</span> attribute and
        <code class="methodname">set_axes</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
graph.axes = "t", "v" # Set velocity related to time.
graph.set_axes ("t", "v")
        </pre></div>
      </p><p>
        To set the scale units to display for the horizontal and vertical axis,
        the <span class="property">scale_units</span> attribute and
        <code class="methodname">set_scale_units()</code> method can be used.
        The first value is used for the horizontal, the second for the vertical
        axis.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
graph.scale_units = ("cm", "kp")
graph.set_scale_units ("cm", "kp")
        </pre></div>
      </p><p>
        To show or hide the scale units and axes names on the graph, the
        <span class="property">show_names</span> attribute and
        <code class="methodname">set_show_names</code> method are used.
        The names and units are usually diplayed on the right of the axes.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
graph.show_names = True # Show the names
graph.set_show_names (False) # Do not display them.
        </pre></div>
      </p><p>
        The distance from one unit to another can be set using the
        <span class="property">units</span> and <code class="methodname">set_units</code>
        method. The distance is given in pixels and defaults to 10 to 10.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
graph.units = 10, 25 # Set 10 px for the horizontal units, 25 for vertical
graph.set_units (10, 25)
        </pre></div>
      </p><p>
        You can rotate the graph clockwise by 90 degrees by adjusting the
        <span class="property">orientation</span> attribute. The default is a
        horizontal orientation.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
graph.orientation = ORIENTATION_VERTICAL # Rotate the graph
grap.set_orientation (ORIENTATION_HORIZONTAL)
        </pre></div>
        TODO
      </p><div class="example"><a name="ex_gui_graph2d"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/graph2d.py</code>.
        </p><a class="indexterm" name="id2593752"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Graph2D examples.
import sys, math
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *
try:
    import Numeric
except ImportError:
    Numeric = None
    try:
        import numpy
    except ImportError:
        print "Numeric or numpy could not be found"
        sys.exit (-1)

__function = "func_1"

def change(graph):
    global __function
    if __function == "func_1":
        graph.eval_func = lambda x: x / ((- 3 * x**2.0 + 2) * math.e**x)
        __function = "func_2"
    else:
        graph.eval_func = lambda x: x**4.0 - 3 * x**2.0 + 2 * x
        __function = "func_1"
    
def create_graph2d_view ():
    frame = VFrame (Label ("Graph2D"))
    frame.topleft = 10, 10

    # Create the graph.
    graph = Graph2D (400, 400)

    # Lock it, because we set some necessary information and want to
    # avoid excessive update() calls.
    graph.lock ()

    # Scale units for the x and y axis.
    graph.scale_units = ("cm", "kp")

    # Point of origin.
    graph.origin = 200, 200

    # We want to see negative values.
    graph.negative = True

    # The evaluation function and data to use.
    graph.eval_func = lambda x: x**4.0 - 3 * x**2.0 + 2 * x
    if Numeric:
        graph.data = Numeric.arrayrange (-10, 10, .001).tolist()
    else:
        graph.data = numpy.arange (-10, 10, .001).tolist()
    # Done, unlock.
    graph.unlock ()

    button = Button ("Change function")
    button.connect_signal (SIG_CLICKED, change, graph)
    
    frame.add_child (graph, button)
    
    return frame

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (450, 500)
    re.title = "Graph2D examples"
    re.color = (234, 228, 223)
    re.add_widget (create_graph2d_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 44. Graph2D example</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_statusbar"></a>StatusBar</h3></div></div></div><p>
        The <code class="classname">StatusBar</code> widget class can display various
        text information using a stack system as well as the current date and
        time. It also supports the placement of widgets on its area.
      </p><p>
        To create a new <code class="classname">StatusBar</code> widget, you simply
        invoke its constructor with no arguments.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
statusbar = StatusBar ()
        </pre></div>
      </p><p>
        To set set the current information to display, the
        <code class="methodname">push_tip()</code> method has to be used.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
statusbar.push_tip ("Display this tip")
        </pre></div>
        To remove the currently displayed information and to show the
        previous information the <code class="methodname">pop_tip()</code> method
        has to be used.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
statusbar.pop_tip ()
        </pre></div>
        The currently displayed information can be received using the
        <span class="property">current_tip</span> attribute or the
        <code class="methodname">get_current_tip()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
info = statusbar.current_tip
info = statusbar.get_current_tip()
        </pre></div>
      </p><p>
        To show or hide the information on the <code class="classname">StatusBar</code>
        the <span class="property">tips</span> attribute and
        <code class="methodname">show_tips</code> method are used.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
statusbar.tips = True
statusbar.show_tips (False)
        </pre></div>
        You also can show or hide the date to display using the
        <span class="property">date</span> attribute and
        <code class="methodname">show_date</code> method,
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
statusbar.date = True
statusbar.show_date (False)
        </pre></div>
      </p><p>
        You can supply your own date and time format string to customize
        the date output. The <span class="property">date_format</span> attribute and
        <code class="methodname">set_date_format()</code> method allow you to use
        python specific date format strings, which can be understood by
        python's <code class="methodname">datetime.strftime()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
statusbar.date_format = "%x"
statusbar.set_date_format ("%H:%M")
        </pre></div>
      </p><p>
        To get the currently displayed date and time, use the
        <span class="property">current_date</span> attribute. Its value matches
        the set <span class="property">date_format</span> attribute.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
date = statusbar.current_date
        </pre></div>
      </p><p>
        You can customize the size occupied by the displayed information
        and date using the <span class="property">tip_width</span> and
        <span class="property">date_width</span> properties and
        <code class="methodname">set_tip_width</code> and
        <code class="methodname">set_date_width</code> methods.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
statusbar.tip_width = 50 # Set the information display width to 50 px.
statusbar.set_tip_width (50)

statusbar.date_width = 50 # Set the date display width tto 50 px.
statusbar.set_date_width (50)
        </pre></div>
      </p><div class="example"><a name="ex_gui_statusbar"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/statusbar.py</code>.
        </p><a class="indexterm" name="id2594135"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># StatusBar examples.
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

def _update_tip (statusbar, button):
    statusbar.pop_tip ()
    statusbar.push_tip ("Button '%s' was clicked" % button.text)

def _create_vframe (text):
    frame = VFrame (Label (text))
    frame.spacing = 5
    frame.align = ALIGN_LEFT
    return frame

def create_statusbar_view ():
    table = Table (1, 3)
    table.spacing = 5
    
    # Create and display a simple StatusBar with some children.
    frame = _create_vframe ("StatusBar")
    status = StatusBar ()
    button1 = Button ("Button")
    button1.connect_signal (SIG_CLICKED, _update_tip, status, button1)
    button2 = CheckButton ("Empty")
    button2.connect_signal (SIG_CLICKED, _update_tip, status, button2)

    status.add_child (button1, button2)
    
    button = Button ("Testbutton")
    button.connect_signal (SIG_CLICKED, _update_tip, status, button)
    frame.add_child (button, status)
    
    table.add_child (0, 0, frame)
    return table

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (450, 150)
    re.title = "StatusBar examples"
    re.color = (234, 228, 223)
    re.add_widget (create_statusbar_view ())
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 45. StatusBar example</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="widgets_tooltipwindow"></a>TooltipWindow</h3></div></div></div><p>
        The <code class="classname">TooltipWindow</code> is a non-interactive
        widget that can display a short to medium amount of text and can
        be used to display additional information and descriptions.  It
        uses a certain background color to be easily distinguished from
        other widgets.
      </p><p>
        To create a <code class="classname">TooltipWindow</code> widget, you
        simply invoke its constructor with the text to display.
      </p><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
window = TooltipWindow ("A message to display")
      </pre></div><p>
        To set the text after creation, use the <span class="property">text</span>
        attribute or <code class="methodname">set_text()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
window.text = "New Text"
window.set_text ("New Text")
        </pre></div>
      </p><div class="example"><a name="ex_gui_tooltipwindow"></a><div class="example-contents"><p>
          You can find the following example as a python script under
          <code class="filename">examples/tooltipwindow.py</code>.
        </p><a class="indexterm" name="id2594209"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># TooltipWindow examples
import pygame.mouse
from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

__tooltip = None

def _make_tooltip (tip, renderer):
    global __tooltip

    # Destroy the tooltip, if it exists.
    if __tooltip:
        __tooltip.destroy ()

    # Create a new tooltip.
    __tooltip = TooltipWindow (tip)
    x, y = pygame.mouse.get_pos ()
    __tooltip.topleft = x + 8, y - 5
    __tooltip.depth = 99 # Make it the topmost widget.

    renderer.add_widget (__tooltip)

def _destroy_tooltip ():
    # Destroy the tooltip, if it exists.
    global __tooltip
    if __tooltip:
        __tooltip.destroy ()
        __tooltip = None

def create_tooltip_view (renderer):

    frame = VFrame ()
    frame.border = BORDER_NONE
    frame.spacing = 20
    
    button1 = Button ("Move the mouse over me")
    button1.tooltip = "An enhanced description"
    button1.connect_signal (SIG_ENTER, _make_tooltip, button1.tooltip, renderer)
    button1.connect_signal (SIG_LEAVE, _destroy_tooltip)
        
    button2 = Button ("And over me, too")
    button2.tooltip = "Another description"
    button2.connect_signal (SIG_ENTER, _make_tooltip, button2.tooltip, renderer)
    button2.connect_signal (SIG_LEAVE, _destroy_tooltip)

    frame.children = button1, button2

    return frame

if __name__ == "__main__":
    # Initialize the drawing window.
    re = Renderer ()
    re.create_screen (200, 150)
    re.title = "TooltipWindow examples"
    re.color = (234, 228, 223)
    re.add_widget (create_tooltip_view (re))
    # Start the main rendering loop.
    re.start ()
</pre></div></div><p class="title"><b>Example 46. TooltipWindow example</b></p></div><br class="example-break"></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="widget_components"></a>Widget components</h2></div></div></div><p>
      The following section covers the usage of the components used by
      the <code class="classname">ocempgui.widgets</code> module. Components
      denote elements, which are strongly wired with or used by a
      widget, but do not inherit from the
      <code class="classname">BaseWidget</code> in any way. The components can
      be found in the <code class="classname">ocempgui.widgets.components</code>
      submodule.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="components_listitem"></a>ListItem</h3></div></div></div><p>
        The <code class="classname">ListItem</code> component is an abstract
        base class for creating own item implementations, which are
        suitable for the usage in list or tree widgets. It contains a
        set of attributes and methods, which make it ready to be used in
        the <code class="classname">ListItemCollection</code> collection class.
      </p><p>
        You usually will not create <code class="classname">ListItem</code>
        objects directly, but instead subclass them, whenever you need a
        more advanced or specialized item type, than the
        <code class="classname">TextListItem</code> and
        <code class="classname">FileListItem</code> offer.
      </p><p>
        Similar to the widgets inheriting from the
        <code class="classname">BaseWidget</code> class, the
        <code class="classname">ListItem</code> offers a
        <span class="property">style</span> attribute, that lets you set up an
        instance specific look and feel for it.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
# Create the instance specific style information.
listitem.create_style()
listitem.style['font']['size'] = 16 
        </pre></div>
      </p><p>
        The collection, the item should be or is bound to, can be read
        and set by accessing its <span class="property">collection</span> attribute.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
if listitem.collection != my_collection:
    listitem.set_collection (my_collection)
        </pre></div>
      </p><p>
        To make the <code class="classname">ListItem</code> suitable for tree or
        list widgets, it contains a <span class="property">selected</span>
        attribute that, as the name says, can be used by the according
        widget implementation to set or determine the selection state of
        the item.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
if not listitem.selected:
    listitem.selected = True
        </pre></div>
      </p><p>
        For optimization purposes in drawing the
        <code class="classname">ListItem</code> contains, similar to the
        <code class="classname">BaseWidget</code>, a <span class="property">dirty</span>
        attribute and <code class="methodname">set_dirty()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
listitem.dirty = True
        </pre></div>
        Changing its value to True will try to inform its collection
        about that the item has changed, so that an updating process can
        be started.
      </p><p>
        For concrete implementations and examples, the author recommends
        to look at the source code of the
        <code class="classname">TextListItem</code> and
        <code class="classname">FileListItem</code> implementations, which will
        be explained hereafter.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="components_textlistitem"></a>TextListItem</h3></div></div></div><p>
        The <code class="classname">TextListItem</code> - as its name suggests -
        is a <code class="classname">ListItem</code>, that is able to store and
        show text. Besides this it does not offer anything oustanding so
        that its only improvements are to set and get text.
      </p><p>
        A <code class="classname">TextListItem</code> is created by passing the
        text it should store to its constructor.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
listitem = TextListItem ("This is a TextListItem")
        </pre></div>
        It is not needed to set the text explicitly at creation time. It
        can be fetched or changed at any time with the
        <span class="property">text</span> attribute.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
listitem.text = "I contain changed text."
        </pre></div>
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="components_filelistitem"></a>FileListItem</h3></div></div></div><p>
        The <code class="classname">FileListItem</code> is an advanced
        <code class="classname">TextListItem</code>, which contains additional
        attributes to make it suitable for storing different file
        related information.
      </p><p>
        The <code class="classname">FileListItem</code> requires besides a text
        the file mode information (those are explained in detail in the
        stat documentation).
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
# Retrieve the stats for a file.
st = os.stat ("myfile")

# Create the item with the file modes.
listitem = ("myfile", st.st_mode)
        </pre></div>
      </p><p>
        Dependant on the passed file mode, which will be stored in the
        <span class="property">filetype</span> attribute,
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
if stat.S_ISDIR (listitem.filetype):
    print "Item %s is a directory, hooray!" % listitem.text
        </pre></div>
        the <code class="classname">FileListItem</code> will set load a matching
        icon into its <span class="property">icon</span> attribute (at
        construction time). This icon will be taken from the
        <code class="classname">Icons16x16</code> icon constants of the
        <code class="classname">ocempgui.widgets.images</code> submodule by
        default.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="components_listitemcollection"></a>ListItemCollection</h3></div></div></div><p>
        The <code class="classname">ListItemCollection</code> is a wrapper
        around the python builtin type <span class="emphasis"><em>list</em></span>. It
        supports a set of most important list operations, such as
        iterators, slicing and sorting. Several methods, especially the
        arithmetic overloads (addition, mulitplication, etc.) are not
        available. For a complete list of supported operations, browse
        the documentation strings of the
        <code class="classname">ListItemCollection</code>.
      </p><p>
        The <code class="classname">ListItemCollection</code> is created by
        simply invoking its constructor.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
collection = ListItemCollection ()
        </pre></div>
        Items can be added in a similar way to the list type using the
        <code class="methodname">insert()</code>,
        <code class="methodname">append()</code> or
        <code class="methodname">extend()</code> methods for example.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
collection.append (item1)
collection.insert (9, item2)
        </pre></div>
      </p><p>
        The specialities of the
        <code class="classname">ListItemCollection</code> are, that it only
        accepts <code class="classname">ListItem</code> objects as valid items
        on the one hand and supports two notification slots on the
        other. Those notification slots are implemented as attributes,
        <span class="property">item_changed</span> and
        <span class="property">list_changed</span>. Any method or function can be
        bound to those to get informed about item changes in the list
        (e.g. an item has changed its contents) and list changes in
        general (items were added, removed, etc.). The
        <span class="property">item_changed</span> attribute additionally passes
        the affected item to the notification handler, while
        <span class="property">list_changed()</span> will pass the
        <code class="classname">ListItemCollection</code>.
      </p><div class="example"><a name="ex_listitemcollection_notifier"></a><div class="example-contents"><p>
          You can find the following example as a python script under
        <code class="filename">examples/listitemcollection.py</code>.
        </p><a class="indexterm" name="id2594541"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># ListItemCollection example.
from ocempgui.widgets.components import ListItemCollection, TextListItem

# Item change handler.
def item_has_changed (item):
    print "Item '%s' has changed" % item.text

# List change handler.
def list_has_changed (l):
    print "List now contains %d item(s)" % l.length

collection = ListItemCollection ()

# Set up a notification handler for item changes.
collection.item_changed = item_has_changed

# Set up a notification handler for list changes
collection.list_changed = list_has_changed

for i in xrange (5):
    collection.append (TextListItem ("Item no. %d" % i))

collection[2].text = "New text in item 3"

# Use a tuple as constructor argument.
items = (TextListItem ("String 1"), TextListItem ("String 2"),
         TextListItem ("String 3"))
collection = ListItemCollection (items)
print "New collection:"
print collection
</pre></div></div><p class="title"><b>Example 47. ListItemCollection example</b></p></div><br class="example-break"></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="custom_widgets"></a>Creating custom widgets</h2></div></div></div><p>
      Sometimes it is necessary to create an own, specialized widget
      type, that matches your exact needs. The following section will
      give you an rough overview about what you have to keep in mind and
      about what you have to take care, when creating custom widgets.
      You are encouraged to browse the existing widget sourcecode in
      order to see, how the one or other is implemented.
    </p><p>
      In this section, you will create an own widget, that lets the user
      play the famous game Tic Tac Toe and is able to deal with a custom
      SIG_TICTACTOE event.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="designing_the_basis"></a>Designing the basis</h3></div></div></div><p>
        First of all you should make yourself a picture about how the
        widget should look like and what it should be able to do.  In
        our case, this would be an area consisting of 3x3 squares, of
        which each is clickable exactly one time and should fill -
        dependant on whose turn it is - the square with either a cross
        or a circle.  When the game is ended, the widget should note
        that by sending a corresponding event, so that other widgets can
        update themselves according to that.
      </p><p>
        After you know about how it should look like and what it should
        be able to do, its time to collect the things you need. Whenever
        it is possible, you should use existing code or classes, so that
        you do not need to reinvent anything.
      </p><p>
        Luckily our example can be completed by using a
        <code class="classname">Table</code> widget with 3 rows and 3 columns
        and nine <code class="classname">ImageButton</code> widgets, that can
        display the circle or cross. The only things, that do not exist
        are the signal and graphics for a circle and cross.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="implementing_the_widget_basics"></a>Implementing the widget basics</h3></div></div></div><p>
        We start by creating a custom class, that inherits directly from
        the <code class="classname">Table</code>.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
from ocempgui.draw import Image
from ocempgui.widgets import Table
from ocempgui.widgets.Constants import *

class TicTacToe (Table):
    """The famous game as widget.
    """
    def __init__ (self):
        Table.__init__ (self, 3, 3)
        </pre></div>
        Now we have to place nine blank
        <code class="classname">ImageButton</code> widgets into the table. We
        will size them to 60x60 px, so that they will not resize
        later, when we set their images, which have a size of 48x48 px.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class TicTacToe (Table):
    ...
    def __init__ (self):
        Table.__init__ (self, 3, 3)
        for i in xrange (3):
            for j in xrange (3):
                button = ImageButton ("")
                button.minsize = 60, 60
                self.add_child (i, j, button)
        </pre></div>
        That was not too complicated, but the buttons also need to react
        upon clicks and they have to distinct between two players.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class TicTacToe (Table):
    ...
    def __init__ (self):
        Table.__init__ (self, 3, 3)
        self._curplayer = "Player 1"

        for i in xrange (3):
            for j in xrange (3):
                button = ImageButton ("")
                button.minsize = 60, 60
                self.add_child (i, j, button)
                button.connect_signal (SIG_CLICKED, self._clicked, button,
                                       i, j)
        </pre></div>
        This will cause them to raise the
        <code class="methodname">_clicked()</code> method, which we now
        implement:
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class TicTacToe (Table):
    ...
    def __init__ (self):
        ...

    def _clicked (self, button, i, j):
        """Sets the image of the button, if not already done.
        """
        button = self.grid[(i, j)]
        # Check, if it is not already set.
        if button.picture == None:
            if self._curplayer == "Player 1":
                # Use the cross.
                button.picture = "cross.png"
                self._curplayer = "Player 2"
            else:
                button.picture = "circle.png"
                self._curplayer = "Player 1"
        </pre></div>
      </p><p>
        The widget is fairly usable now, but still lacks the event
        mechanism, which will be explained in the next section.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="implementing_the_event_handlers"></a>Implementing the event handlers</h3></div></div></div><p>
        To allow a better interactivity with the TicTacToe widget, it
        will invoke its event handlers, whenever a player clicked on a
        square. Dependant on what happens, the event mechanism should
        indicate this. Thus it will have to pass additional data to the
        event handlers. We want it to send the following data:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="emphasis"><em>TICTACTOE_VALIDSQUARE</em></span>, if the player
              clicked on an unoccupied button,
            </p></li><li><p>
              <span class="emphasis"><em>TICTACTOE_INVALIDSQUARE</em></span>, if the
              player clicked on an occupied button,
            </p></li><li><p>
              <span class="emphasis"><em>TICTACTOE_WIN</em></span>, if the one of the
              players wins. Further input should not be allowed
              afterwards.
            </p></li></ul></div><p>
      </p><p>
        Implementing the first and second event is easy and we only have
        to add four lines of code to our existing class. The first line
        will define the SIG_TICTACTOE signal, the next three lines our
        signal data we want to send.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
from ocempgui.widgets import Table
from ocempgui.widgets.Constants import *

SIG_TICTACTOE = "tictactoe"
TICTACTOE_WIN = 1
TICTACTOE_VALIDSQUARE = 0
TICTACTOE_INVALIDSQUARE = -1

class TicTacToe (Table):
    """The famous game as widget.
    """
    ...
        </pre></div>
        The second line prepares the TicTacToe widget to connect
        callbacks to the SIG_TICTACTOE signal.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class TicTacToe (Table):
    """The famous game as widget.
    """
    def __init__ (self):
        ...
        self._signals[SIG_TICTACTOE] = []
        </pre></div>
        The next two line will cause the widget to run the appropriate
        signal handlers upon clicks on the buttons.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class TicTacToe (Table):
    ...
    def _clicked (self, button, i, j):
        """Sets the image of the button, if not already done.
        """
        button = self.grid[(i, j)]
        # Check, if it is not already set.
        if button.picture == None:
            if self._curplayer == "Player 1":
                button.picture = "cross.png"
                self._curplayer = "Player 2"
            else:
                button.picture = "circle.png"
                self._curplayer = "Player 1"
            self.run_signal_handlers (SIG_TICTACTOE, TICTACTOE_VALIDSQUARE)

        else:
            self.run_signal_handlers (SIG_TICTACTOE, TICTACTOE_INVALIDSQUARE)
        </pre></div>
      </p><p>
        The third event handler requires a bit more work as we have to
        check, if there are three buttons displaying the same picture in
        a row. The most simple (and unoptimized) algorithm for that
        would be:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Check all columns for the first, second and third line.
            </p></li><li><p>
              Check all lines for the first, second and third column.
            </p></li><li><p>
              Check diagonal the squares located at (0, 0), (1, 1) and
              (2, 2).
            </p></li><li><p>
              Check diagonal the squares located at (0, 2), (1, 1) and
              (2, 0).
            </p></li></ul></div><p>
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class TicTacToe (Table):
    ...
    def _check_input (self):
        """Checks for three in a row.
        """
        three = False
        image = None

        # Check the columns
        for i in xrange (3):
            if three:
                break
            image = self.grid[(i, 0)].path
            if image:
                three = (self.grid[(i, 1)].path == image) and \
                        (self.grid[(i, 2)].path == image)

        if not three:
            # Check the rows.
            for i in xrange (3):
                if three:
                    break
                image = self.grid[(0, i)].path
                if image:
                    three = (self.grid[(1, i)].path == image) and \
                            (self.grid[(2, i)].path == image)

        if not three:
            # Diagonal left to right
            image = self.grid[(0, 0)].path
            if image:
                three = (self.grid[(1, 1)].path == image) and \
                        (self.grid[(2, 2)].path == image)
            if not three:
                # Diagonal right to left
                image = self.grid[(2, 0)].path
                if image:
                    three = (self.grid[(1, 1)].path == image) and \
                            (self.grid[(0, 2)].path == image)

        if three:
            self._finished = True
            self.run_signal_handlers (SIG_TICTACTOE, TICTACTOE_WIN)
        </pre></div>
        The check has to be performed right after a valid input. The
        <span class="property">_finished</span> attribute will be used to check,
        if input is still possible or not. We have to place it in the
        constructor code
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class TicTacToe (Table):
    """The famous game as widget.
    """
    def __init__ (self):
        ...
        self._finished = False
        </pre></div>
        as well as to check its value in the button callback, in which
        we have to add the input check, too.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
    def _clicked (self, button, i, j):
        """Sets the image of the button, if not already done.
        """
        if self._finished:
            return
        
        button = self.grid[(i, j)]
        # Check, if it is not already set.
        if button.picture == None:
            if self._curplayer == "Player 1":
                # Use the cross.
                button.picture = "cross.png"
            else:
                button.picture = "circle.png"
            self.run_signal_handlers (SIG_TICTACTOE, TICTACTOE_VALIDSQUARE)
            self._check_input ()

            # Set it after the check, so we can get the correct player name.
            if self._curplayer == "Player 1":
                self._curplayer = "Player 2"
            else:
                self._curplayer = "Player 1"
        else:
            self.run_signal_handlers (SIG_TICTACTOE, TICTACTOE_INVALIDSQUARE)
        </pre></div>
      </p><p>
        As you see, switching the current player is done right after
        running signal handler and input check now, so that clicks onto
        an already occupied buttons do not cause a player change.
      </p><p>
        So far we are done. You can play a basic Tic Tac Toe game with
        your newly created widget and the widget can react upon the user
        input. It is however neither very usable nor nice to look
        at. All those things will be explained in the next section, but
        first let us look at the complete code.
      </p><p>
        Note that an additional <span class="property">curplayer</span> attribute
        is at the bottom of the code, so that it is possible to find
        out, who's turn it is.
      </p><div class="example"><a name="ex_ownwidget1"></a><div class="example-contents"><p>
          You can find the code as a python script under
          <code class="filename">examples/tictactoe/TicTacToeSimple.py</code>.
          There is also a small starting test script called
          <code class="filename">tictactosimple.py</code> as well as the both
          needed graphics.
        </p><a class="indexterm" name="id2594921"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">from ocempgui.widgets import *
from ocempgui.widgets.Constants import *

SIG_TICTACTOE = "tictactoe"
TICTACTOE_WIN = 1
TICTACTOE_VALIDSQUARE = 0
TICTACTOE_INVALIDSQUARE = -1

class TicTacToe (Table):
    """The famous game as widget.
    """
    def __init__ (self):
        Table.__init__ (self, 3, 3)
        self._curplayer = "Player 1"
        self._finished = False
        
        for i in xrange (3):
            for j in xrange (3):
                button = ImageButton ("")
                button.minsize = 60, 60
                self.add_child (i, j, button)
                button.connect_signal (SIG_CLICKED, self._clicked, button,
                                       i, j)
        self._signals[SIG_TICTACTOE] = []

    def _clicked (self, button, i, j):
        """Sets the image of the button, if not already done.
        """
        if self._finished:
            return
        
        button = self.grid[(i, j)]
        # Check, if it is not already set.
        if button.picture == None:
            if self._curplayer == "Player 1":
                # Use the cross.
                button.picture = "cross.png"
            else:
                button.picture = "circle.png"
            self.run_signal_handlers (SIG_TICTACTOE, TICTACTOE_VALIDSQUARE)
            self._check_input ()

            # Set it after the check, so we can get the correct player name.
            if self._curplayer == "Player 1":
                self._curplayer = "Player 2"
            else:
                self._curplayer = "Player 1"
        else:
            self.run_signal_handlers (SIG_TICTACTOE, TICTACTOE_INVALIDSQUARE)

    def _check_input (self):
        """Checks for three in a row.
        """
        three = False
        image = None

        # Check the columns
        for i in xrange (3):
            if three:
                break
            image = self.grid[(i, 0)].path
            if image:
                three = (self.grid[(i, 1)].path == image) and \
                        (self.grid[(i, 2)].path == image)

        if not three:
            # Check the rows.
            for i in xrange (3):
                if three:
                    break
                image = self.grid[(0, i)].path
                if image:
                    three = (self.grid[(1, i)].path == image) and \
                            (self.grid[(2, i)].path == image)

        if not three:
            # Diagonal left to right
            image = self.grid[(0, 0)].path
            if image:
                three = (self.grid[(1, 1)].path == image) and \
                        (self.grid[(2, 2)].path == image)
            if not three:
                # Diagonal right to left
                image = self.grid[(2, 0)].path
                if image:
                    three = (self.grid[(1, 1)].path == image) and \
                            (self.grid[(0, 2)].path == image)

        if three:
            self._finished = True
            self.run_signal_handlers (SIG_TICTACTOE, TICTACTOE_WIN)

    curplayer = property (lambda self: self._curplayer)
</pre></div></div><p class="title"><b>Example 48. Simple TicTacToe widget</b></p></div><br class="example-break"></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="advanced_custom_widgets"></a>Advanced custom widgets</h2></div></div></div><p>
      <span class="emphasis"><em>TODO</em></span>
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="gui_style"></a>Changing the widget appearance</h2></div></div></div><p>
      The <code class="classname">ocepgui.widgets</code> module offers two
      possibilities to change the provided widget appearance. This
      section covers the necessary tasks, which have to be performed to
      change create an own look and feel to match your personal needs.
    </p><p>
      The first part will give you a rough overview about how the
      styling and drawing system of the
      <code class="classname">ocempgui.widgets</code> module words, while the
      second will explain the style files and syntax, that deal with
      basic attributes such as background colors or fonts. The last part
      then gives an in-depth explanation, how to provide own drawing
      methods for a widget to spend it a completely different look
      and feel (such as rounded borders for buttons for example).
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="how_widgets_are_drawn"></a>How widgets are drawn</h3></div></div></div><p>
        The rendering engine contains several methods to draw each
        widget and some generalized methods for some commonly used parts
        such as the basic widget surface. The widget to draw is passed
        to its matching drawing method, which will look up its style
        settings and then draw it.
      </p><div class="figure"><a name="figure_widget_drawing_process"></a><div class="figure-contents"><div class="mediaobject"><img src="img/drawing_widgets.png" alt="Widget drawing process diagram."></div></div><p class="title"><b>Figure 3. Widget drawing process</b></p></div><br class="figure-break"><p>
        The <code class="classname">Style</code> supports cascading the widget
        style settings. This means, that it will, when it retrieves the
        widget style and does not find the style setting it needs, walk
        through the inherited classes (the <span class="property">__mro__</span>
        attribute) of the widget until it finds the setting. The last
        instance it looks the setting up in is the
        <span class="emphasis"><em>"default"</em></span> entry of its
        <span class="property">styles</span> attribute.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="customizing_the_theme_files"></a>Customizing the theme files</h3></div></div></div><p>
        Theme files for OcempGUI define the most basic settings for the
        widgets, such as the background color or the font to use. They
        however do not cause the widget to look completely
        different. The basic widget layout will stay the same.
      </p><p>
        The theme files are read by the currently active
        <code class="classname">Style</code> class (which is set in
        <code class="classname">base.GlobalStyle</code>) and their information
        will be stored in its <span class="property">styles</span> dictionary.
      </p><p>
        The currently active theme information for a specific widget
        class are stored in the <span class="property">styles</span> attribute by
        using its lowercase classname. This means that the specific
        theme for a <code class="classname">Button</code> widget is stored in
        <code class="code">Style.styles["button"]</code>. For a
        <code class="classname">Label</code> widget it would be
        <code class="code">Style.styles["label"]</code> and so on.
      </p><p>
        Such a theme entry is a dictionary, that contains various
        information about the background and foreground color for the
        different supported widget states, the font settings for that
        widget and more. The complete list of possible settings can be
        found in the documentation of the <code class="classname">Style</code>,
        so it will not be covered in detail here. 
      </p><p>
        Setting up individual styles should be done using an own file
        for them, so you can easily change them without touching your
        program code. Let us create a separate theme file, that will
        cause the buttons to use a blue background color and the labels
        a different font and foreground color.
      </p><p>
        After creating the file for that (the author recommends using
        the suffix <span class="emphasis"><em>".rc"</em></span> for theme files), we use
        the python syntax for the contents. First we have to let the
        file and its content know about the supported widget states,
        thus we will import the <code class="classname">Constants</code> of the
        <code class="classname">ocempgui.widgets</code> module.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
from ocempgui.widgets import Constants
        </pre></div>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Do not use any <code class="code">from ... import *</code> within the theme
          files to avoid a bloated <code class="classname">Style</code> class.
          The theme loader give you much freedom including the
          possibility to make many mistakes. You also should not import
          anything except the <code class="classname">Constants</code> module
          into the theme file, too.
        </p></div><p>
        Now we will set up our theme dictionary for the
        <code class="classname">Button</code> widget.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
from ocempgui.widgets import Constants

button = { "bgcolor" : { Constants.STATE_NORMAL : (18, 12, 135),
                         Constants.STATE_ENTERED : (32, 25, 164),
                         Constants.STATE_ACTIVE : (18, 12, 135),
                         Constants.STATE_INSENSITIVE : (54, 51, 106) }
           }
        </pre></div>
        The above code will set, after loading the style file, the
        background color of any <code class="classname">Button</code> to
        different types of a dark blue color. It also will affect any
        inherited widget, that does not 
        </p><div class="itemizedlist"><ul type="disc"><li><p>implement and own style explicitly,</p></li><li><p>define the style setting in its own style.</p></li></ul></div><p>
        You can easily see this by placing a
        <code class="classname">Button</code> and a
        <code class="classname">CheckButton</code> side by side.
      </p><p>
        Let us now set the styles for the <code class="classname">Label</code>
        widget. The first part sets up the font, its size and if
        antialiasing should be used, the second one sets up different
        colors to use for the text according to the widget its state.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
from ocempgui.widgets import Constants

...
label = { "font" : { "name" : "Helvetica", "size" : 16, "alias" : True },
          "fgcolor" : { Constants.STATE_NORMAL : (250, 250, 250),
                        Constants.STATE_ENTERED : (150, 150, 150),
                        Constants.STATE_ACTIVE : (0, 0, 0),
                        Constants.STATE_INSENSITIVE : (235, 235, 235) }
          }
        </pre></div>
      </p><p>
        Typing in those <code class="classname">Constants...</code> entries can
        become a lot of work, especially with complex themes. Thus
        OcempGUI allows you to define variables to ease your life.  Any
        entry, that is prefixed with an underscore,
        <span class="emphasis"><em>"_"</em></span>, will be handled as variable, ignored
        by the loading mechanisms and thus does not go into the
        <span class="property">style</span> dictionary.
      </p><p>
        With this in mind, let's substitute those lengthy constants with
        some variables.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
from ocempgui.widgets import Constants

# Variables, that will be used to ease the life.
_normal = Constants.STATE_NORMAL
_entered = Constants.STATE_ENTERED
_active = Constants.STATE_ACTIVE
_insensitive = Constants.STATE_INSENSITIVE

button = { "bgcolor" : { _normal : (18, 12, 135),
                         _entered : (32, 25, 164),
                         _active : (18, 12, 135),
                         _insensitive : (54, 51, 106) }
           }
...
        </pre></div>
        Of course you can also use more than a single underscore. The
        only importance is, that the first letter of the entry starts
        with an underscore. Thus valid variables would be
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
_red = (255, 0, 0)
__myfont = "path/to/font.ttf"
____________a_pretty_long_variable_that_is_completely_useless = None
        </pre></div>
      </p><p>
        As you see, setting up own themes for widgets is not a complex
        task. Let us now examine the complete code and a small example,
        that will make use of the just created theme.
      </p><div class="example"><a name="ex_owntheme"></a><div class="example-contents"><p>
          You can find the code and theme as python scripts under
          <code class="filename">examples/theme_example.rc</code> and
          <code class="filename">examples/theme.py</code>.
        </p><a class="indexterm" name="id2595424"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">from ocempgui.widgets import Constants

# Variables, that will be used to ease the life.
_normal = Constants.STATE_NORMAL
_entered = Constants.STATE_ENTERED
_active = Constants.STATE_ACTIVE
_insensitive = Constants.STATE_INSENSITIVE

button = { "bgcolor" : { _normal : (18, 12, 135),
                         _entered : (32, 25, 164),
                         _active : (18, 12, 135),
                         _insensitive : (54, 51, 106) }
           }
label = { "font" : { "name" : "Helvetica", "size" : 16, "alias" : True },
          "fgcolor" : { _normal : (250, 250, 250),
                        _entered : (150, 150, 150),
                        _active : (0, 0, 0),
                        _insensitive : (235, 235, 235) }
          }
</pre></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Theme usage example.
from ocempgui.widgets import base, Renderer, Button, Label

# Load the theme.
base.GlobalStyle.load ("theme_example.rc")

# Create screen.
re = Renderer ()
re.create_screen (200, 100)
re.title = "Theme example"
re.color = (250, 250, 250)

# Create widgets.
button = Button ("Button")
button.topleft = 5, 5
label = Label ("Label")
label.topleft = 100, 5

re.add_widget (button, label)
re.start ()
</pre></div></div><p class="title"><b>Example 49. Customizing the themes</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="style_owndrawing"></a>Using own drawing routines</h3></div></div></div><p>
        Whenever you need an completely different layout, the creation
        of own theme files will not be enough. This section explains how
        to modify and/or override the drawing methods for the widgets.
      </p><p>
        First you should make yourself clear about if you need to
        provide an own layout only for specific instances of a widget
        or if those widgets always should be drawn that way. Dependant
        on your needs, you have several possibilites.
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Subclass the widget and override its
              <code class="methodname">draw()</code> and
              <code class="methodname">draw_bg()</code> methods.
            </p></li><li><p>
              Bind the <code class="methodname">draw()</code> and
              <code class="methodname">draw_bg()</code> methods of the instance
              to your own methods or functions at runtime.
            </p></li><li><p>
              Provide an own drawing method for the widget type and bind
              it to the set drawing engine.
            </p></li><li><p>
              Implement an own drawing engine and bind it to the
              <code class="classname">Style</code> instance.
            </p></li></ul></div><p>
      </p><p>
        The first both entries should be self-explanatory. The only
        thing you have to keep in mind when overriding the widget's
        drawing methods are, that you <span class="emphasis"><em>must</em></span> invoke
        at least the <code class="methodname">BaseWidget.draw()</code> method.
        This method updates the internals of the widget after drawing
        the background, does surface conversions and more, so it is an
        absolutely necessary method to be invoked.
      </p><p>
        Of course you can also invoke the parent's
        <code class="methodname">draw()</code> method, if you (just) want to
        add something to the widget's look instead of implementing all
        drawing yourself.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
class OwnButton (Button):
    ...
    def draw_bg (self):
        ... # Own background drawing implementation.

    def draw (self):
        # We want the drawing routines of the Button to be executed and
        # just add something to them.
        Button.draw (self)
        ...

class OwnButton2 (Button):
    ...
    def draw_bg (self):
        ... # Own drawing implementation.

    def draw (self):
        # Do not process any drawing of the Button, but use the BaseWidget
        # directly to update the widget internals, because we do anything
        # ourselves
        BaseWidget.draw (self)
        ...
        </pre></div>
      </p><p>
        So far for the first both entries of the above list. Now let's
        look at manipulating the drawing engine by overriding it
        (binding a new method should not be any problem for you, not?).
      </p><p>
        We will create an own drawing engine subclass using the provided
        <code class="classname">DefaultEngine</code> and use an own drawing
        method for <code class="classname">Label</code> widgets, which adds a
        dropshadow to them by default. After creating this subclass we
        will use an instance of it for our own small test application.
      </p><p>
        The first we have to do is to inherit from the
        <code class="classname">DefaultEngine</code> subclass. The class is not
        located in the module directly, but installed as additional data
        and can be imported with help of the
        <span class="emphasis"><em>DEFAULTDATADIR</em></span> constant.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
# Drawing engine usage example.
from ocempgui.widgets import *
from ocempgui.widgets.Constants import DEFAULTDATADIR

# Get the path where the theme engines are usually installed.
import sys
sys.path.append (DEFAULTDATADIR)
from themes import default

# Override the DefaultEngine with its drawing definitions so that we can
# implement our own draw_label() method.
class DropShadowEngine (default.DefaultEngine):
    def __init__ (self, style):
        default.DefaultEngine.__init__ (self, style)
        </pre></div>
        Now our own drawing engine contains anything, the
        <code class="classname">DefaultEngine</code> class contains. To provide
        our own drawing method for the <code class="classname">Label</code>, we
        have to override the matching method, which is
        <code class="methodname">draw_label()</code>.
      </p><p>
        As you can see from its signature, it receives one argument, the
        <code class="classname">Label</code> object, for which the surface
        should be created.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            All widget drawing methods follow the same naming scheme,
            which is <span class="emphasis"><em>draw_WIDGETTYPE (self, widget)</em></span>
            with widgettype being the all-lowercase classname.
          </p></div><p>
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
    def draw_label (self, label):
        """Overrides the label drawing method and adds a dropshadow."""
        # We do not care about multiline labels. Thus pass those to the
        # parent.
        if label.multiline:
            return DefaultEngine.draw_label (self, label)
        </pre></div>
        To keep it simple, we do not take care of multiline labels for
        now, thus we let its parent handle those.
      </p><p>
        Now we shorten some attributes, which we will need in our method
        more often.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
    def draw_label (self, label):
        ...
        cls = label.__class__
        state = label.state
        
        # Peek the style of the label so we can get the colors later.
        st = label.style or self.create_style (cls)
        </pre></div>
        The <span class="property">__class__</span> and
        <span class="property">state</span> attributes are used by many methods
        of the <code class="classname">DefaultEngine</code> class to look up the
        theme information of the widget. The <code class="varname">st</code>
        variable will be used to get and set the matching color for the
        dropshadow of our <code class="classname">Label</code>.
      </p><p>
        Now we have to get the foreground color to use for the text and
        store it temporarily as we will modify it in the
        <code class="varname">st</code> variable later.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
    def draw_label (self, label):
        ...
        # Save the label color temporarily as we will change it for the
        # dropshadow. Because we are using references, not plain style
        # copies, we have to do this.
        fgcolor = self.get_style_entry (cls, st, "fgcolor", state)

        # The 2px added here are used for the dropshadow.
        width = 2 * label.padding + 2
        height = 2 * label.padding + 2
        </pre></div>
        We also set up the width and height, our
        <code class="classname">Label</code> surface will occupy. Because the
        <code class="classname">Label</code> offers a
        <span class="property">padding</span> attribute, we have to take it into
        account for the surface size.
      </p><p>
        The basics are set up, so that we can proceed with drawing the
        surfaces for our widget.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
    def draw_label (self, label):
        ...
        if label.mnemonic[0] != -1:
            front = self.draw_string_with_mnemonic \
                    (label.text, state, label.mnemonic[0], cls, st)
            # Swap colors.
            st["fgcolor"] = { state : (100, 100, 100) }
            drop = self.draw_string_with_mnemonic \
                   (label.text, state, label.mnemonic[0], cls, st)
        else:
            front = self.draw_string (label.text, state, cls, st)
            # Swap colors.
            st["fgcolor"] = { state : (100, 100, 100) }
            drop = self.draw_string (label.text, state, cls, st)
        </pre></div>
        As you can see, we first look, if a mnemonic is set for the
        <code class="classname">Label</code> and then use either the mnemonic
        string drawing method or the simple string drawing method. We do
        that twice, for the normal text and its dropshadow. In line
        eleven and nineteen we swap the foreground color of the
        <code class="varname">st</code> variable with a bright grey one.
      </p><p>
        So we have our both surfaces now and are nearly done. But we
        have to respect some definitions of the
        <code class="classname">BaseWidget</code> and we have to reset the
        swapped colors.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
    def draw_label (self, label):
        ...
        # Surface creation done. Restore the colors.
        st["fgcolor"][state] = fgcolor

        # Get the size of the surface(s) and add it to the complete
        # width and height, the label will occupy.
        rect = front.get_rect ()
        width += rect.width
        height += rect.height
        
        # Guarantee size.
        width, height = label.check_sizes (width, height)
        </pre></div>
        Now we are ready to blit the surfaces and return the complete
        label surface.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
    def draw_label (self, label):
        ...
        # Blit all and return the label surface to the caller.
        surface = self.draw_rect (width, height, label.state, cls, st)
        surface.blit (drop, (label.padding + 2, label.padding + 2))
        surface.blit (front, (label.padding, label.padding))
        return surface
        </pre></div>
      </p><p>
        So far so good. We now have our own drawing engine, that will
        draw <code class="classname">Label</code> widgets with a dropshadow by
        default. The very last thing to do is to make the
        <code class="classname">omcepgui.widgets</code> module use our own class
        instead of the default. This is done by assigning the
        <span class="property">base.GlobalStyle.engine</span> attributes an
        instance of our own class in the code. The drawing methods will
        then make use of it.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
# Set out own drawing engine in the Style class.
base.GlobalStyle.engine = DropShadowEngine (base.GlobalStyle)
        </pre></div>
        Now all <code class="classname">Label</code> widgets will use the just
        created <code class="methodname">draw_label()</code> method.
      </p><p>
       The complete code of the previous example follows. It includes
       some test code, so you can easily evaluate the results.
      </p><div class="example"><a name="ex_owndrawing"></a><div class="example-contents"><p>
          You can find the code as python script under
          <code class="filename">examples/drawing_engine.py</code>.
        </p><a class="indexterm" name="id2596459"></a><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting"># Drawing engine usage example.
from ocempgui.widgets import *
from ocempgui.widgets.Constants import DEFAULTDATADIR

# Get the path where the theme engines are usually installed.
import sys
sys.path.append (DEFAULTDATADIR)
from themes import default

# Override the DefaultEngine with its drawing definitions so that we can
# implement our own draw_label() method.
class DropShadowEngine (default.DefaultEngine):

    def __init__ (self, style):
        default.DefaultEngine.__init__ (self, style)
    
    def draw_label (self, label):
        """Overrides the label drawing method and adds a dropshadow."""
        # We do not care about multiline labels. Thus pass those to the
        # parent.
        if label.multiline:
            return DefaultEngine.draw_label (self, label)

        cls = label.__class__
        state = label.state
        
        # Peek the style of the label so we can get the colors later.
        st = label.style or self.style.get_style (cls)

        # Save the label colour temporarily as we will change it for the
        # dropshadow. Because we are using references, not plain style
        # copies, we have to do this.
        fgcolor = self.style.get_style_entry (cls, st, "fgcolor", state)

        # The 2px added here are used for the dropshadow.
        width = 2 * label.padding + 2
        height = 2 * label.padding + 2

        # Backup the color.
        tmp = None
        if st.has_key ("fgcolor"): # Is fgcolor defined?
            tmp = st["fgcolor"]
        
        # Draw the text.
        front = None
        drop = None
        if label.mnemonic[0] != -1:
            front = self.draw_string_with_mnemonic \
                    (label.text, state, label.mnemonic[0], cls, st)
            # Swap colors.
            st["fgcolor"] = WidgetStyle ({ state : (100, 100, 100) })
            drop = self.draw_string_with_mnemonic \
                   (label.text, state, label.mnemonic[0], cls, st)
        else:
            front = self.draw_string (label.text, state, cls, st)
            # Swap colors.
            st["fgcolor"] = WidgetStyle ({ state : (100, 100, 100) })
            drop = self.draw_string (label.text, state, cls, st)

        # Surface creation done. Restore the colors.
        if not tmp:
            del st["fgcolor"]
        else:
            st["fgcolor"] = tmp

        # Get the size of the surface(s) and add it to the complete
        # width and height, the label will occupy.
        rect = front.get_rect ()
        width += rect.width
        height += rect.height
        
        # Guarantee size.
        width, height = label.check_sizes (width, height)

        # Blit all and return the label surface to the caller.
        surface = self.draw_rect (width, height, label.state, cls, st)
        surface.blit (drop, (label.padding + 2, label.padding + 2))
        surface.blit (front, (label.padding, label.padding))
        return surface

if __name__ == "__main__":
    re = Renderer ()
    re.create_screen (200, 200)
    re.title = "Style example."
    re.color = (234, 228, 223)

    # Set out own drawing engine in the Style class.
    base.GlobalStyle.engine = DropShadowEngine (base.GlobalStyle)

    label = Label ("Example label")
    label.create_style ()["font"]["size"] = 30
    label.topleft = 10, 10

    label2 = Label ("#Mnemonic")
    label2.create_style ()["font"]["size"] = 30
    label2.topleft = 10, 60

    button = CheckButton ("Dropshadow")
    button.topleft = 10, 100
    re.add_widget (label, label2, button)
    re.start ()
</pre></div></div><p class="title"><b>Example 50. Customizing the widget drawing routines</b></p></div><br class="example-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="style_instance"></a>Changing the appearance of single instances</h3></div></div></div><p>
        While the last sections dealt with changing the appearance of
        whole widget classes, this section will explain how to change
        particular bits of a single widget instance.
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="layer_index_system"></a>The layer and indexing system</h2></div></div></div><p>
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="layer_system"></a>Layers</h3></div></div></div><p>
        The <code class="classname">Renderer</code> class supports z-axis
        layering by drawing and keeping widgets on top of others as
        shown in the figure beneath. Layers are set up automatically,
        whenever a widget with a certain depth does not match the
        existing layers. Thus you usually will not have to deal with the
        layer internals of the <code class="classname">Renderer</code> class,
        but instead adjust the layers using the different
        widgets. Sometimes it might be necessary to manually adjust
        portions of the layer behaviour, especially if layers should be
        activated automatically on certain actions.

        </p><div class="figure"><a name="figure_layer_view"></a><div class="figure-contents"><div class="mediaobject"><img src="img/layers_view.png" alt="Layer view diagram."></div></div><p class="title"><b>Figure 4. Layer view on the display.</b></p></div><p><br class="figure-break">
      </p><p>
        The currently active layer, which has the input focus, can be
        get and set using the <span class="property">active_layer</span>
        attribute or <code class="methodname">set_active_layer()</code> method.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
layer = renderer.active_layer
renderer.set_active_layer (2)
        </pre></div>
        <span class="property">active_layer</span> will return a tuple consisting
        of three objects:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              an list containing the indices of the attached widgets for
              keyboard navigation,
            </p></li><li><p>
              a list containing the widgets attached to the layer,
            </p></li><li><p>
              an <code class="classname">EventManager</code> subclass, which
              deals with the events sent to the layer.
            </p></li></ul></div><p>
        You should not modify the contents nor the objects directly but
        instead use the respective <code class="classname">Renderer</code>
        methods instead.
      </p><p>
        The <code class="methodname">set_active_layer()</code> methods accepts
        both, a tuple as returned by <span class="property">active_layer</span>
        as well as an integer, which denotes the layer to activate
        (similarily to the <span class="property">depth</span> attribute of the
        <code class="classname">BaseWidget</code> class).
      </p><p>
        Both, the method and attribute, allow you to manipulate the
        active layer directly, so that you can enforce the focus on a
        certain dialog window for example.
      </p><p>
        It is also possible to cycle through the layers
        programmatically,using the
        <code class="methodname">switch_layer()</code> method. The figure
        beaneath shows, what happens on each invocation.
        <div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
renderer.switch_layer () # Step 1
renderer.switch_layer () # Step 2
renderer.switch_layer () # Step 3
        </pre></div>
      </p><div class="figure"><a name="figure_layer_cycling"></a><div class="figure-contents"><div class="mediaobject"><img src="img/layers_cycling.png" alt="Layer cycling diagram."></div></div><p class="title"><b>Figure 5. Layer cycling</b></p></div><br class="figure-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="index_system"></a>Index system</h3></div></div></div><p>
        To enhance the accessibility of widgets on the screen, the
        <code class="classname">Renderer</code> implements the
        <code class="classname">IIndexable</code> interface class to let the
        user navigate through widgets using the keyboard. Each installed
        layer manages its own indexing list, so that the navigation by
        default always happens on the currently active layer.
      </p><p>
        The <code class="classname">Renderer</code> determines the order,
        widgets are navigated through, using their
        <span class="property">index</span> attribute. The invocation of
        <code class="methodname">switch_index()</code> will set the keyboard
        focus to the widget with the next higher
        <span class="property">index</span> value. If the last widget is reached,
        the first widget will receive the focus again as shown in the
        figure below.
      </p><div class="figure"><a name="figure_index_switching"></a><div class="figure-contents"><div class="mediaobject"><img src="img/layers_indices.png" alt="Index switching diagram."></div></div><p class="title"><b>Figure 6. Index switching</b></p></div><br class="figure-break"></div></div><div class="appendix" lang="en"><h2 class="title" style="clear: both"><a name="widget_hierarchy"></a>A. Widget hierarchy</h2><p>
      Below you will find the Widget hierarchy of the
      <code class="classname">ocempgui.widget</code> module.
    </p><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color: #E0E0E0;"><pre class="programlisting">
BaseObject
  +-ActionListener
  `-BaseWidget
      +-Label
      +-ImageLabel
      +-Bin
      |  +-Alignment
      |  +-ButtonBase
      |  |  +-Button
      |  |  +-ImageButton
      |  |  +-ToggleButton
      |  |     +-CheckButton
      |  |     `-RadioButton
      |  |
      |  +-ScrolledWindow
      |  |  `-ScrolledList
      |  |     `-FileList
      |  |
      |  +-ViewPort
      |  |  `-ListViewPort
      |  |
      |  `-Window
      |     `-DialogWindow
      |        `-GenericDialog
      |           `-FileDialog
      +-Container
      |  +-Box
      |  +-Frame
      |  |  +-HFrame
      |  |  `-VFrame
      |  `-Table
      |
      +-Diagram
      |  `-Graph2D
      |
      +-Editable
      |  `-Entry
      |
      +-Range
      |  +-Scale
      |  |  +-HScale
      |  |  `-VScale
      |  |
      |  `-ScrollBar
      |     +-HscrolBar
      |     `-VScrollBar
      |
      +-ImageMap
      +-ProgressBar
      +-StatusBar
      `-TooltipWindow
    </pre></div></div><div class="appendix" lang="en"><h2 class="title" style="clear: both"><a name="changes_01x_02x"></a>B. Changes between 0.1.x and 0.2.x</h2><p>
        The following section will describe the most notably changes
        between the version series 0.1.x and 0.2.x, which might break
        the compatibility of applications. If you plan to migrate your
        OcempGUI application to 0.2.x, read this section carefully.
      </p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="changes_a11y"></a>Changes in ocempgui.access</h2></div></div></div><p>
          The <code class="classname">AccessibleContext</code> class was
          completely removed. Because it had no practical use, this should
          not affect anyone.
        </p><p>
          The <code class="classname">Accessible</code> class was renamed to
          <code class="classname">IAccessible</code>. Make sure, that you replace
          any occurance of it with the new name.
        </p><p>
          The <code class="classname">Indexable</code> class was renamed to
          <code class="classname">IIndexable</code>. Make sure, that you replace
          any occurance of it with the new name.
        </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="changes_events"></a>Changes in ocempgui.events</h2></div></div></div><p>
          The <code class="classname">EventManager</code> class expects
          <code class="classname">INotifyable</code> objects for addition to its
          queues. Although it does not force objects to inherit from
          <code class="classname">INotifyable</code>, it will print out a warning,
          if an object to add does not inherit from this class. Newly
          created classes thus should inherit from INotifyable, if they do
          not already inherit from it (by e.g. inheriting from
          <code class="classname">BaseObject</code>).
        </p><p>
          The <span class="property">eventgrabber</span> attribute of the
          <code class="classname">EventManager</code> was renamed to
          <code class="classname">event_grabber</code>. Make sure, that you
          replace all occurances of it accordingly, because there is no
          compatibility support.
        </p><p>
          The <code class="classname">EventManager</code> is a full class by now
          and does not implement <span class="property">__slots__</span> anymore.
          If your classes inherit from it, make sure, that they deal with
          that change correctly.
        </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="changes_widgets"></a>Changes in ocempgui.widgets</h2></div></div></div><p>
          Widgets are not placed using absolute coordinates
          anymore. Instead they are placed relative to their parent
          coordinates, which applies especially to boxed widgets being
          put in <code class="classname">Bins</code> or
          <code class="classname">Containers</code>. Their position attributes
          such as <span class="property">top</span>,
          <span class="property">topleft</span>, <span class="property">rect</span>,
          ... thus refer to their <span class="emphasis"><em>relative</em></span>
          position. To retrieve the absolute coordinates, you should use
          their <code class="methodname">rect_to_client()</code> method.
        </p><p>
          The <span class="property">position</span> attribute and
          <code class="methodname">set_position</code> method of widgets are
          deprecated and will be removed completely in a later
          version. The new <span class="property">topleft</span> attribute will
          replace them. Make sure to change your code accordingly over
          time.
        </p><p>
          The <span class="property">size</span> attribute of widgets is no
          longer writeable and its function was replaced by the new
          <span class="property">minsize</span> attribute. The
          <code class="methodname">set_size()</code> method however is still
          available but deprecated. Make sure, that your code respects
          that change.
        </p><p>
          The <span class="property">eventarea</span> attribute and
          <code class="methodname">set_event_area()</code> method of widgets
          are deprecated, do not have any functionality anymore and
          will be removed completely in a later version. The new method
          <code class="methodname">rect_to_client()</code> provides a read-only
          replacement for them in a slightly different intention.
        </p><p>
          The drawing code and behaviour heavily changed in 0.2.x, so
          that the widget method <code class="methodname">draw_bg()</code> now
          will take care of drawing a widget background (usually
          invoking <code class="methodname">Style.engine.draw_WIDGET()</code>),
          while <code class="methodname">draw()</code> will do the rest. This
          should only affect user-defined widgets or inheritors, which
          override the default drawing code. For more details see <a href="#gui_style" title="Changing the widget appearance">the section called &#8220;Changing the widget appearance&#8221;</a>.
        </p><p>
          Most <code class="classname">Button</code> widget implementations now
          inherit from the newly added <code class="classname">ButtonBase</code>
          class. This should not harm the most code, but inheritance
          checks might have to change accordingly. Make sure to recheck
          your code.
        </p><p>
          The <code class="classname">ScrolledWindow</code> class now
          encapsulates widgets using the <code class="classname">ViewPort</code>
          class. Code that relies upon the <span class="property">child</span>
          attribute of it, should be changed accordingly.
        </p><p>
          The <code class="methodname">get_visible_area()</code> method of the
          <code class="classname">ScrolledWindow</code> class is no longer
          publicly available.
        </p><p>
          The <code class="methodname">get_scrollable_area()</code> if the
          <code class="classname">ScrolledWindow</code> class was removed
          without a replacement.
        </p><p>
          The <code class="methodname">get_coords_from_value()</code> and
          <code class="methodname">get_value_from_coords()</code> methods of
          the <code class="classname">Scale</code> and
          <code class="classname">ScrollBar</code> classes are no longer
          publicly available.
        </p><p>
          The <code class="methodname">get_slider_size()</code> and
          <code class="methodname">get_button_coords()</code> methods of the
          <code class="classname">ScrollBar</code> classes are no longer
          publicly available.
        </p><p>
          The <code class="classname">RenderLayer</code> class was removed
          without a replacement.
        </p><p>
          The <code class="classname">Renderer</code> class does not directly
          inherit from the <code class="classname">EventManager</code> and
          <code class="classname">RenderLayer</code> classes anymore. A
          replacement for the <code class="classname">EventManager</code>
          functionality is the new <span class="property">managers</span>
          attribute. Code, that added user-defined objects to the
          <code class="classname">Renderer</code> should use the attribute and
          its layered behaviour from now on.
        </p><p>
          The <code class="methodname">force_update()</code> method of the
          <code class="classname">Renderer</code> class was removed. User code
          should use the <code class="methodname">update()</code> and/or
          <code class="methodname">refresh()</code> methods now.
        </p><p>
          The colour for flat borders (BORDER_FLAT) is no longer
          retrieved using the 'fgcolor' entry, but instead uses the new
          'bordercolor' style entry. Code, that made use of this should
          be changed to use 'bordercolor' from now on.
        </p><p>
          The <code class="classname">Style</code> no longer directly defines
          drawing routines. Instead it uses the drawing engine bound to
          its <span class="property">engine</span> attribute. User code, that
          made use of this, has to be changed accordingly. See <a href="#gui_style" title="Changing the widget appearance">the section called &#8220;Changing the widget appearance&#8221;</a> for more details.
        </p></div></div><div class="index"><div class="titlepage"><div><div><h2 class="title"><a name="example_index"></a>Example Index</h2></div></div></div><div class="index"><div class="indexdiv"><h3>C</h3><dl><dt>Creating custom widgets: Simple Tic Tac Toe widget, <a href="#ex_ownwidget1">Implementing the event handlers</a></dt><dt>Customizing the widget drawing routines, <a href="#ex_owndrawing">Using own drawing routines</a></dt><dt>Customizing theme files, <a href="#ex_owntheme">Customizing the theme files</a></dt></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>Draw.draw_line (), <a href="#ex_Draw.draw_line">Geometric objects</a></dt><dt>Draw.draw_rect (), <a href="#ex_Draw.draw_rect">Geometric objects</a></dt><dt>Draw.draw_triangle (), <a href="#geometric_objects">Geometric objects</a></dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>
            Event capable objects: Adding a signal to the object
          , <a href="#ex_object_signals">Creating event capable objects</a></dt><dt>
            Event capable objects: Connecting and disconnecting callbacks
          , <a href="#ex_object_callbacks">Creating event capable objects</a></dt><dt>
            Event capable objects: Connecting the object to an event manager.
          , <a href="#ex_object_eventmanager">Creating event capable objects</a></dt><dt>
            Event capable objects: Inheriting from the
            BaseObject class
          , <a href="#ex_object_inherit">Creating event capable objects</a></dt><dt>Event capable objects: Ping-Pong with a BaseObject, <a href="#ex_object_baseobject">Creating event capable objects</a></dt><dt>
            Event capable objects: Ping-Pong with the ActionListener
          , <a href="#ex_object_actionlistener">
        Events on demand: the ActionListener
      </a></dt><dt>
            Event capable objects: Setting up the notify() method
          , <a href="#ex_object_notify">Creating event capable objects</a></dt><dt>
            Event management: Adding and removing an object to the
            EventManager
          , <a href="#ex_event_add_object">Setting up the event management</a></dt><dt>
            Event management: Enabling an object to receive events
          , <a href="#ex_event_object_notify">Enabling objects to receive events</a></dt><dt>
            Event management: Sending events through the
            EventManager
          , <a href="#ex_event_emit">Sending events</a></dt><dt>
            Event management: The complete event management example
          , <a href="#ex_event_complete">Complete event management example</a></dt></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>FaderSurface example, <a href="#ex_complex_fadersurface">Complex objects</a></dt></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>GUI applications: Hello World with callbacks, <a href="#ex_gui_hello_world_signals">Events and Signals</a></dt><dt>GUI applications: Hello World with OcempGUI, <a href="#ex_gui_hello_world">Hello World with OcempGUI</a></dt><dt>GUI applications: Setting up the Renderer, <a href="#ex_gui_renderer">Getting started</a></dt><dt>GUI components: ListItemCollection example, <a href="#ex_listitemcollection_notifier">ListItemCollection</a></dt><dt>GUI widgets: Bin example, <a href="#ex_gui_pivotbin">Bin</a></dt><dt>GUI widgets: Bin.padding example, <a href="#ex_gui_bin_padding">Bin</a></dt><dt>GUI widgets: Box example, <a href="#ex_gui_box">Box</a></dt><dt>GUI widgets: Button example, <a href="#ex_gui_button">Button</a></dt><dt>GUI widgets: CheckButton example, <a href="#ex_gui_checkbutton">CheckButton</a></dt><dt>GUI widgets: Entry example, <a href="#ex_gui_entry">Entry</a></dt><dt>GUI widgets: FileDialog example, <a href="#ex_gui_filedialog">FileDialog</a></dt><dt>GUI widgets: Frame example, <a href="#ex_gui_frame">Frames</a></dt><dt>GUI widgets: GenericDialog example, <a href="#ex_gui_genericdialog">GenericDialog</a></dt><dt>GUI widgets: Graph2D example, <a href="#ex_gui_graph2d">Graph2D</a></dt><dt>GUI widgets: ImageButton example, <a href="#ex_gui_imagebutton">ImageButton</a></dt><dt>GUI widgets: ImageLabel example, <a href="#ex_gui_imagelabel">ImageLabel</a></dt><dt>GUI widgets: ImageMap example, <a href="#ex_gui_imagemap">ImageMap</a></dt><dt>GUI widgets: Label example, <a href="#ex_gui_label">Label</a></dt><dt>GUI widgets: ProgressBar example, <a href="#ex_gui_progressbar">ProgressBar</a></dt><dt>GUI widgets: RadioButton example, <a href="#ex_gui_radiobutton">RadioButton</a></dt><dt>GUI widgets: StatusBar example, <a href="#ex_gui_statusbar">StatusBar</a></dt><dt>GUI widgets: Table example, <a href="#ex_gui_table">Table</a></dt><dt>GUI widgets: ToggleButton example, <a href="#ex_gui_togglebutton">ToggleButton</a></dt><dt>GUI widgets: TooltipWindo example, <a href="#ex_gui_tooltipwindow">TooltipWindow</a></dt><dt>GUI widgets: Window example, <a href="#ex_gui_window">Window</a></dt></dl></div><div class="indexdiv"><h3>I</h3><dl><dt>Image.load_image (), <a href="#image_manipulation">Image manipulation</a></dt></dl></div><div class="indexdiv"><h3>O</h3><dl><dt>Observer Pattern: Observer example, <a href="#ex_observer">Tracking object states - the observer pattern</a></dt><dt>ocempgui.access.papi test example, <a href="#ex_a11y_papi">Making python objects accessible</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>String.create_font (), <a href="#ex_String.create_font">Text rendering</a></dt><dt>String.create_system_font (), <a href="#ex_String.create_system_font">Text rendering</a></dt><dt>String.draw_string (), <a href="#ex_String.draw_string">Text rendering</a></dt><dt>String.draw_string_with_bg (), <a href="#ex_String.draw_string_with_bg">Text rendering</a></dt></dl></div></div></div><div class="glossary"><div class="titlepage"><div><div><h2 class="title"><a name="glossary"></a>Glossary</h2></div></div></div><dl><dt><a xmlns="http://www.w3.org/TR/xhtml1/transitional" id="glAPI" name="glAPI"><span xmlns="" class="glossterm"><a name="glAPI"></a>API</span></a></dt><dd><p>Application programming interface</p></dd><dt><a xmlns="http://www.w3.org/TR/xhtml1/transitional" id="glATK" name="glATK"><span xmlns="" class="glossterm"><a name="glATK"></a>ATK</span></a></dt><dd><p>
          A library, which provides layers to accessibility solutions
          such as alternate input devices or online keyboards.
        </p></dd><dt><a xmlns="http://www.w3.org/TR/xhtml1/transitional" id="glCVS" name="glCVS"><span xmlns="" class="glossterm"><a name="glCVS"></a>CVS</span></a></dt><dd><p>See <a href="#glConcurrentVersionsSystem">
        Concurrent versions system
      </a>.</p></dd><dt><a xmlns="http://www.w3.org/TR/xhtml1/transitional" id="glConcurrentVersionsSystem" name="glConcurrentVersionsSystem"><span xmlns="" class="glossterm"><a name="glConcurrentVersionsSystem"></a>
        Concurrent versions system
      </span></a></dt><dd><p>A revision control system.</p></dd><dt><a xmlns="http://www.w3.org/TR/xhtml1/transitional" id="glGUI" name="glGUI"><span xmlns="" class="glossterm"><a name="glGUI"></a>GUI</span></a></dt><dd><p>Graphical user interface.</p></dd><dt><a xmlns="http://www.w3.org/TR/xhtml1/transitional" id="glPygame" name="glPygame"><span xmlns="" class="glossterm"><a name="glPygame"></a>Pygame</span></a></dt><dd><p>
          A set of python modules for writing games, based on the
          <acronym xmlns="http://www.w3.org/TR/xhtml1/transitional" title="Simple directmedia library"><span xmlns="" class="acronym">SDL</span></acronym>.
        </p></dd><dt><a xmlns="http://www.w3.org/TR/xhtml1/transitional" id="glPapi" name="glPapi"><span xmlns="" class="glossterm"><a name="glPapi"></a>Papi</span></a></dt><dd><p>
          Python accessibility programming interface - a wrapper around
          the ATK toolkit of the GNOME accessibility project, shipped
          with OcempGUI.
        </p></dd><dt><a xmlns="http://www.w3.org/TR/xhtml1/transitional" id="glPython" name="glPython"><span xmlns="" class="glossterm"><a name="glPython"></a>Python</span></a></dt><dd><p>A cross-platform scripting language.</p></dd><dt><a xmlns="http://www.w3.org/TR/xhtml1/transitional" id="glSDL" name="glSDL"><span xmlns="" class="glossterm"><a name="glSDL"></a>SDL</span></a></dt><dd><p>See <a href="#glSimpleDirectMediaLayer">
        Simple DirectMedia Layer
      </a>.</p></dd><dt><a xmlns="http://www.w3.org/TR/xhtml1/transitional" id="glSimpleDirectMediaLayer" name="glSimpleDirectMediaLayer"><span xmlns="" class="glossterm"><a name="glSimpleDirectMediaLayer"></a>
        Simple DirectMedia Layer
      </span></a></dt><dd><p>A cross-platform multimedia library.</p></dd><dt><a xmlns="http://www.w3.org/TR/xhtml1/transitional" id="glWidget" name="glWidget"><span xmlns="" class="glossterm"><a name="glWidget"></a>
        Widget
      </span></a></dt><dd><p>
          A user interface element on a screen, with which the user
          can interact in a passive or active way.
        </p></dd></dl></div></div></body></html>
